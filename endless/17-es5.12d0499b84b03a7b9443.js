!function(){function e(e,n){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var c=Object.prototype.toString.call(e).slice(8,-1);"Object"===c&&e.constructor&&(c=e.constructor.name);if("Map"===c||"Set"===c)return Array.from(e);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){c&&(e=c);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==c.return||c.return()}finally{if(l)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function n(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function c(e,t,c){return t&&n(e.prototype,t),c&&n(e,c),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"0FX9":function(e,t,n){var c=n("Z92M"),a=n("qmMu"),i=n("QUaw"),r=n("QAZZ");function o(e,t,n,i,r){var o=[].slice.call(arguments,1),l=o.length,s="function"==typeof o[l-1];if(!s&&!c())throw new Error("Callback required as last argument");if(!s){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=i=void 0):2!==l||t.getContext||(i=n,n=t,t=void 0),new Promise(function(c,r){try{var o=a.create(n,i);c(e(o,t,i))}catch(l){r(l)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(r=n,n=t,t=i=void 0):3===l&&(t.getContext&&void 0===r?(r=i,i=void 0):(r=i,i=n,n=t,t=void 0));try{var d=a.create(n,i);r(null,e(d,t,i))}catch(h){r(h)}}t.create=a.create,t.toCanvas=o.bind(null,i.render),t.toDataURL=o.bind(null,i.renderToDataURL),t.toString=o.bind(null,function(e,t,n){return r.render(e,n)})},"1sBl":function(e,t,n){var c=n("e/Dd").getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=c(e),a=145===n?26:2*Math.ceil((n-13)/(2*t-2)),i=[n-7],r=1;r<t-1;r++)i[r]=i[r-1]-a;return i.push(6),i.reverse()},t.getPositions=function(e){for(var n=[],c=t.getRowColCoords(e),a=c.length,i=0;i<a;i++)for(var r=0;r<a;r++)0===i&&0===r||0===i&&r===a-1||i===a-1&&0===r||n.push([c[i],c[r]]);return n}},"3X7Y":function(e,t,n){var c=n("u/Db");function a(e){this.mode=c.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){var t,n,c;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),c=parseInt(n,10),e.put(c,10);var a=this.data.length-t;a>0&&(n=this.data.substr(t),c=parseInt(n,10),e.put(c,3*a+1))},e.exports=a},"3kAz":function(t,n,i){"use strict";i.r(n),i.d(n,"options",function(){return an}),i.d(n,"GeneralSettingsModule",function(){return rn});var r,o=i("ofXK"),l=i("VToC"),s=i("25+x"),d=i("cplz"),h=i("7dP1"),g=(i("0FX9"),i("fXoL")),u=((r=function e(){a(this,e)}).\u0275mod=g.Zb({type:r}),r.\u0275inj=g.Yb({factory:function(e){return new(e||r)}}),r),f=i("44PX"),p=i("K3ix"),m=i("+Cnu"),_=i("Lm2G"),v=i("hzby"),b=i("dZIy"),y=i("LPYB"),x=i("oOf3"),w=i("3Pt+"),S=i("tyNb"),C=i("CMKA"),M=i("gFX4"),N=i.n(M),E=i("PSD3"),k=i.n(E),T=i("wd/R"),I=i("piOG"),P=i("1kSV"),R=i("3t6R"),A=i("ZOsW"),L=i("sYmb");function D(e,t){if(1&e){var n=g.ic();g.hc(0,"button",34),g.rc("click",function(){return g.Tc(n),g.vc()._exportAll()}),g.cc(1,"i",35),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Export")," "))}function B(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",36),g.hc(3,"h3",37),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function O(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",39),g.cd(2),g.gc(),g.hc(3,"td"),g.cd(4),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.cd(14),g.gc(),g.hc(15,"td"),g.cd(16),g.gc(),g.hc(17,"td"),g.hc(18,"button",40),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(87);return c._openModal(a,e)}),g.wc(19,"translate"),g.cc(20,"i",41),g.gc(),g.hc(21,"button",42),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(89);return c._openRelationshipModal(a,e)}),g.cc(22,"i",10),g.gc(),g.hc(23,"button",43),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(24,"translate"),g.cc(25,"i",44),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.ed(" ",c.company_code," "),g.Nb(2),g.dd(c.company_name_l),g.Nb(2),g.dd(c.address_l),g.Nb(2),g.ed(" ",c.tax_code," "),g.Nb(2),g.ed(" ",c.region_name_l," "),g.Nb(2),g.ed(" ",c.note_l," "),g.Nb(2),g.ed(" ",c.employee_nr," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(19,13,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("CUSTOMER","update")),g.Nb(3),g.Cc("disabled",!i._authenService.hasPermission("CUSTOMER","update")),g.Nb(2),g.Dc("ngbTooltip",g.xc(24,15,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("CUSTOMER","delete"))}}function U(e,t){if(1&e&&(g.fc(0),g.ad(1,O,26,17,"tr",38),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._customers)}}function F(e,t){1&e&&(g.fc(0),g.hc(1,"a",76),g.cc(2,"img",77),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function G(e,t){if(1&e&&(g.hc(0,"button",78),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function z(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,46),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",50),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",51),g.hc(11,"div",52),g.hc(12,"div",53),g.hc(13,"div",54),g.hc(14,"label",55),g.cd(15),g.wc(16,"translate"),g.wc(17,"translate"),g.hc(18,"span",37),g.cd(19,"(*)"),g.gc(),g.gc(),g.hc(20,"input",56),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.company_name_l=e}),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.hc(22,"div",53),g.hc(23,"div",54),g.hc(24,"label",57),g.cd(25),g.wc(26,"translate"),g.wc(27,"translate"),g.gc(),g.hc(28,"input",58),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.company_name_e=e}),g.wc(29,"translate"),g.gc(),g.gc(),g.gc(),g.hc(30,"div",53),g.hc(31,"div",54),g.hc(32,"label",59),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.gc(),g.hc(36,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.address_l=e}),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.hc(38,"div",53),g.hc(39,"div",54),g.hc(40,"label",61),g.cd(41),g.wc(42,"translate"),g.wc(43,"translate"),g.gc(),g.hc(44,"input",62),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.address_e=e}),g.wc(45,"translate"),g.gc(),g.gc(),g.gc(),g.hc(46,"div",53),g.hc(47,"div",54),g.hc(48,"label",63),g.cd(49),g.wc(50,"translate"),g.gc(),g.hc(51,"input",64),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.tax_code=e}),g.wc(52,"translate"),g.gc(),g.gc(),g.gc(),g.hc(53,"div",53),g.hc(54,"div",54),g.hc(55,"label",65),g.cd(56),g.wc(57,"translate"),g.gc(),g.hc(58,"ng-select",66),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedEmp=e})("change",function(){g.Tc(n);var e=g.vc();return e._changeEmployee(e.selectedEmp)}),g.wc(59,"translate"),g.wc(60,"translate"),g.gc(),g.gc(),g.gc(),g.hc(61,"div",53),g.hc(62,"div",54),g.hc(63,"label",67),g.cd(64),g.wc(65,"translate"),g.wc(66,"translate"),g.hc(67,"span",37),g.cd(68,"(*)"),g.gc(),g.gc(),g.hc(69,"textarea",68),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_l=e}),g.wc(70,"translate"),g.gc(),g.gc(),g.gc(),g.hc(71,"div",53),g.hc(72,"div",54),g.hc(73,"label",69),g.cd(74),g.wc(75,"translate"),g.wc(76,"translate"),g.gc(),g.hc(77,"textarea",70),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_e=e}),g.wc(78,"translate"),g.gc(),g.gc(),g.gc(),g.hc(79,"div",53),g.hc(80,"div",54),g.hc(81,"label",71),g.cd(82),g.wc(83,"translate"),g.gc(),g.hc(84,"ng-select",72),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedRegion=e})("change",function(){g.Tc(n);var e=g.vc();return e._changeRegion(e.selectedRegion)}),g.wc(85,"translate"),g.wc(86,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(87,"div",73),g.hc(88,"button",74),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(89),g.wc(90,"translate"),g.gc(),g.ad(91,F,5,3,"ng-container",31),g.ad(92,G,3,4,"button",75),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",null==c.entity.id?g.xc(5,47,"Add new"):g.xc(6,49,"Update")," "),g.Nb(11),g.fd("",g.xc(16,51,"Company")," (",g.xc(17,53,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(21,55,"Company"))("ngModel",c.entity.company_name_l),g.Nb(5),g.fd("",g.xc(26,57,"Company")," (",g.xc(27,59,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(29,61,"Company"))("ngModel",c.entity.company_name_e),g.Nb(5),g.fd("",g.xc(34,63,"Address")," (",g.xc(35,65,"Vietnamese"),")"),g.Nb(3),g.Cc("placeholder",g.xc(37,67,"Address"))("ngModel",c.entity.address_l),g.Nb(5),g.fd("",g.xc(42,69,"Address")," (",g.xc(43,71,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(45,73,"Address"))("ngModel",c.entity.address_e),g.Nb(5),g.ed("",g.xc(50,75,"Tax code")," "),g.Nb(2),g.Cc("placeholder",g.xc(52,77,"Tax code"))("ngModel",c.entity.tax_code),g.Nb(5),g.ed("",g.xc(57,79,"Business development")," "),g.Nb(2),g.Cc("items",c._getlistemp)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedEmp)("placeholder",g.xc(59,81,"Please choose"))("notFoundText",g.xc(60,83,"Not found item")),g.Nb(6),g.fd("",g.xc(65,85,"Note")," (",g.xc(66,87,"Vietnamese"),") "),g.Nb(5),g.Dc("placeholder",g.xc(70,89,"Note")),g.Cc("ngModel",c.entity.note_l),g.Nb(5),g.fd("",g.xc(75,91,"Note")," (",g.xc(76,93,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(78,95,"Note")),g.Cc("ngModel",c.entity.note_e),g.Nb(5),g.dd(g.xc(83,97,"Region")),g.Nb(2),g.Cc("items",c._regions)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedRegion)("placeholder",g.xc(85,99,"Please choose"))("notFoundText",g.xc(86,101,"Not found item")),g.Nb(5),g.ed(" ",g.xc(90,103,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function K(e,t){1&e&&(g.hc(0,"h4",48),g.cd(1),g.wc(2,"translate"),g.gc()),2&e&&(g.Nb(1),g.ed(" ",g.xc(2,1,"Relationship")," "))}function Q(e,t){if(1&e&&(g.hc(0,"h4",48),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){var n=g.vc(2);g.Nb(1),g.fd(" ",g.xc(2,2,"Contact")," - ",n._diaName," ")}}function Y(e,t){if(1&e&&(g.hc(0,"h4",48),g.cd(1),g.wc(2,"translate"),g.wc(3,"translate"),g.gc()),2&e){var n=g.vc(2);g.Nb(1),g.fd(" ",g.xc(2,2,"Relationship")," - ",g.xc(3,4,"ADDREL"==n._flagModal1?"Add new":"Update")," ")}}function V(e,t){if(1&e){var n=g.ic();g.hc(0,"div",88),g.hc(1,"pagination",89),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(3).pageIndexRel=e})("pageChanged",function(e){return g.Tc(n),g.vc(3).pageChangedRel(e)}),g.gc(),g.hc(2,"a",25),g.cd(3),g.wc(4,"translate"),g.wc(5,"translate"),g.wc(6,"translate"),g.wc(7,"translate"),g.gc(),g.gc()}if(2&e){var c=g.vc(3);g.Nb(1),g.Cc("boundaryLinks",!0)("totalItems",c.totalRowRel)("ngModel",c.pageIndexRel)("maxSize",c.pageDisplay)("itemsPerPage",c.pageSizeRel),g.Nb(2),g.gd("",g.xc(4,12,"Total of records"),": ",c.totalRowRel," - ",g.xc(5,14,"Page")," ",c.pageIndexRel," ",g.xc(6,16,"of")," ",c.totalPageRel," ",g.xc(7,18,"page"),"")}}function q(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",90),g.hc(3,"h3",37),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function j(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"td",91),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(4).editLinkPopUp(e)}),g.cd(2),g.gc(),g.hc(3,"td"),g.cd(4),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.cd(14),g.gc(),g.hc(15,"td"),g.hc(16,"button",43),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(4).deleteItemLinkContact(e)}),g.wc(17,"translate"),g.cc(18,"i",44),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=g.vc(4);g.Nb(2),g.ed(" ",c.code_link," "),g.Nb(2),g.dd(c.company_name_l),g.Nb(2),g.dd(c.sender_name),g.Nb(2),g.ed(" ",c.receive_company_l," "),g.Nb(2),g.ed(" ",c.receive_name," "),g.Nb(2),g.ed(" ",c.bill_company_l," "),g.Nb(2),g.ed(" ",c.bill_name," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(17,9,"Delete")),g.Cc("disabled",!a._authenService.hasPermission("CUSTOMER","delete"))}}function X(e,t){if(1&e&&(g.fc(0),g.ad(1,j,19,11,"tr",38),g.ec()),2&e){var n=g.vc(3);g.Nb(1),g.Cc("ngForOf",n._relationslist)}}function $(e,t){if(1&e){var n=g.ic();g.hc(0,"div",88),g.hc(1,"pagination",89),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(3).pageIndexRel=e})("pageChanged",function(e){return g.Tc(n),g.vc(3).pageChangedRel(e)}),g.gc(),g.hc(2,"a",25),g.cd(3),g.wc(4,"translate"),g.wc(5,"translate"),g.wc(6,"translate"),g.wc(7,"translate"),g.gc(),g.gc()}if(2&e){var c=g.vc(3);g.Nb(1),g.Cc("boundaryLinks",!0)("totalItems",c.totalRowRel)("ngModel",c.pageIndexRel)("maxSize",c.pageDisplay)("itemsPerPage",c.pageSizeRel),g.Nb(2),g.gd("",g.xc(4,12,"Total of records"),": ",c.totalRowRel," - ",g.xc(5,14,"Page")," ",c.pageIndexRel," ",g.xc(6,16,"of")," ",c.totalPageRel," ",g.xc(7,18,"page"),"")}}function J(e,t){if(1&e){var n=g.ic();g.hc(0,"div",52),g.hc(1,"div",82),g.hc(2,"input",83),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2)._keywordRel=e})("change",function(){return g.Tc(n),g.vc(2).loadRelationship()})("keyup.enter",function(){return g.Tc(n),g.vc(2).loadRelationship()}),g.wc(3,"translate"),g.gc(),g.gc(),g.hc(4,"div",84),g.hc(5,"button",85),g.rc("click",function(){return g.Tc(n),g.vc(2).linkContactPopUp1()}),g.cd(6),g.wc(7,"translate"),g.gc(),g.gc(),g.hc(8,"div",86),g.cc(9,"br"),g.ad(10,V,8,20,"div",87),g.hc(11,"div",26),g.hc(12,"table",27),g.hc(13,"thead",28),g.hc(14,"tr"),g.hc(15,"th",29),g.cd(16),g.wc(17,"translate"),g.gc(),g.hc(18,"th",29),g.cd(19),g.wc(20,"translate"),g.gc(),g.hc(21,"th",29),g.cd(22),g.wc(23,"translate"),g.gc(),g.hc(24,"th",29),g.cd(25),g.wc(26,"translate"),g.gc(),g.hc(27,"th",29),g.cd(28),g.wc(29,"translate"),g.gc(),g.hc(30,"th",29),g.cd(31),g.wc(32,"translate"),g.gc(),g.hc(33,"th",29),g.cd(34),g.wc(35,"translate"),g.gc(),g.hc(36,"th",29),g.cd(37),g.wc(38,"translate"),g.gc(),g.gc(),g.gc(),g.hc(39,"tbody"),g.ad(40,q,6,3,"ng-container",31),g.ad(41,X,2,1,"ng-container",31),g.gc(),g.gc(),g.gc(),g.ad(42,$,8,20,"div",87),g.gc(),g.gc()}if(2&e){var c=g.vc(2);g.Nb(2),g.Cc("placeholder",g.xc(3,15,"Search"))("ngModel",c._keywordRel),g.Nb(4),g.ed(" ",g.xc(7,17,"Add new")," "),g.Nb(4),g.Cc("ngIf",c._relationslist.length>0),g.Nb(6),g.ed(" ",g.xc(17,19,"Relevant code")," "),g.Nb(3),g.ed(" ",g.xc(20,21,"Company")," "),g.Nb(3),g.ed(" ",g.xc(23,23,"Sender")," "),g.Nb(3),g.ed(" ",g.xc(26,25,"Received company")," "),g.Nb(3),g.ed(" ",g.xc(29,27,"Receiver")," "),g.Nb(3),g.ed(" ",g.xc(32,29,"Bill company")," "),g.Nb(3),g.ed(" ",g.xc(35,31,"Bill receiver")," "),g.Nb(3),g.dd(g.xc(38,33,"Actions")),g.Nb(3),g.Cc("ngIf",0==c._relationslist.length),g.Nb(1),g.Cc("ngIf",c._relationslist.length>0),g.Nb(1),g.Cc("ngIf",c._relationslist.length>0)}}function H(e,t){1&e&&(g.fc(0),g.hc(1,"a",76),g.cc(2,"img",77),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing"),""))}function Z(e,t){if(1&e&&(g.hc(0,"button",113),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(2);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save")," ")}}function W(e,t){if(1&e){var n=g.ic();g.hc(0,"button",114),g.rc("click",function(){return g.Tc(n),g.vc(3)._clearContact()}),g.cd(1),g.wc(2,"translate"),g.gc()}2&e&&(g.Nb(1),g.ed(" ",g.xc(2,1,"Add new")," "))}function ee(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"td"),g.cd(2),g.gc(),g.hc(3,"td"),g.cd(4),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.hc(12,"button",115),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(3);return c.loadDetail1(e.id,c.entityContact.company_id)}),g.cc(13,"i",41),g.gc(),g.hc(14,"button",116),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(3).deleteItem0(e)}),g.cc(15,"i",44),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=g.vc(3);g.Nb(2),g.ed(" ",c.contact_code," "),g.Nb(2),g.ed(" ",c.contact_name," "),g.Nb(2),g.ed(" ",c.phone," "),g.Nb(2),g.dd(c.email),g.Nb(2),g.dd(c.note_l),g.Nb(2),g.Cc("disabled",!a._authenService.hasPermission("CUSTOMER","update")),g.Nb(2),g.Cc("disabled",!a._authenService.hasPermission("CUSTOMER","delete"))}}function te(e,t){if(1&e){var n=g.ic();g.fc(0),g.hc(1,"form",45,92),g.rc("ngSubmit",function(){return g.Tc(n),g.vc(2).saveChange0()}),g.hc(3,"div",52),g.hc(4,"div",53),g.hc(5,"div",54),g.hc(6,"label",93),g.cd(7),g.wc(8,"translate"),g.hc(9,"span",37),g.cd(10,"(*)"),g.gc(),g.gc(),g.hc(11,"input",94),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.contact_name=e}),g.wc(12,"translate"),g.gc(),g.gc(),g.gc(),g.hc(13,"div",53),g.hc(14,"div",54),g.hc(15,"label",95),g.cd(16),g.wc(17,"translate"),g.gc(),g.hc(18,"input",96),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.contact_code=e}),g.wc(19,"translate"),g.gc(),g.gc(),g.gc(),g.hc(20,"div",53),g.hc(21,"div",54),g.hc(22,"label",97),g.cd(23),g.wc(24,"translate"),g.hc(25,"span",37),g.cd(26,"(*)"),g.gc(),g.gc(),g.hc(27,"input",98),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.phone=e}),g.wc(28,"translate"),g.gc(),g.gc(),g.gc(),g.hc(29,"div",53),g.hc(30,"div",54),g.hc(31,"label",99),g.cd(32,"Email"),g.gc(),g.hc(33,"input",100),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.email=e}),g.gc(),g.gc(),g.gc(),g.hc(34,"div",53),g.hc(35,"div",54),g.hc(36,"label",101),g.cd(37),g.wc(38,"translate"),g.wc(39,"translate"),g.gc(),g.hc(40,"textarea",102),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.note_l=e}),g.wc(41,"translate"),g.gc(),g.gc(),g.gc(),g.hc(42,"div",53),g.hc(43,"div",54),g.hc(44,"label",103),g.cd(45),g.wc(46,"translate"),g.wc(47,"translate"),g.gc(),g.hc(48,"textarea",104),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityContact.note_e=e}),g.wc(49,"translate"),g.gc(),g.gc(),g.gc(),g.hc(50,"div",53),g.hc(51,"div",54),g.hc(52,"label",105),g.cd(53),g.wc(54,"translate"),g.gc(),g.hc(55,"div",106),g.hc(56,"input",107),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2)._status=e}),g.gc(),g.cc(57,"label",105),g.gc(),g.gc(),g.gc(),g.hc(58,"div",53),g.hc(59,"div",54),g.ad(60,H,5,3,"ng-container",31),g.ad(61,Z,3,4,"button",108),g.ad(62,W,3,3,"button",109),g.gc(),g.gc(),g.hc(63,"div",86),g.hc(64,"div",54),g.hc(65,"input",110),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2)._keyword1=e})("change",function(){g.Tc(n);var e=g.vc(2);return e.loadDataContact(e.entityContact.company_id)})("keyup.enter",function(){g.Tc(n);var e=g.vc(2);return e.loadDataContact(e.entityContact.company_id)}),g.wc(66,"translate"),g.gc(),g.gc(),g.gc(),g.hc(67,"div",86),g.hc(68,"div",88),g.hc(69,"pagination",111),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).pageIndex1=e})("pageChanged",function(e){return g.Tc(n),g.vc(2).pageChanged1(e)}),g.gc(),g.hc(70,"a",25),g.cd(71),g.wc(72,"translate"),g.wc(73,"translate"),g.wc(74,"translate"),g.wc(75,"translate"),g.gc(),g.gc(),g.hc(76,"div",112),g.hc(77,"table",27),g.hc(78,"thead",28),g.hc(79,"tr"),g.hc(80,"th",29),g.cd(81),g.wc(82,"translate"),g.gc(),g.hc(83,"th",29),g.cd(84),g.wc(85,"translate"),g.gc(),g.hc(86,"th",29),g.cd(87),g.wc(88,"translate"),g.gc(),g.hc(89,"th",29),g.cd(90,"Email"),g.gc(),g.hc(91,"th",29),g.cd(92),g.wc(93,"translate"),g.gc(),g.hc(94,"th",29),g.cd(95),g.wc(96,"translate"),g.gc(),g.gc(),g.gc(),g.hc(97,"tbody"),g.ad(98,ee,16,7,"tr",38),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ec()}if(2&e){var c=g.vc(2);g.Nb(7),g.ed("",g.xc(8,45,"Customer name")," "),g.Nb(4),g.Cc("placeholder",g.xc(12,47,"Customer name"))("ngModel",c.entityContact.contact_name),g.Nb(5),g.dd(g.xc(17,49,"Customer code")),g.Nb(2),g.Cc("placeholder",g.xc(19,51,"Customer code"))("ngModel",c.entityContact.contact_code)("disabled",!0),g.Nb(5),g.ed("",g.xc(24,53,"Phone")," "),g.Nb(4),g.Cc("placeholder",g.xc(28,55,"Phone"))("ngModel",c.entityContact.phone),g.Nb(6),g.Cc("placeholder","abc@company.com")("ngModel",c.entityContact.email),g.Nb(4),g.fd("",g.xc(38,57,"Note")," (",g.xc(39,59,"Vietnamese"),")"),g.Nb(3),g.Dc("placeholder",g.xc(41,61,"Note")),g.Cc("ngModel",c.entityContact.note_l),g.Nb(5),g.fd("",g.xc(46,63,"Note")," (",g.xc(47,65,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(49,67,"Note")),g.Cc("ngModel",c.entityContact.note_e),g.Nb(5),g.dd(g.xc(54,69,"Status")),g.Nb(3),g.Cc("ngModel",c._status),g.Nb(4),g.Cc("ngIf",c.isSave1),g.Nb(1),g.Cc("ngIf",!c.isSave1),g.Nb(1),g.Cc("ngIf","UPDATE"==c._flagModal1),g.Nb(3),g.Dc("placeholder",g.xc(66,71,"Search")),g.Cc("ngModel",c._keyword1),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",c.totalRow1)("ngModel",c.pageIndex1)("maxSize",c.pageDisplay)("itemsPerPage",c.pageSize1),g.Nb(2),g.gd("",g.xc(72,73,"Total of records"),": ",c.totalRow1," - ",g.xc(73,75,"Page")," ",c.pageIndex1," ",g.xc(74,77,"of")," ",c.totalPage1," ",g.xc(75,79,"page"),""),g.Nb(10),g.ed(" ",g.xc(82,81,"Customer code")," "),g.Nb(3),g.ed(" ",g.xc(85,83,"Customer name")," "),g.Nb(3),g.ed(" ",g.xc(88,85,"Phone")," "),g.Nb(5),g.ed(" ",g.xc(93,87,"Note")," "),g.Nb(3),g.ed(" ",g.xc(96,89,"Actions")," "),g.Nb(3),g.Cc("ngForOf",c._contacts)}}function ne(e,t){if(1&e){var n=g.ic();g.fc(0),g.hc(1,"form",null,117),g.hc(3,"div",52),g.hc(4,"div",86),g.hc(5,"div",54),g.hc(6,"label",118),g.cd(7),g.wc(8,"translate"),g.hc(9,"span",37),g.cd(10,"(*)"),g.gc(),g.gc(),g.hc(11,"textarea",119),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).entityLinkC.code_link=e}),g.wc(12,"translate"),g.gc(),g.gc(),g.gc(),g.hc(13,"div",53),g.hc(14,"div",54),g.hc(15,"label",120),g.cd(16),g.wc(17,"translate"),g.hc(18,"span",37),g.cd(19,"(*)"),g.gc(),g.cd(20),g.wc(21,"translate"),g.gc(),g.hc(22,"ng-select",121),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedCompany=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("cty",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(23,"translate"),g.wc(24,"translate"),g.gc(),g.gc(),g.gc(),g.hc(25,"div",53),g.hc(26,"div",54),g.hc(27,"label",120),g.cd(28),g.wc(29,"translate"),g.hc(30,"span",37),g.cd(31,"(*)"),g.gc(),g.cd(32),g.wc(33,"translate"),g.gc(),g.hc(34,"ng-select",122),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedSender=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("lh",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(35,"translate"),g.wc(36,"translate"),g.gc(),g.gc(),g.gc(),g.hc(37,"div",53),g.hc(38,"div",54),g.hc(39,"label"),g.cd(40),g.wc(41,"translate"),g.hc(42,"span",37),g.cd(43,"(*)"),g.gc(),g.cd(44),g.wc(45,"translate"),g.gc(),g.hc(46,"ng-select",123),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedCompanyKQ=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("kq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(47,"translate"),g.wc(48,"translate"),g.gc(),g.gc(),g.gc(),g.hc(49,"div",53),g.hc(50,"div",54),g.hc(51,"label"),g.cd(52),g.wc(53,"translate"),g.hc(54,"span",37),g.cd(55,"(*)"),g.gc(),g.cd(56),g.wc(57,"translate"),g.gc(),g.hc(58,"ng-select",124),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedSenderKQ=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("lhkq",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(59,"translate"),g.wc(60,"translate"),g.gc(),g.gc(),g.gc(),g.hc(61,"div",53),g.hc(62,"div",54),g.hc(63,"label"),g.cd(64),g.wc(65,"translate"),g.hc(66,"span",37),g.cd(67,"(*)"),g.gc(),g.cd(68),g.wc(69,"translate"),g.gc(),g.hc(70,"ng-select",125),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedCompanyBill=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("bill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(71,"translate"),g.wc(72,"translate"),g.gc(),g.gc(),g.gc(),g.hc(73,"div",53),g.hc(74,"div",54),g.hc(75,"label"),g.cd(76),g.wc(77,"translate"),g.hc(78,"span",37),g.cd(79,"(*)"),g.gc(),g.cd(80),g.wc(81,"translate"),g.gc(),g.hc(82,"ng-select",126),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc(2).selectedSenderBill=e})("change",function(){g.Tc(n);var e=g.vc(2);return e._changeCompanyInfo("lhbill",e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.wc(83,"translate"),g.wc(84,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ec()}if(2&e){var c=g.vc(2);g.Nb(7),g.ed("",g.xc(8,58,"Code")," "),g.Nb(4),g.Cc("placeholder",g.xc(12,60,"Code"))("ngModel",c.entityLinkC.code_link)("disabled",!0),g.Nb(5),g.ed("",g.xc(17,62,"Customer")," "),g.Nb(4),g.ed(" - ",g.xc(21,64,"Information"),""),g.Nb(2),g.Cc("items",c._getlistcompany)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCompany)("placeholder",g.xc(23,66,"Please choose"))("notFoundText",g.xc(24,68,"Not found item")),g.Nb(6),g.ed("",g.xc(29,70,"Contact")," "),g.Nb(4),g.ed(" - ",g.xc(33,72,"Sender"),""),g.Nb(2),g.Cc("items",c._getlistsender)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedSender)("placeholder",g.xc(35,74,"Please choose"))("notFoundText",g.xc(36,76,"Not found item")),g.Nb(6),g.ed("",g.xc(41,78,"Customer")," "),g.Nb(4),g.ed(" - ",g.xc(45,80,"Received company"),""),g.Nb(2),g.Cc("items",c._getlistcompanyKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCompanyKQ)("placeholder",g.xc(47,82,"Please choose"))("notFoundText",g.xc(48,84,"Not found item")),g.Nb(6),g.ed("",g.xc(53,86,"Contact")," "),g.Nb(4),g.ed(" - ",g.xc(57,88,"Received company"),""),g.Nb(2),g.Cc("items",c._getlistsenderKQ)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedSenderKQ)("placeholder",g.xc(59,90,"Please choose"))("notFoundText",g.xc(60,92,"Not found item")),g.Nb(6),g.ed("",g.xc(65,94,"Customer")," "),g.Nb(4),g.ed(" - ",g.xc(69,96,"Bill company"),""),g.Nb(2),g.Cc("items",c._getlistcompanyBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCompanyBill)("placeholder",g.xc(71,98,"Please choose"))("notFoundText",g.xc(72,100,"Not found item")),g.Nb(6),g.ed("",g.xc(77,102,"Contact")," "),g.Nb(4),g.ed(" - ",g.xc(81,104,"Bill company"),""),g.Nb(2),g.Cc("items",c._getlistsenderBill)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedSenderBill)("placeholder",g.xc(83,106,"Please choose"))("notFoundText",g.xc(84,108,"Not found item"))}}function ce(e,t){1&e&&(g.fc(0),g.hc(1,"a",76),g.cc(2,"img",77),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing"),""))}function ae(e,t){if(1&e){var n=g.ic();g.hc(0,"button",129),g.rc("click",function(){g.Tc(n);var e=g.vc(3);return e.saveChangeLink(e.selectedCompany,e.selectedSender,e.selectedCompanyKQ,e.selectedSenderKQ,e.selectedCompanyBill,e.selectedSenderBill)}),g.cd(1),g.wc(2,"translate"),g.gc()}2&e&&(g.Nb(1),g.ed(" ",g.xc(2,1,"Save & close")," "))}function ie(e,t){if(1&e){var n=g.ic();g.hc(0,"div",73),g.hc(1,"button",127),g.rc("click",function(){return g.Tc(n),g.vc(2).closeModal()}),g.cd(2),g.wc(3,"translate"),g.gc(),g.hc(4,"button",114),g.rc("click",function(){return g.Tc(n),g.vc(2)._switchLinkList()}),g.cd(5),g.wc(6,"translate"),g.gc(),g.ad(7,ce,5,3,"ng-container",31),g.ad(8,ae,3,3,"button",128),g.gc()}if(2&e){var c=g.vc(2);g.Nb(2),g.ed(" ",g.xc(3,4,"Close")," "),g.Nb(3),g.ed(" ",g.xc(6,6,"Relationship")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function re(e,t){if(1&e){var n=g.ic();g.hc(0,"div",47),g.ad(1,K,3,3,"h4",79),g.ad(2,Q,3,4,"h4",79),g.ad(3,Y,4,6,"h4",79),g.hc(4,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(5,"span",50),g.cd(6,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(7,"div",51),g.ad(8,J,43,35,"div",80),g.ad(9,te,99,91,"ng-container",31),g.ad(10,ne,85,110,"ng-container",31),g.gc(),g.ad(11,ie,9,8,"div",81)}if(2&e){var c=g.vc();g.Nb(1),g.Cc("ngIf","LIST"==c._flagModal1),g.Nb(1),g.Cc("ngIf","ADD"==c._flagModal1||"UPDATE"==c._flagModal1),g.Nb(1),g.Cc("ngIf","ADDREL"==c._flagModal1||"UPDATEREL"==c._flagModal1),g.Nb(5),g.Cc("ngIf","LIST"==c._flagModal1),g.Nb(1),g.Cc("ngIf","ADD"==c._flagModal1||"UPDATE"==c._flagModal1),g.Nb(1),g.Cc("ngIf","ADDREL"==c._flagModal1||"UPDATEREL"==c._flagModal1),g.Nb(1),g.Cc("ngIf","ADDREL"==c._flagModal1||"UPDATEREL"==c._flagModal1)}}var oe,le=((oe=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this.isSave1=!1,this._flagModal="",this._flagModal1="",this._diaName="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._customers=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.selectedRegion=null,this._regions=[],this.selectedEmp=null,this._getlistemp=[],this.entityContact={},this.pageIndex1=1,this.pageSize1=7,this.totalRow1=0,this._isLoading1=!1,this._keyword1="",this._contacts=[],this._status=!0,this._companyId="",this.entityLinkC={},this.selectedCompany=null,this._getlistcompany=[],this.selectedSender=null,this._getlistsender=[],this.selectedCompanyKQ=null,this._getlistcompanyKQ=[],this.selectedSenderKQ=null,this._getlistsenderKQ=[],this.selectedCompanyBill=null,this._getlistcompanyBill=[],this.selectedSenderBill=null,this._getlistsenderBill=[],this.pageIndexRel=1,this.pageSizeRel=10,this.totalRowRel=0,this._isLoadingRel=!1,this._keywordRel="",this._relationslist=[],this.singleSelect=[],this.isExportLoading=!1,!1!==e.checkAccess("CUSTOMER")&&!1!==e.hasPermission("CUSTOMER","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadRegions(),this.loadEmployees(),this.socket.on("refreshPage",function(t){e.loadData(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"ngAfterViewInit",value:function(){this.loadCustomerInfo()}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.short_code=this.user.short_code,this._dataService.post("/company/getall",t).subscribe(function(t){console.log(t),e._customers=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"loadRegions",value:function(){var t=this;this._dataService.post("/organization/getallregions",null).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.name_l,code:r.region_id})}}catch(o){i.e(o)}finally{i.f()}t._regions=a})}},{key:"loadEmployees",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/company/getemployeesnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.name+" (BD: "+r.employee_nr+")",code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._getlistemp=a})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/company/detail",n).subscribe(function(e){console.log(e.data),t.entity=e.data,t.selectedRegion=null!=e.data.region_id?t.entity.region_id:null,t.selectedEmp=null!=e.data.sales_id?t.entity.sales_id:null})}},{key:"_changeRegion",value:function(e){this.entity.region_id=e}},{key:"_changeEmployee",value:function(e){this.entity.sales_id=e}},{key:"_changeRegion1",value:function(e){this.entityContact.region_id=null==e?null:e.code}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.name_e:e.name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/customer/delete",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_openModal",value:function(e,t){null==t?(this.entity={},this.entity.id=null,this.selectedEmp=null,this.selectedRegion=null):this.loadDetail(t.id),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"saveChange",value:function(){var e=this;this.entity.short_code=null==this.entity.short_code?this.user.short_code:this.entity.short_code,this.entity.company_name_e=null==this.entity.company_name_e?null:this.entity.company_name_e.toUpperCase(),this.entity.company_name_l=this.entity.company_name_l.toUpperCase(),this.isSave=!0,null==this.entity.id?(console.log(this.entity),this._dataService.post("/company/add",this.entity).subscribe(function(t){e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),e.entity={},e.isSave=!1,e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):this._dataService.post("/company/update",this.entity).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),e._updateContact(e.entity),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})}},{key:"_updateContact",value:function(e){var t={};t.id=e.contact_id,t.name_e=e.contact_name_e,t.name_l=e.contact_name_l,t.note_e=e.note_e,t.note_l=e.note_l,t.address_e=e.address_e,t.address_l=e.address_l,t.email=e.email,t.phone=e.phone,t.region_id=e.region_id,this._dataService.post("/customer/updateContact",t).subscribe(function(e){})}},{key:"contactPopUp",value:function(e,t){this._flagModal1="ADD",this._companyId=t.id,this.loadDataContact(t.id),this._diaName="en"==this.user.lang?t.company_name_e:t.company_name_l,this.entityContact={},this.entityContact.company_id=t.id,this.entityContact.is_active=!0}},{key:"_clearContact",value:function(){this._flagModal1="ADD",this.entityContact={},this.entityContact.company_id=this._companyId,this.entityContact.is_active=!0}},{key:"loadDataContact",value:function(e){var t=this;this._isLoading1=!0;var n={};n.page=this.pageIndex1,n.limit=this.pageSize1,n.filter=this._keyword1,n.company_id=e,this._dataService.post("/company/getallcontacts",n).subscribe(function(e){console.log(e),t._contacts=e.data,t.totalRow1=e.rowCount,t.totalPage1=e.totalPages,t._isLoading1=!1})}},{key:"_pageSizeChange1",value:function(e){this.pageSize1=e.target.value,this.loadDataContact(this.entityContact.customer_id)}},{key:"pageChanged1",value:function(e){this.pageIndex1=e.page,this.loadDataContact(this.entityContact.company_id)}},{key:"loadDetail1",value:function(e){var t=this;this._flagModal1="UPDATE",this.isSave1=!1;var n={};n.id=e,this._dataService.post("/company/detailContact",n).subscribe(function(e){console.log(t._diaName),t.entityContact=e.data,t._status=!!t.entityContact.is_active})}},{key:"saveChange0",value:function(){var e=this;this.isSave1=!0,"ADD"==this._flagModal1?(this.entityContact.createdby=this.user.id,this.entityContact.contact_name=null==this.entityContact.contact_name?null:this.entityContact.contact_name.toUpperCase(),console.log(this.entityContact),this._dataService.post("/company/addContact",this.entityContact).subscribe(function(t){e.loadDataContact(e._companyId),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),e.entityContact.contact_code=null,e.entityContact.contact_name=null,e.entityContact.phone=null,e.entityContact.email=null,e.entityContact.note_l=null,e.entityContact.note_e=null,e._status=!0,e.isSave1=!1},function(){e.isSave1=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entityContact.updatedby=this.user.id,this.entityContact.contact_name=null==this.entityContact.contact_name?null:this.entityContact.contact_name.toUpperCase(),this._dataService.post("/company/updateContact",this.entityContact).subscribe(function(t){e.isSave1=!1,e.loadDataContact(e._companyId),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK")},function(){e.isSave1=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"deleteItem0",value:function(e){var t=this;this.isSave1=!1,k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:e.contact_name,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,c.is_active=!1,t._dataService.post("/company/updateContact",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.loadDataContact(t._companyId),t.isSave1=!1,t._flagModal1="ADD",t.entityContact={},t.entityContact.company_id=t._companyId,t.entityContact.is_active=!0,t._status=!0},function(){t.isSave1=!1,t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}else t.isSave1=!1})}},{key:"copyItem0",value:function(e){var t=this;this.isSave1=!1,k.a.fire({title:"en"==this.user.lang?I.a.are_u_sure_copy_en:I.a.are_u_sure_copy,text:"en"==this.user.lang?e.company_name_e:e.company_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){console.log(e);var c={};c.name_e=e.company_name_e,c.name_l=e.company_name_l,c.note_e=e.note_e,c.note_l=e.note_l,c.short_code=t.user.short_code,c.contact_name_e=e.name_e,c.contact_name_l=e.name_l,c.address_e=e.address_e,c.address_l=e.address_e,c.email=e.email,c.phone=e.phone,c.region_id=e.region_id,c.status_info=3,c.company_name_e=e.company_name_e,c.company_name_l=e.company_name_l,c.tax_code=e.tax_code,t._dataService.post("/customer/add",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),t.socket.emit("refresh",{}),t.isSave1=!1,t.modalService.dismissAll()},function(){t.isSave1=!1,t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"linkContactPopUp",value:function(e){this.loadCustomerInfo(),this._flagModal1="ADD",this._companyId=e.id,this._diaName="en"==this.user.lang?e.company_name_e:e.company_name_l,this.entityLinkC={};var t={};t.code=e.id,t.name=e.company_name_l,this.selectedCompany=t,this.loadSenderInfo(e.id),this.selectedSender=null,this.selectedCompanyKQ=null,this.selectedSenderKQ=null,this.selectedCompanyBill=null,this.selectedSenderBill=null}},{key:"linkContactPopUp1",value:function(e){this.loadCustomerInfo(),this._flagModal1="ADDREL",this._diaName="",this.entityLinkC={},this.selectedCompany=null,this.selectedSender=null,this.selectedCompanyKQ=null,this.selectedSenderKQ=null,this.selectedCompanyBill=null,this.selectedSenderBill=null}},{key:"editLinkPopUp",value:function(e){this.loadCustomerInfo(),this._flagModal1="UPDATEREL",this._diaName="en"==this.user.lang?e.company_name_e:e.company_name_l,this.loadDetailCompanyLink(e.id)}},{key:"_switchLinkList",value:function(){this._flagModal1="LIST",this.loadRelationship()}},{key:"deleteItemLinkContact",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:e.code_link,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/company/deleteCompanyLink",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.loadRelationship()},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"loadCustomerInfo",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/company/getallnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.company_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._getlistcompany=a,t._getlistcompanyKQ=a,t._getlistcompanyBill=a})}},{key:"loadSenderInfo",value:function(t){var n=this,c={};c.company_id=t,this._dataService.post("/company/getallcontactbyid",c).subscribe(function(t){console.log(t);var c,a=[],i=e(t.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.contact_name,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._getlistsender=a})}},{key:"loadCustomerKQ",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/company/getallnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.company_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._getlistcompanyKQ=a})}},{key:"loadSenderKQ",value:function(t){var n=this,c={};c.company_id=t,this._dataService.post("/company/getallcontactbyid",c).subscribe(function(t){console.log(t);var c,a=[],i=e(t.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.contact_name,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._getlistsenderKQ=a})}},{key:"loadCustomerBill",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/company/getallnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.company_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._getlistcompanyBill=a})}},{key:"loadSenderBill",value:function(t){var n=this,c={};c.company_id=t,this._dataService.post("/company/getallcontactbyid",c).subscribe(function(t){console.log(t);var c,a=[],i=e(t.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.contact_name,code:r.id})}}catch(o){i.e(o)}finally{i.f()}n._getlistsenderBill=a})}},{key:"_changeCompanyInfo",value:function(e,t,n,c,a,i,r){console.log(e,t,n,c,a,i,r);var o="",l="",s="",d="",h="",g="";if(null==t)this.entityLinkC.code_link=null,this.selectedSender=null,this.selectedCompanyKQ=null,this.selectedSenderKQ=null,this.selectedCompanyBill=null,this.selectedSenderBill=null,o="",l="",s="",h="",d="",g="";else{"cty"==e&&(this.selectedSender=null,n=null,this.selectedCompanyKQ=null,this.selectedSenderKQ=null,c=null,a=null,this.selectedCompanyBill=null,this.selectedSenderBill=null,i=null,r=null,this.loadSenderInfo(t),o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l="",s="",d="",h="",g=""),"lh"==e&&(this.selectedCompanyKQ=null,this.selectedSenderKQ=null,c=null,a=null,this.selectedCompanyBill=null,this.selectedSenderBill=null,i=null,r=null,o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s="",d="",h="",g=""),"kq"==e&&(this.selectedCompanyBill=null,this.selectedSenderBill=null,i=null,r=null,null==c?(this.selectedCompanyKQ=null,this.selectedSenderKQ=null,o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s="",d="",h="",g=""):(this.loadSenderKQ(c),o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s=null==c?"":this._getlistcompanyKQ.filter(function(e){return e.code==c})[0].name,d="",h="",g="")),"lhkq"==e&&(this.selectedCompanyBill=null,this.selectedSenderBill=null,i=null,r=null,o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s=null==c?"":this._getlistcompanyKQ.filter(function(e){return e.code==c})[0].name,d=null==a?"":this._getlistsenderKQ.filter(function(e){return e.code==a})[0].name,h="",g=""),"bill"==e&&(null==i?(this.selectedCompanyBill=null,this.selectedSenderBill=null,o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s=null==c?"":this._getlistcompanyKQ.filter(function(e){return e.code==c})[0].name,d=null==a?"":this._getlistsenderKQ.filter(function(e){return e.code==a})[0].name,h="",g=""):(this.loadSenderBill(i),l=n.name,s=c.name,o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,d=null==a?"":this._getlistsenderKQ.filter(function(e){return e.code==a})[0].name,h=i.name,g="")),"lhbill"==e&&(o=null==t?"":this._getlistcompany.filter(function(e){return e.code==t})[0].name,l=null==n?"":this._getlistsender.filter(function(e){return e.code==n})[0].name,s=null==c?"":this._getlistcompanyKQ.filter(function(e){return e.code==c})[0].name,h=null==i?"":this._getlistcompanyBill.filter(function(e){return e.code==i})[0].name,d=null==a?"":this._getlistsenderKQ.filter(function(e){return e.code==a})[0].name,g=null==r?"":this._getlistsenderBill.filter(function(e){return e.code==r})[0].name);var u="";""!=s&&(u="-K\u1ebeT QU\u1ea2("+s+")("+d+")");var f="";""!=h&&(f="-H\xd3A \u0110\u01a0N("+h+")("+g+")"),this.entityLinkC.code_link="G\u1eecI M\u1eaaU("+o+")("+l+")"+(""==u?"":u)+(""==f?"":f),console.log("Insert",this.entityLinkC)}}},{key:"saveChangeLink",value:function(e,t,n,c,a,i){var r=this;if(console.log(e,t,n,c,a,i),this.isSave=!0,this.entityLinkC.info_company_id=null==e?null:e,this.entityLinkC.sender_contact_id=null==t?null:t,this.entityLinkC.receive_company_id=null==n?null:n,this.entityLinkC.receive_contact_id=null==c?null:c,this.entityLinkC.bill_company_id=null==a?null:a,this.entityLinkC.bill_contact_id=null==i?null:i,this.entityLinkC.createdby=this.user.id,console.log("test",this.entityLinkC),"ADDREL"==this._flagModal1){if(null==this.entityLinkC.info_company_id||null==this.entityLinkC.code_link)return this._notifyService.showError("en"==this.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),void(this.isSave=!1);this._dataService.post("/company/addCompanyLink",this.entityLinkC).subscribe(function(e){console.log("Add",r.entityLinkC),r._notifyService.showSuccess("en"==r.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),r.entityLinkC={},r.isSave=!1,r._flagModal1="LIST",r.loadRelationship()},function(){return r.isSave=!1})}"UPDATEREL"==this._flagModal1&&this._dataService.post("/company/updateCompanyLink",this.entityLinkC).subscribe(function(e){r._notifyService.showSuccess("en"==r.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),r.entityLinkC={},r.isSave=!1,r._flagModal1="LIST",r.loadRelationship()},function(){return r.isSave=!1})}},{key:"_openRelationshipModal",value:function(e,t){null==t?(this._flagModal1="LIST",this.loadRelationship()):(console.log("call"),this._flagModal1="ADD",this._companyId=t.id,this.loadDataContact(t.id),this._diaName="en"==this.user.lang?null==t.company_name_e?t.company_name_l:t.company_name_e:t.company_name_l,this.entityContact={},this.entityContact.company_id=t.id,this.entityContact.is_active=!0),this.modalService.open(e,{size:"xl",centered:!0})}},{key:"loadRelationship",value:function(){var e=this;this._isLoadingRel=!0;var t={};t.page=this.pageIndexRel,t.limit=this.pageSizeRel,t.filter=this._keywordRel,t.short_code=this.user.short_code,this._dataService.post("/company/getalllinks",t).subscribe(function(t){console.log(t),e._relationslist=t.data,e.totalRowRel=t.rowCount,e.totalPageRel=t.totalPages,e._isLoadingRel=!1})}},{key:"loadDetailCompanyLink",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/company/detailCompanyLink",n).subscribe(function(e){console.log(e),t.entityLinkC=e.data,t.selectedCompany=t.entityLinkC.info_company_id,t.selectedSender=t.entityLinkC.sender_contact_id,t.selectedCompanyKQ=t.entityLinkC.receive_company_id,t.selectedSenderKQ=t.entityLinkC.receive_contact_id,t.selectedCompanyBill=t.entityLinkC.bill_company_id,t.selectedSenderBill=t.entityLinkC.bill_contact_id,t.loadSenderInfo(t.entityLinkC.info_company_id),t.loadSenderKQ(t.entityLinkC.receive_company_id),t.loadSenderBill(t.entityLinkC.bill_company_id)})}},{key:"pageChangedRel",value:function(e){this.pageIndexRel=e.page,this.loadRelationship()}},{key:"_exportAll",value:function(){var e=this;this.isExportLoading=!0;var t={};t.short_code=this.user.short_code,this._dataService.post("/company/exportCustomer",t).subscribe(function(t){t.data.length>0?(e._excelService.exportAsExcelFile(t.data,"CustomerList-"+T(new Date).format("YYYY-MM-DD")),e.isExportLoading=!1,e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_EXPORT_EN+" "+t.data.length+I.a.record_en:I.a.MSG_EXPORT+" "+t.data.length+I.a.record,"OK")):(e.isExportLoading=!1,e._notifyService.showWarning("en"==e.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"en"==e.user.lang?I.a.error_title_en:I.a.error_title))},function(){e.isExportLoading=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_EXPORTNO_EN:I.a.MSG_EXPORT_NO,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||oe)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},oe.\u0275cmp=g.Vb({type:oe,selectors:[["app-lab-customers"]],decls:90,vars:78,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-address-book-o"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],[2,"width","120px"],[4,"ngIf"],["content",""],["contentRelationship",""],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"disabled","click"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","company_name_l"],["type","text","id","company_name_l","name","company_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","company_name_e"],["type","text","id","company_name_e","name","company_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","address_l"],["type","text","id","address_l","name","address_l","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","address_e"],["type","text","id","address_e","name","address_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","tax_code"],["type","text","id","tax_code","name","tax_code","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","selectedEmp"],["name","selectedEmp","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["for","note_l"],["rows","2","id","note_l","name","note_l",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","note_e"],["rows","2","id","note_e","name","note_e",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","region_id"],["name","selectedRegion","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","modal-title",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"col-md-10"],["type","search","aria-label","Search","name","_keywordRel","autocomplete","off",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"col-md-2"],["type","button",1,"btn","btn-primary","bt-sm",3,"click"],[1,"col-md-12"],["class","form-inline my-2 my-lg-0",4,"ngIf"],[1,"form-inline","my-2","my-lg-0"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],["colspan","8",2,"text-align","center"],[2,"cursor","pointer",3,"click"],["form1","ngForm"],["for","contact_name"],["type","text","id","contact_name","name","contact_name","required","","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","ngModelChange"],["for","contact_code"],["type","text","id","contact_code","name","contact_code","autocomplete","off",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","phone"],["type","text","id","phone","name","phone","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Descriptiona"],["rows","2","id","Descriptiona","name","Descriptiona",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1a"],["rows","2","id","Description1a","name","Description1a",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","permission_write"],[1,"checkbox","checkbox-primary"],["id","permission_write","type","checkbox","name","permission_write",3,"ngModel","ngModelChange"],["type","submit","class","btn btn-primary mr-sm-1",3,"disabled",4,"ngIf"],["type","button","class","btn btn-warning mr-sm-1",3,"click",4,"ngIf"],["type","text","autocomplete","off","name","_keyword1",1,"form-control",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],["name","mypage","previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[2,"overflow-x","auto"],["type","submit",1,"btn","btn-primary","mr-sm-1",3,"disabled"],["type","button",1,"btn","btn-warning","mr-sm-1",3,"click"],[1,"btn","btn-sm","btn-primary","mr-sm-1",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["form2","ngForm"],["for","link_code"],["id","link_code","name","link_code","rows","2",1,"form-control","juppercase",3,"placeholder","ngModel","disabled","ngModelChange"],["for","info_company_id"],["name","selectedCompany","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSender","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderKQ","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedCompanyBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["name","selectedSenderBill","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["type","button",1,"btn","btn-secondary","mr-sm-1",3,"click"],["type","button","class","btn btn-primary mr-sm-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-sm-1",3,"click"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(87);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.hc(13,"button",9),g.rc("click",function(){g.Tc(n);var e=g.Qc(89);return t._openRelationshipModal(e,null)}),g.cc(14,"i",10),g.cd(15),g.wc(16,"translate"),g.gc(),g.ad(17,D,4,3,"button",11),g.gc(),g.gc(),g.hc(18,"div",12),g.hc(19,"div",13),g.hc(20,"select",14),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(21,"option",15),g.cd(22,"#10"),g.gc(),g.hc(23,"option",16),g.cd(24,"#25"),g.gc(),g.hc(25,"option",17),g.cd(26,"#50"),g.gc(),g.hc(27,"option",18),g.cd(28,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(29,"div",19),g.hc(30,"div",20),g.hc(31,"div",21),g.hc(32,"div",22),g.hc(33,"pagination",23),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(34,"div",24),g.hc(35,"a",25),g.cd(36),g.wc(37,"translate"),g.wc(38,"translate"),g.wc(39,"translate"),g.wc(40,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(41,"div",20),g.hc(42,"div",26),g.hc(43,"table",27),g.hc(44,"thead",28),g.hc(45,"tr"),g.hc(46,"th",29),g.cd(47,"#"),g.gc(),g.hc(48,"th",29),g.cd(49),g.wc(50,"translate"),g.gc(),g.hc(51,"th",29),g.cd(52),g.wc(53,"translate"),g.gc(),g.hc(54,"th",29),g.cd(55),g.wc(56,"translate"),g.gc(),g.hc(57,"th",29),g.cd(58),g.wc(59,"translate"),g.gc(),g.hc(60,"th",29),g.cd(61),g.wc(62,"translate"),g.gc(),g.hc(63,"th",29),g.cd(64),g.wc(65,"translate"),g.gc(),g.hc(66,"th",29),g.cd(67),g.wc(68,"translate"),g.gc(),g.hc(69,"th",30),g.cd(70),g.wc(71,"translate"),g.gc(),g.gc(),g.gc(),g.hc(72,"tbody"),g.ad(73,B,6,3,"ng-container",31),g.ad(74,U,2,1,"ng-container",31),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(75,"div",20),g.hc(76,"div",21),g.hc(77,"div",22),g.hc(78,"pagination",23),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(79,"div",24),g.hc(80,"a",25),g.cd(81),g.wc(82,"translate"),g.wc(83,"translate"),g.wc(84,"translate"),g.wc(85,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(86,z,93,105,"ng-template",null,32,g.bd),g.ad(88,re,12,7,"ng-template",null,33,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,40,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,42,"Add new")," "),g.Nb(4),g.ed(" ",g.xc(16,44,"Relationship")," "),g.Nb(2),g.Cc("ngIf",t._authenService.hasPermission("CUSTOMER","report")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(37,46,"Total of records"),": ",t.totalRow," - ",g.xc(38,48,"Page")," ",t.pageIndex," ",g.xc(39,50,"of")," ",t.totalPage," ",g.xc(40,52,"page"),""),g.Nb(13),g.ed(" ",g.xc(50,54,"Customer code")," "),g.Nb(3),g.ed(" ",g.xc(53,56,"Company")," "),g.Nb(3),g.ed(" ",g.xc(56,58,"Address")," "),g.Nb(3),g.dd(g.xc(59,60,"Tax code")),g.Nb(3),g.dd(g.xc(62,62,"Region")),g.Nb(3),g.dd(g.xc(65,64,"Note")),g.Nb(3),g.ed(" ",g.xc(68,66,"Business development")," "),g.Nb(3),g.dd(g.xc(71,68,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._customers.length),g.Nb(1),g.Cc("ngIf",t._customers.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(82,70,"Total of records"),": ",t.totalRow," - ",g.xc(83,72,"Page")," ",t.pageIndex," ",g.xc(84,74,"of")," ",t.totalPage," ",g.xc(85,76,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v,A.a,w.a],pipes:[L.c],styles:[""]}),oe);function se(e,t){if(1&e){var n=g.ic();g.hc(0,"button",31),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",32),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function de(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",33),g.hc(3,"h3",34),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function he(e,t){1&e&&g.cc(0,"i",43)}function ge(e,t){1&e&&g.cc(0,"i",44)}function ue(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",36),g.cd(2),g.gc(),g.hc(3,"th",36),g.hc(4,"input",37),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc(2).selectItem(e,c.id+","+c.short_code)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.ad(12,he,1,0,"i",38),g.ad(13,ge,1,0,"i",39),g.gc(),g.hc(14,"td"),g.hc(15,"button",40),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(78);return c._openModal(a,e)}),g.wc(16,"translate"),g.cc(17,"i",41),g.gc(),g.hc(18,"button",42),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(19,"translate"),g.cc(20,"i",32),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c.id+","+c.short_code)),g.Nb(2),g.ed(" ",c.id," "),g.Nb(2),g.dd(c.description_l),g.Nb(2),g.dd(c.description_e),g.Nb(2),g.Cc("ngIf",1==c.is_active),g.Nb(1),g.Cc("ngIf",0==c.is_active),g.Nb(2),g.Dc("ngbTooltip",g.xc(16,12,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("STANDARDS","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(19,14,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("STANDARDS","delete"))}}function fe(e,t){if(1&e&&(g.fc(0),g.ad(1,ue,21,16,"tr",35),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._categories)}}function pe(e,t){1&e&&(g.fc(0),g.hc(1,"a",67),g.cc(2,"img",68),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function me(e,t){if(1&e&&(g.hc(0,"button",69),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function _e(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,46),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",50),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",51),g.hc(11,"div",52),g.hc(12,"div",53),g.hc(13,"div",54),g.hc(14,"label",55),g.cd(15),g.wc(16,"translate"),g.hc(17,"span",34),g.cd(18,"(*)"),g.gc(),g.gc(),g.hc(19,"input",56),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.id=e}),g.wc(20,"translate"),g.gc(),g.gc(),g.gc(),g.hc(21,"div",53),g.hc(22,"div",54),g.hc(23,"label",57),g.cd(24),g.wc(25,"translate"),g.wc(26,"translate"),g.hc(27,"span",34),g.cd(28,"(*)"),g.gc(),g.gc(),g.hc(29,"input",58),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.description_l=e}),g.wc(30,"translate"),g.gc(),g.gc(),g.gc(),g.hc(31,"div",53),g.hc(32,"div",54),g.hc(33,"label",59),g.cd(34),g.wc(35,"translate"),g.wc(36,"translate"),g.gc(),g.hc(37,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.description_e=e}),g.wc(38,"translate"),g.gc(),g.gc(),g.gc(),g.hc(39,"div",53),g.hc(40,"div",54),g.hc(41,"label",61),g.cd(42),g.wc(43,"translate"),g.gc(),g.hc(44,"div",62),g.hc(45,"input",63),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.is_active=e}),g.gc(),g.hc(46,"label",61),g.cd(47),g.wc(48,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(49,"div",64),g.hc(50,"button",65),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(51),g.wc(52,"translate"),g.gc(),g.ad(53,pe,5,3,"ng-container",29),g.ad(54,me,3,4,"button",66),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ","ADD"==c._flagModal?g.xc(5,19,"Add new"):g.xc(6,21,"Update")," "),g.Nb(11),g.ed("",g.xc(16,23,"Code")," "),g.Nb(4),g.Dc("placeholder",g.xc(20,25,"Code")),g.Cc("ngModel",c.entity.id)("disabled","ADD"!=c._flagModal),g.Nb(5),g.fd("",g.xc(25,27,"Description")," (",g.xc(26,29,"Vietnamese"),") "),g.Nb(5),g.Dc("placeholder",g.xc(30,31,"Description")),g.Cc("ngModel",c.entity.description_l),g.Nb(5),g.fd("",g.xc(35,33,"Description")," (",g.xc(36,35,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(38,37,"Description")),g.Cc("ngModel",c.entity.description_e),g.Nb(5),g.dd(g.xc(43,39,"Status")),g.Nb(3),g.Cc("ngModel",c.entity.is_active),g.Nb(2),g.ed(" ",g.xc(48,41,c.entity.is_active?"activated":"not activated"),""),g.Nb(4),g.ed(" ",g.xc(52,43,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}var ve,be=((ve=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this._dataService=n,this._route=c,this._notifyService=i,this._uploadService=r,this._excelService=o,this.modalService=l,this._flagModal="ADD",this.isSave=!1,this._status=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.exportList=[],!1!==e.checkAccess("STANDARDS")&&!1!==e.hasPermission("STANDARDS","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallstandards",t).subscribe(function(t){e._categories=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailStandard",n).subscribe(function(e){t.entity=e.data})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id+","+e.short_code)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:e.id,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,c.short_code=t.user.short_code,t._dataService.post("/sample_matrix/deleteStandard",c).subscribe(function(e){console.log(e),"ok"==e.result?t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"):t._notifyService.showError("en"==t.user.lang?I.a.MSG_DELETENO_EN:I.a.MSG_DELETENO,"en"==t.user.lang?I.a.error_title_en:I.a.error_title),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;console.log(t),k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n._remove(o.split(",")),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e){var t=this,n={};n.id=e[0],n.short_code=e[1],this._dataService.post("/sample_matrix/deleteStandard",n).subscribe(function(e){t.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0,"ADD"==this._flagModal?(this.entity.short_code=this.user.short_code,console.log("add"),this._dataService.post("/sample_matrix/addStandard",this.entity).subscribe(function(t){e.socket.emit("refresh",{}),"ok"==t.result?e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"):e._notifyService.showWarning("en"==e.user.lang?I.a.MSG_ADDNO_EN:I.a.MSG_ADDNO,"en"==e.user.lang?I.a.error_title_en:I.a.error_title),e.entity={},e.isSave=!1,e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):(console.log("update"),this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updateStandard",this.entity).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.entity.is_active=!1):(this._flagModal="UPDATE",this.entity=t),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||ve)(g.bc(h.a),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a),g.bc(P.s))},ve.\u0275cmp=g.Vb({type:ve,selectors:[["app-lab-standards"]],decls:79,vars:74,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngIf"],["content",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],["colspan","7",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","ID"],["type","text","id","ID","name","ID","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","disabled","ngModelChange"],["for","Description"],["type","text","id","Description","name","Description","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Description1"],["type","text","id","Description1","name","Description1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Status"],[1,"checkbox","checkbox-primary"],["id","Status","type","checkbox","name","Status",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(78);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,se,4,3,"button",9),g.gc(),g.gc(),g.hc(14,"div",10),g.hc(15,"div",11),g.hc(16,"select",12),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(17,"option",13),g.cd(18,"#10"),g.gc(),g.hc(19,"option",14),g.cd(20,"#25"),g.gc(),g.hc(21,"option",15),g.cd(22,"#50"),g.gc(),g.hc(23,"option",16),g.cd(24,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(25,"div",17),g.hc(26,"div",18),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"pagination",21),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(30,"div",22),g.hc(31,"a",23),g.cd(32),g.wc(33,"translate"),g.wc(34,"translate"),g.wc(35,"translate"),g.wc(36,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(37,"div",18),g.hc(38,"div",24),g.hc(39,"table",25),g.hc(40,"thead",26),g.hc(41,"tr"),g.hc(42,"th",27),g.cd(43,"#"),g.gc(),g.hc(44,"th",27),g.hc(45,"input",28),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(46,"th",27),g.cd(47),g.wc(48,"translate"),g.gc(),g.hc(49,"th",27),g.cd(50),g.wc(51,"translate"),g.wc(52,"translate"),g.gc(),g.hc(53,"th",27),g.cd(54),g.wc(55,"translate"),g.wc(56,"translate"),g.gc(),g.hc(57,"th",27),g.cd(58),g.wc(59,"translate"),g.gc(),g.hc(60,"th",27),g.cd(61),g.wc(62,"translate"),g.gc(),g.gc(),g.gc(),g.hc(63,"tbody"),g.ad(64,de,6,3,"ng-container",29),g.ad(65,fe,2,1,"ng-container",29),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(66,"div",18),g.hc(67,"div",19),g.hc(68,"div",20),g.hc(69,"pagination",21),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(70,"div",22),g.hc(71,"a",23),g.cd(72),g.wc(73,"translate"),g.wc(74,"translate"),g.wc(75,"translate"),g.wc(76,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(77,_e,55,45,"ng-template",null,30,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,40,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,42,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(33,44,"Total of records"),": ",t.totalRow," - ",g.xc(34,46,"Page")," ",t.pageIndex," ",g.xc(35,48,"of")," ",t.totalPage," ",g.xc(36,50,"page"),""),g.Nb(13),g.Cc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),g.Nb(2),g.ed(" ",g.xc(48,52,"Standard code")," "),g.Nb(3),g.fd(" ",g.xc(51,54,"Standard")," (",g.xc(52,56,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(55,58,"Standard")," (",g.xc(56,60,"English"),") "),g.Nb(4),g.ed(" ",g.xc(59,62,"Status")," "),g.Nb(3),g.dd(g.xc(62,64,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._categories.length),g.Nb(1),g.Cc("ngIf",t._categories.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(73,66,"Total of records"),": ",t.totalRow," - ",g.xc(74,68,"Page")," ",t.pageIndex," ",g.xc(75,70,"of")," ",t.totalPage," ",g.xc(76,72,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v,w.a],pipes:[L.c],styles:[""]}),ve),ye=i("EUZL");function xe(e,t){if(1&e){var n=g.ic();g.hc(0,"button",33),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",34),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function we(e,t){if(1&e){var n=g.ic();g.hc(0,"button",35),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(83);return e._uploadPopup(t)}),g.cc(1,"i",36),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function Se(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",37),g.hc(3,"h3",38),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function Ce(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",40),g.cd(2),g.gc(),g.hc(3,"th",40),g.hc(4,"input",41),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc(2).selectItem(e,c.id)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.hc(14,"button",42),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(81);return c._openModal(a,e)}),g.wc(15,"translate"),g.cc(16,"i",43),g.gc(),g.hc(17,"button",44),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(18,"translate"),g.cc(19,"i",34),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c.id)),g.Nb(2),g.ed(" ",c.category_name_l," "),g.Nb(2),g.dd(c.category_name_e),g.Nb(2),g.dd(c.note_l),g.Nb(2),g.ed(" ",c.note_e," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(15,11,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("CAT_MATRIX","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(18,13,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("CAT_MATRIX","delete"))}}function Me(e,t){if(1&e&&(g.fc(0),g.ad(1,Ce,20,15,"tr",39),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._categories)}}function Ne(e,t){1&e&&(g.fc(0),g.hc(1,"a",66),g.cc(2,"img",67),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function Ee(e,t){if(1&e&&(g.hc(0,"button",68),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function ke(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,46),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",50),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",51),g.hc(11,"div",52),g.hc(12,"div",53),g.hc(13,"div",54),g.hc(14,"label",55),g.cd(15),g.wc(16,"translate"),g.wc(17,"translate"),g.hc(18,"span",38),g.cd(19,"(*)"),g.gc(),g.gc(),g.hc(20,"input",56),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.category_name_l=e}),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.hc(22,"div",53),g.hc(23,"div",54),g.hc(24,"label",57),g.cd(25),g.wc(26,"translate"),g.wc(27,"translate"),g.gc(),g.hc(28,"input",58),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.category_name_e=e}),g.wc(29,"translate"),g.gc(),g.gc(),g.gc(),g.hc(30,"div",53),g.hc(31,"div",54),g.hc(32,"label",59),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.gc(),g.hc(36,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_l=e}),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.hc(38,"div",53),g.hc(39,"div",54),g.hc(40,"label",61),g.cd(41),g.wc(42,"translate"),g.wc(43,"translate"),g.gc(),g.hc(44,"input",62),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_e=e}),g.wc(45,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(46,"div",63),g.hc(47,"button",64),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(48),g.wc(49,"translate"),g.gc(),g.ad(50,Ne,5,3,"ng-container",30),g.ad(51,Ee,3,4,"button",65),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",null==c.entity.id?g.xc(5,20,"Add new"):g.xc(6,22,"Update")," "),g.Nb(11),g.fd("",g.xc(16,24,"Category name")," (",g.xc(17,26,"Vietnamese"),") "),g.Nb(5),g.Dc("placeholder",g.xc(21,28,"Category name")),g.Cc("ngModel",c.entity.category_name_l),g.Nb(5),g.fd("",g.xc(26,30,"Category name")," (",g.xc(27,32,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(29,34,"Category name")),g.Cc("ngModel",c.entity.category_name_e),g.Nb(5),g.fd("",g.xc(34,36,"Note")," (",g.xc(35,38,"Vietnamese"),") "),g.Nb(3),g.Dc("placeholder",g.xc(37,40,"Note")),g.Cc("ngModel",c.entity.note_l),g.Nb(5),g.fd("",g.xc(42,42,"Note")," (",g.xc(43,44,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(45,46,"Note")),g.Cc("ngModel",c.entity.note_e),g.Nb(4),g.ed(" ",g.xc(49,48,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function Te(e,t){1&e&&g.cc(0,"img",78)}function Ie(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,69),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.gc(),g.hc(6,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(7,"span",50),g.cd(8,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(9,"div",51),g.hc(10,"div",52),g.hc(11,"div",70),g.hc(12,"div",71),g.hc(13,"input",72,73),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(15,"hr",74),g.hc(16,"button",75),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(17,Te,1,0,"img",76),g.cd(18),g.wc(19,"translate"),g.gc(),g.hc(20,"button",77),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(21),g.wc(22,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",g.xc(5,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(19,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(22,8,"Close")," ")}}var Pe,Re=((Pe=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.exportList=[],!1!==e.checkAccess("CAT_MATRIX")&&!1!==e.hasPermission("CAT_MATRIX","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategories",t).subscribe(function(t){e._categories=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailCat",n).subscribe(function(e){t.entity=e.data})}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.category_name_e:e.category_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/sample_matrix/deleteCat",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n._remove(o),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/deleteCat",n).subscribe(function(e){t.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0,null==this.entity.id?(this.entity.short_code=this.user.short_code,this._dataService.post("/sample_matrix/addCat",this.entity).subscribe(function(t){e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),e.entity={},e.isSave=!1,e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updateCat",this.entity).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){null==t?(this.entity={},this.entity.id=null):this.entity=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.format_incorrect_en:I.a.format_incorrect,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/sample_matrix.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.catlist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addCatList",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorSampleMatrix-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK")),t._isLoadingImport=!1,t.socket.emit("refresh",{})},function(){return t._isLoadingImport=!1})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||Pe)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},Pe.\u0275cmp=g.Vb({type:Pe,selectors:[["app-matrix-category"]],decls:84,vars:81,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngIf"],["content",""],["contentImport",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["colspan","7",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","Name"],["type","text","id","Name","name","Name","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Name1"],["type","text","id","Name1","name","Name1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note"],["type","text","id","Note","name","Note","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note1"],["type","text","id","Note1","name","Note1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],["form1","ngForm"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(81);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,xe,4,3,"button",9),g.ad(14,we,4,3,"button",10),g.gc(),g.gc(),g.hc(15,"div",11),g.hc(16,"div",12),g.hc(17,"select",13),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(18,"option",14),g.cd(19,"#10"),g.gc(),g.hc(20,"option",15),g.cd(21,"#25"),g.gc(),g.hc(22,"option",16),g.cd(23,"#50"),g.gc(),g.hc(24,"option",17),g.cd(25,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(26,"div",18),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"div",21),g.hc(30,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(31,"div",23),g.hc(32,"a",24),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.wc(36,"translate"),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(38,"div",19),g.hc(39,"div",25),g.hc(40,"table",26),g.hc(41,"thead",27),g.hc(42,"tr"),g.hc(43,"th",28),g.cd(44,"#"),g.gc(),g.hc(45,"th",28),g.hc(46,"input",29),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(47,"th",28),g.cd(48),g.wc(49,"translate"),g.wc(50,"translate"),g.gc(),g.hc(51,"th",28),g.cd(52),g.wc(53,"translate"),g.wc(54,"translate"),g.gc(),g.hc(55,"th",28),g.cd(56),g.wc(57,"translate"),g.wc(58,"translate"),g.gc(),g.hc(59,"th",28),g.cd(60),g.wc(61,"translate"),g.wc(62,"translate"),g.gc(),g.hc(63,"th",28),g.cd(64),g.wc(65,"translate"),g.gc(),g.gc(),g.gc(),g.hc(66,"tbody"),g.ad(67,Se,6,3,"ng-container",30),g.ad(68,Me,2,1,"ng-container",30),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(69,"div",19),g.hc(70,"div",20),g.hc(71,"div",21),g.hc(72,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(73,"div",23),g.hc(74,"a",24),g.cd(75),g.wc(76,"translate"),g.wc(77,"translate"),g.wc(78,"translate"),g.wc(79,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(80,ke,52,50,"ng-template",null,31,g.bd),g.ad(82,Ie,23,10,"ng-template",null,32,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,43,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,45,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("CAT_MATRIX","update")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(34,47,"Total of records"),": ",t.totalRow," - ",g.xc(35,49,"Page")," ",t.pageIndex," ",g.xc(36,51,"of")," ",t.totalPage," ",g.xc(37,53,"page"),""),g.Nb(13),g.Cc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),g.Nb(2),g.fd(" ",g.xc(49,55,"Category")," (",g.xc(50,57,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(53,59,"Category")," (",g.xc(54,61,"English"),") "),g.Nb(4),g.fd(" ",g.xc(57,63,"Note")," (",g.xc(58,65,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(61,67,"Note")," (",g.xc(62,69,"English"),") "),g.Nb(4),g.dd(g.xc(65,71,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._categories.length),g.Nb(1),g.Cc("ngIf",t._categories.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(76,73,"Total of records"),": ",t.totalRow," - ",g.xc(77,75,"Page")," ",t.pageIndex," ",g.xc(78,77,"of")," ",t.totalPage," ",g.xc(79,79,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v],pipes:[L.c],styles:[""]}),Pe);function Ae(e,t){if(1&e){var n=g.ic();g.hc(0,"button",35),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",36),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function Le(e,t){if(1&e){var n=g.ic();g.hc(0,"button",37),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(83);return e._uploadPopup(t)}),g.cc(1,"i",38),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function De(e,t){if(1&e){var n=g.ic();g.hc(0,"button",39),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(85);return 0==e.exportList.length?e._exportAll(t):e._exportAll1(e.exportList)}),g.cc(1,"i",40),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Export")," "))}function Be(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",41),g.hc(3,"h3",42),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function Oe(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",44),g.cd(2),g.gc(),g.hc(3,"th",44),g.hc(4,"input",45),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc(2).selectItem(e,c)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.cd(14),g.gc(),g.hc(15,"td"),g.hc(16,"button",46),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(81);return c._openModal(a,e)}),g.wc(17,"translate"),g.cc(18,"i",47),g.gc(),g.hc(19,"button",48),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(20,"translate"),g.cc(21,"i",36),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c)),g.Nb(2),g.ed(" ",c.code," "),g.Nb(2),g.dd(c.code_father),g.Nb(2),g.dd(c.para_name_l),g.Nb(2),g.ed(" ",c.specification_name_l," "),g.Nb(2),g.ed(" ",c.specification_ex_name_l," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(17,12,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("PARA_ASSM","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(20,14,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("PARA_ASSM","delete"))}}function Ue(e,t){if(1&e&&(g.fc(0),g.ad(1,Oe,22,16,"tr",43),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._categories)}}function Fe(e,t){1&e&&(g.fc(0),g.hc(1,"a",84),g.cc(2,"img",85),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function Ge(e,t){if(1&e&&(g.hc(0,"button",86),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function ze(e,t){if(1&e){var n=g.ic();g.hc(0,"form",49,50),g.rc("ngSubmit",function(){g.Tc(n);var e=g.vc();return e.saveChange(e.selectedCatCSP,e.selectedCatPL,e.selectedCatTestFather)}),g.hc(2,"div",51),g.hc(3,"h4",52),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",53),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",54),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",55),g.hc(11,"div",56),g.hc(12,"div",57),g.hc(13,"div",58),g.hc(14,"label",59),g.cd(15),g.wc(16,"translate"),g.hc(17,"span",42),g.cd(18,"(*)"),g.gc(),g.gc(),g.hc(19,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.code=e}),g.wc(20,"translate"),g.gc(),g.gc(),g.gc(),g.hc(21,"div",57),g.hc(22,"div",58),g.hc(23,"label",61),g.cd(24),g.wc(25,"translate"),g.gc(),g.hc(26,"ng-select",62),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatTestFather=e}),g.wc(27,"translate"),g.wc(28,"translate"),g.gc(),g.gc(),g.gc(),g.hc(29,"div",57),g.hc(30,"div",58),g.hc(31,"label",63),g.cd(32),g.wc(33,"translate"),g.wc(34,"translate"),g.hc(35,"span",42),g.cd(36,"(*)"),g.gc(),g.gc(),g.hc(37,"input",64),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_name_l=e}),g.wc(38,"translate"),g.gc(),g.gc(),g.gc(),g.hc(39,"div",57),g.hc(40,"div",58),g.hc(41,"label",65),g.cd(42),g.wc(43,"translate"),g.wc(44,"translate"),g.gc(),g.hc(45,"input",66),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_name_e=e}),g.wc(46,"translate"),g.gc(),g.gc(),g.gc(),g.hc(47,"div",57),g.hc(48,"div",58),g.hc(49,"label",67),g.cd(50),g.wc(51,"translate"),g.wc(52,"translate"),g.hc(53,"span",42),g.cd(54,"(*)"),g.gc(),g.gc(),g.hc(55,"input",68),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_ex_name_l=e}),g.wc(56,"translate"),g.gc(),g.gc(),g.gc(),g.hc(57,"div",57),g.hc(58,"div",58),g.hc(59,"label",69),g.cd(60),g.wc(61,"translate"),g.wc(62,"translate"),g.gc(),g.hc(63,"input",70),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_ex_name_e=e}),g.wc(64,"translate"),g.gc(),g.gc(),g.gc(),g.hc(65,"div",57),g.hc(66,"div",58),g.hc(67,"label",71),g.cd(68),g.wc(69,"translate"),g.wc(70,"translate"),g.hc(71,"span",42),g.cd(72,"(*)"),g.gc(),g.gc(),g.hc(73,"input",72),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.para_name_l=e}),g.wc(74,"translate"),g.gc(),g.gc(),g.gc(),g.hc(75,"div",57),g.hc(76,"div",58),g.hc(77,"label",73),g.cd(78),g.wc(79,"translate"),g.wc(80,"translate"),g.gc(),g.hc(81,"input",74),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.para_name_e=e}),g.wc(82,"translate"),g.gc(),g.gc(),g.gc(),g.hc(83,"div",57),g.hc(84,"div",58),g.hc(85,"label",75),g.cd(86),g.wc(87,"translate"),g.wc(88,"translate"),g.gc(),g.hc(89,"input",76),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.method=e}),g.wc(90,"translate"),g.gc(),g.gc(),g.gc(),g.hc(91,"div",57),g.hc(92,"div",58),g.hc(93,"label",77),g.cd(94),g.wc(95,"translate"),g.wc(96,"translate"),g.gc(),g.hc(97,"input",78),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.method_en=e}),g.wc(98,"translate"),g.gc(),g.gc(),g.gc(),g.hc(99,"div",57),g.hc(100,"div",58),g.hc(101,"label",77),g.cd(102),g.wc(103,"translate"),g.hc(104,"span",42),g.cd(105,"(*)"),g.gc(),g.gc(),g.hc(106,"ng-select",79),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatCSP=e}),g.wc(107,"translate"),g.wc(108,"translate"),g.gc(),g.gc(),g.gc(),g.hc(109,"div",57),g.hc(110,"div",58),g.hc(111,"label",77),g.cd(112),g.wc(113,"translate"),g.hc(114,"span",42),g.cd(115,"(*)"),g.gc(),g.gc(),g.hc(116,"ng-select",80),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatPL=e}),g.wc(117,"translate"),g.wc(118,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(119,"div",81),g.hc(120,"button",82),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(121),g.wc(122,"translate"),g.gc(),g.ad(123,Fe,5,3,"ng-container",31),g.ad(124,Ge,3,4,"button",83),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",null==c.entity.id?g.xc(5,63,"Add new"):g.xc(6,65,"Update")," "),g.Nb(11),g.ed("",g.xc(16,67,"Test code")," "),g.Nb(4),g.Cc("placeholder",g.xc(20,69,"Test code"))("ngModel",c.entity.code),g.Nb(5),g.ed("",g.xc(25,71,"Test father code")," "),g.Nb(2),g.Cc("items",c._cattestfather)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatTestFather)("placeholder",g.xc(27,73,"Please choose"))("notFoundText",g.xc(28,75,"Not found item")),g.Nb(6),g.fd("",g.xc(33,77,"Internal testing")," (",g.xc(34,79,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(38,81,"Internal testing"))("ngModel",c.entity.specification_name_l),g.Nb(5),g.fd("",g.xc(43,83,"Internal testing")," (",g.xc(44,85,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(46,87,"Internal testing"))("ngModel",c.entity.specification_name_e),g.Nb(5),g.fd("",g.xc(51,89,"External testing")," (",g.xc(52,91,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(56,93,"External testing"))("ngModel",c.entity.specification_ex_name_l),g.Nb(5),g.fd("",g.xc(61,95,"External testing")," (",g.xc(62,97,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(64,99,"External testing"))("ngModel",c.entity.specification_ex_name_e),g.Nb(5),g.fd("",g.xc(69,101,"Parameter name")," (",g.xc(70,103,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(74,105,"Parameter name"))("ngModel",c.entity.para_name_l),g.Nb(5),g.fd("",g.xc(79,107,"Parameter name")," (",g.xc(80,109,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(82,111,"Parameter name"))("ngModel",c.entity.para_name_e),g.Nb(5),g.fd("",g.xc(87,113,"Method")," (",g.xc(88,115,"Vietnamese"),")"),g.Nb(3),g.Cc("placeholder",g.xc(90,117,"Method"))("ngModel",c.entity.method),g.Nb(5),g.fd("",g.xc(95,119,"Method")," (",g.xc(96,121,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(98,123,"Method"))("ngModel",c.entity.method_en),g.Nb(5),g.ed("",g.xc(103,125,"Category")," (CSP) "),g.Nb(4),g.Cc("items",c._catcsp)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatCSP)("placeholder",g.xc(107,127,"Please choose"))("notFoundText",g.xc(108,129,"Not found item")),g.Nb(6),g.ed("",g.xc(113,131,"Category")," (PL) "),g.Nb(4),g.Cc("items",c._catpl)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatPL)("placeholder",g.xc(117,133,"Please choose"))("notFoundText",g.xc(118,135,"Not found item")),g.Nb(5),g.ed(" ",g.xc(122,137,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function Ke(e,t){1&e&&g.cc(0,"img",96)}function Qe(e,t){if(1&e){var n=g.ic();g.hc(0,"form",87),g.hc(1,"div",51),g.hc(2,"h4",52),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",53),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",54),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",55),g.hc(9,"div",56),g.hc(10,"div",88),g.hc(11,"div",89),g.hc(12,"input",90,91),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(14,"hr",92),g.hc(15,"button",93),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(16,Ke,1,0,"img",94),g.cd(17),g.wc(18,"translate"),g.gc(),g.hc(19,"button",95),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(20),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(18,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(21,8,"Close")," ")}}function Ye(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Processing")))}function Ve(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Export")))}function qe(e,t){if(1&e){var n=g.ic();g.hc(0,"form",87),g.hc(1,"div",51),g.hc(2,"h4",52),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",53),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",54),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",55),g.hc(9,"div",56),g.hc(10,"div",88),g.hc(11,"ng-select",97),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatMatrix=e}),g.wc(12,"translate"),g.wc(13,"translate"),g.gc(),g.gc(),g.hc(14,"div",98),g.cc(15,"br"),g.hc(16,"button",99),g.rc("click",function(){return g.Tc(n),g.vc()._processExport()}),g.ad(17,Ye,3,3,"ng-container",31),g.ad(18,Ve,3,3,"ng-container",31),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,10,"Export")," "),g.Nb(8),g.Cc("items",c._categories1)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatMatrix)("placeholder",g.xc(12,12,"Please choose"))("notFoundText",g.xc(13,14,"Not found item")),g.Nb(6),g.Cc("ngIf",c.isExportLoading),g.Nb(1),g.Cc("ngIf",!c.isExportLoading)}}var je,Xe=((je=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.selectedCatCSP=null,this.selectedCatPL=null,this._catcsp=[],this._catpl=[],this.selectedCatTestFather=null,this._cattestfather=[],this.isExportLoading=!1,this.selectedCatMatrix=[],this._categories1=[],this.exportList=[],!1!==e.checkAccess("PARA_ASSM")&&!1!==e.hasPermission("PARA_ASSM","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadCatCSP(),this.loadCatPL(),this.loadCatTestFather(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCatCSP(),e.loadCatPL(),e.loadCatTestFather(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparameters",t).subscribe(function(t){e._categories=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailPara",n).subscribe(function(e){t.entity=e.data,t.selectedCatCSP=null!=e.data.csp_id?t.entity.csp_id:null,t.selectedCatPL=e.data.pl_id?t.entity.pl_id:null,t.selectedCatTestFather=e.data.code_father?t.entity.code_father:null})}},{key:"loadCatCSP",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.csp_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._catcsp=a})}},{key:"loadCatPL",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.pl_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._catpl=a})}},{key:"loadCatTestFather",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcatbytestfather",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({code:r.code})}}catch(o){i.e(o)}finally{i.f()}t._cattestfather=a})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e)})):this.exportList=[],console.log(this.exportList)}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t}),console.log(this.exportList)}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.specification_name_e:e.specification_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/sample_matrix/deletePara",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n._remove(o),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e){var t=this,n={};n.id=e.id,this._dataService.post("/sample_matrix/deletePara",n).subscribe(function(e){t.socket.emit("refresh",{})})}},{key:"saveChange",value:function(e,t,n){var c=this;this.isSave=!0,this.entity.csp_id=e,this.entity.pl_id=t,this.entity.code_father=n,null==this.entity.id?(this.entity.short_code=this.user.short_code,this._dataService.post("/sample_matrix/addPara",this.entity).subscribe(function(e){console.log(e),c.socket.emit("refresh",{}),c.isSave=!1,"failed"==e.result?c._notifyService.showWarning("en"==c.user.lang?I.a.MSG_ADDNO_EN:I.a.MSG_ADDNO,"en"==c.user.lang?I.a.error_title_en:I.a.error_title):(c._notifyService.showSuccess("en"==c.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),c.entity={},c.modalService.dismissAll())},function(){c.isSave=!1,c._notifyService.showError("en"==c.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==c.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updatePara",this.entity).subscribe(function(e){c.isSave=!1,c.socket.emit("refresh",{}),"failed"==e.result?c._notifyService.showWarning("en"==c.user.lang?I.a.MSG_UPDATENO_EN:I.a.MSG_UPDATENO,"en"==c.user.lang?I.a.error_title_en:I.a.error_title):(c._notifyService.showSuccess("en"==c.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),c.modalService.dismissAll())},function(){c.isSave=!1,c._notifyService.showError("en"==c.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==c.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){null==t?(this.entity={},this.entity.id=null,this.selectedCatCSP=null,this.selectedCatPL=null,this.selectedCatTestFather=null):(this.entity=t,this.selectedCatCSP=t.csp_id,this.selectedCatPL=t.pl_id,this.selectedCatTestFather=t.code_father),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.format_incorrect_en:I.a.format_incorrect,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/sample_parameter_assignment.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.paralist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addParaList",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorParaAssignment-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?e.count+" "+I.a.MSG_UPDATE_RECORD_EN:e.count+" "+I.a.MSG_UPDATE_RECORD,"OK")),t._isLoadingImport=!1,t.socket.emit("refresh",{})},function(){return t._isLoadingImport=!1})}},{key:"_exportAll",value:function(e){this.isExportLoading=!1,this.loadSampleCategory(),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_exportAll1",value:function(e){e.length>0?(this._excelService.exportAsExcelFile(e,"Parameters-"+T(new Date).format("YYYY-MM-DD")),this.isExportLoading=!1,this._notifyService.showSuccess("en"==this.user.lang?I.a.MSG_EXPORT_EN+" "+e.length+I.a.record_en:I.a.MSG_EXPORT+" "+e.length+I.a.record,"OK"),this.exportList=[]):(this.isExportLoading=!1,this._notifyService.showWarning("en"==this.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"en"==this.user.lang?I.a.error_title_en:I.a.error_title))}},{key:"loadSampleCategory",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categories1=a})}},{key:"_processExport",value:function(){var e=this;this.isExportLoading=!0,this._dataService.post("/sample_matrix/exportPara",this.selectedCatMatrix).subscribe(function(t){t.data.length>0?(e._excelService.exportAsExcelFile(t.data,"Parameters-"+T(new Date).format("YYYY-MM-DD")),e.isExportLoading=!1,e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_EXPORT_EN+" "+t.data.length+I.a.record_en:I.a.MSG_EXPORT+" "+t.data.length+I.a.record,"OK")):(e.isExportLoading=!1,e._notifyService.showWarning("en"==e.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)),e.selectedCatMatrix=[],e.modalService.dismissAll()},function(){e.isExportLoading=!1,e.selectedCatMatrix=[],e._notifyService.showError("en"==e.user.lang?I.a.MSG_EXPORTNO_EN:I.a.MSG_EXPORT_NO,"en"==e.user.lang?I.a.error_title_en:I.a.error_title),e.modalService.dismissAll()})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||je)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},je.\u0275cmp=g.Vb({type:je,selectors:[["app-parameter-assignment"]],decls:86,vars:73,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-10"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-2"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngIf"],["content",""],["contentImport",""],["contentExport",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["colspan","7",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","code"],["type","text","id","code","name","code","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","code_father"],["name","selectedCatTestFather","bindValue","code","bindLabel","code",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","specification_name_l"],["type","text","id","specification_name_l","name","specification_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_name_e"],["type","text","id","specification_name_e","name","specification_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_ex_name_l"],["type","text","id","specification_ex_name_l","name","specification_ex_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_ex_name_e"],["type","text","id","specification_ex_name_e","name","specification_ex_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","para_name_l"],["type","text","id","para_name_l","name","para_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","para_name_e"],["type","text","id","para_name_e","name","para_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","method"],["type","text","id","method","name","method","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","method_en"],["type","text","id","method_en","name","method_en","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["name","selectedCatCSP","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["name","selectedCatPL","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form","theme-form"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["name","selectedCatMatrix","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-12",2,"text-align","center"],[1,"btn","btn-sm","btn-warning",3,"click"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(81);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,Ae,4,3,"button",9),g.ad(14,Le,4,3,"button",10),g.ad(15,De,4,3,"button",11),g.gc(),g.gc(),g.hc(16,"div",12),g.hc(17,"div",13),g.hc(18,"select",14),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(19,"option",15),g.cd(20,"#10"),g.gc(),g.hc(21,"option",16),g.cd(22,"#25"),g.gc(),g.hc(23,"option",17),g.cd(24,"#50"),g.gc(),g.hc(25,"option",18),g.cd(26,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"div",21),g.hc(30,"div",22),g.hc(31,"pagination",23),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(32,"div",24),g.hc(33,"a",25),g.cd(34),g.wc(35,"translate"),g.wc(36,"translate"),g.wc(37,"translate"),g.wc(38,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(39,"div",20),g.hc(40,"div",26),g.hc(41,"table",27),g.hc(42,"thead",28),g.hc(43,"tr"),g.hc(44,"th",29),g.cd(45,"#"),g.gc(),g.hc(46,"th",29),g.hc(47,"input",30),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(48,"th",29),g.cd(49),g.wc(50,"translate"),g.gc(),g.hc(51,"th",29),g.cd(52),g.wc(53,"translate"),g.gc(),g.hc(54,"th",29),g.cd(55),g.wc(56,"translate"),g.gc(),g.hc(57,"th",29),g.cd(58),g.wc(59,"translate"),g.gc(),g.hc(60,"th",29),g.cd(61),g.wc(62,"translate"),g.gc(),g.hc(63,"th",29),g.cd(64),g.wc(65,"translate"),g.gc(),g.gc(),g.gc(),g.hc(66,"tbody"),g.ad(67,Be,6,3,"ng-container",31),g.ad(68,Ue,2,1,"ng-container",31),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(69,"div",20),g.hc(70,"div",21),g.hc(71,"div",22),g.hc(72,"pagination",23),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(73,"div",24),g.hc(74,"a",25),g.cd(75),g.wc(76,"translate"),g.wc(77,"translate"),g.wc(78,"translate"),g.wc(79,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(80,ze,125,139,"ng-template",null,32,g.bd),g.ad(82,Qe,22,10,"ng-template",null,33,g.bd),g.ad(84,qe,19,16,"ng-template",null,34,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,41,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,43,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0&&t._authenService.hasPermission("PARA_ASSM","delete")),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("PARA_ASSM","update")),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("PARA_ASSM","report")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(35,45,"Total of records"),": ",t.totalRow," - ",g.xc(36,47,"Page")," ",t.pageIndex," ",g.xc(37,49,"of")," ",t.totalPage," ",g.xc(38,51,"page"),""),g.Nb(13),g.Cc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),g.Nb(2),g.ed(" ",g.xc(50,53,"Test code")," "),g.Nb(3),g.ed(" ",g.xc(53,55,"Test father code")," "),g.Nb(3),g.ed(" ",g.xc(56,57,"Parameter name")," "),g.Nb(3),g.ed(" ",g.xc(59,59,"Internal testing")," "),g.Nb(3),g.ed(" ",g.xc(62,61,"External testing")," "),g.Nb(3),g.dd(g.xc(65,63,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._categories.length),g.Nb(1),g.Cc("ngIf",t._categories.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(76,65,"Total of records"),": ",t.totalRow," - ",g.xc(77,67,"Page")," ",t.pageIndex," ",g.xc(78,69,"of")," ",t.totalPage," ",g.xc(79,71,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v,A.a],pipes:[L.c],styles:[""]}),je);function $e(e,t){if(1&e){var n=g.ic();g.hc(0,"button",37),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",38),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function Je(e,t){if(1&e){var n=g.ic();g.hc(0,"button",39),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(93);return e._uploadPopup(t)}),g.cc(1,"i",40),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function He(e,t){if(1&e){var n=g.ic();g.hc(0,"button",41),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(95);return 0==e.exportList.length?e._exportAll(t):e._exportAll1(e.exportList)}),g.cc(1,"i",42),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Export")," "))}function Ze(e,t){if(1&e&&(g.hc(0,"div",43),g.cd(1),g.wc(2,"slice"),g.gc()),2&e){var n=t.item;g.Cc("ngbTooltip",n.name.length>15?n.name:""),g.Nb(1),g.ed(" ",n.name.length>15?g.zc(2,2,n.name,0,15)+"..":n.name," ")}}function We(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",44),g.hc(3,"h3",45),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function et(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",47),g.cd(2),g.gc(),g.hc(3,"th",47),g.hc(4,"input",48),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc(2).selectItem(e,c.category_id+","+c.parameter_id)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.cd(14),g.gc(),g.hc(15,"td"),g.cd(16),g.gc(),g.hc(17,"td"),g.cd(18),g.gc(),g.hc(19,"td"),g.hc(20,"button",49),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(91);return c._openModal(a,e)}),g.wc(21,"translate"),g.cc(22,"i",50),g.gc(),g.hc(23,"button",51),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(24,"translate"),g.cc(25,"i",38),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c.category_id+","+c.parameter_id)),g.Nb(2),g.ed(" ",c.category_name_l," "),g.Nb(2),g.dd(c.specification_name_l),g.Nb(2),g.dd(c.specification_ex_name_l),g.Nb(2),g.ed(" ",c.max," "),g.Nb(2),g.ed(" ",c.min," "),g.Nb(2),g.ed(" ",c.precision,""),g.Nb(2),g.ed(" ",c.lod," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(21,14,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("MATRIX","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(24,16,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("MATRIX","delete"))}}function tt(e,t){if(1&e&&(g.fc(0),g.ad(1,et,26,18,"tr",46),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._samplelist)}}function nt(e,t){1&e&&(g.fc(0),g.hc(1,"a",77),g.cc(2,"img",78),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function ct(e,t){if(1&e&&(g.hc(0,"button",79),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function at(e,t){if(1&e){var n=g.ic();g.hc(0,"form",52,53),g.rc("ngSubmit",function(){g.Tc(n);var e=g.vc();return e.saveChange(e.selectedCatMatrix1,e.selectedParameters)}),g.hc(2,"div",54),g.hc(3,"h4",55),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",56),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",57),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",58),g.hc(11,"div",59),g.hc(12,"div",60),g.hc(13,"div",61),g.hc(14,"label",62),g.cd(15),g.wc(16,"translate"),g.hc(17,"span",45),g.cd(18,"(*)"),g.gc(),g.gc(),g.hc(19,"ng-select",63),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatMatrix1=e}),g.wc(20,"translate"),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.hc(22,"div",60),g.hc(23,"div",61),g.hc(24,"label",64),g.cd(25),g.wc(26,"translate"),g.hc(27,"span",45),g.cd(28,"(*)"),g.gc(),g.gc(),g.hc(29,"ng-select",65),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedParameters=e}),g.wc(30,"translate"),g.wc(31,"translate"),g.gc(),g.gc(),g.gc(),g.hc(32,"div",60),g.hc(33,"div",61),g.hc(34,"label",66),g.cd(35),g.wc(36,"translate"),g.gc(),g.hc(37,"input",67),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.max=e}),g.wc(38,"translate"),g.gc(),g.gc(),g.gc(),g.hc(39,"div",60),g.hc(40,"div",61),g.hc(41,"label",68),g.cd(42),g.wc(43,"translate"),g.gc(),g.hc(44,"input",69),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.min=e}),g.gc(),g.gc(),g.gc(),g.hc(45,"div",60),g.hc(46,"div",61),g.hc(47,"label",70),g.cd(48),g.wc(49,"translate"),g.gc(),g.hc(50,"input",71),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.precision=e}),g.gc(),g.gc(),g.gc(),g.hc(51,"div",60),g.hc(52,"div",61),g.hc(53,"label",72),g.cd(54),g.wc(55,"translate"),g.gc(),g.hc(56,"input",73),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.lod=e}),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(57,"div",74),g.hc(58,"button",75),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(59),g.wc(60,"translate"),g.gc(),g.ad(61,nt,5,3,"ng-container",33),g.ad(62,ct,3,4,"button",76),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ","ADD"==c._flagModal?g.xc(5,32,"Add new"):g.xc(6,34,"Update")," "),g.Nb(11),g.ed("",g.xc(16,36,"Select a category")," "),g.Nb(4),g.Cc("items",c._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatMatrix1)("placeholder",g.xc(20,38,"Please choose"))("notFoundText",g.xc(21,40,"Not found item")),g.Nb(6),g.ed("",g.xc(26,42,"Select a parameter assignment")," "),g.Nb(4),g.Cc("items",c._parameters)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedParameters)("placeholder",g.xc(30,44,"Please choose"))("notFoundText",g.xc(31,46,"Not found item")),g.Nb(6),g.ed("",g.xc(36,48,"Max (g)")," "),g.Nb(2),g.Cc("placeholder",g.xc(38,50,"Max (g)"))("ngModel",c.entity.max),g.Nb(5),g.dd(g.xc(43,52,"Min (g)")),g.Nb(2),g.Cc("placeholder","Min (g)")("ngModel",c.entity.min),g.Nb(4),g.dd(g.xc(49,54,"LOQ")),g.Nb(2),g.Cc("placeholder","LOQ")("ngModel",c.entity.precision),g.Nb(4),g.dd(g.xc(55,56,"LOD")),g.Nb(2),g.Cc("placeholder","LOD")("ngModel",c.entity.lod),g.Nb(3),g.ed(" ",g.xc(60,58,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function it(e,t){1&e&&g.cc(0,"img",89)}function rt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",80),g.hc(1,"div",54),g.hc(2,"h4",55),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",56),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",57),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",58),g.hc(9,"div",59),g.hc(10,"div",81),g.hc(11,"div",82),g.hc(12,"input",83,84),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(14,"hr",85),g.hc(15,"button",86),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(16,it,1,0,"img",87),g.cd(17),g.wc(18,"translate"),g.gc(),g.hc(19,"button",88),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(20),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(18,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(21,8,"Close")," ")}}function ot(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Processing")))}function lt(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Export")))}function st(e,t){if(1&e){var n=g.ic();g.hc(0,"form",80),g.hc(1,"div",54),g.hc(2,"h4",55),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",56),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",57),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",58),g.hc(9,"div",59),g.hc(10,"div",81),g.hc(11,"ng-select",90),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatMatrixA=e}),g.wc(12,"translate"),g.wc(13,"translate"),g.gc(),g.gc(),g.hc(14,"div",91),g.cc(15,"br"),g.hc(16,"button",92),g.rc("click",function(){return g.Tc(n),g.vc()._processExport()}),g.ad(17,ot,3,3,"ng-container",33),g.ad(18,lt,3,3,"ng-container",33),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,10,"Export")," "),g.Nb(8),g.Cc("items",c._categoriesA)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatMatrixA)("placeholder",g.xc(12,12,"Please choose"))("notFoundText",g.xc(13,14,"Not found item")),g.Nb(6),g.Cc("ngIf",c.isExportLoading),g.Nb(1),g.Cc("ngIf",!c.isExportLoading)}}var dt,ht=((dt=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this._flagModal="",this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._samplelist=[],this.selectedCatMatrix=null,this.selectedCatMatrix1=null,this.selectedParameters=null,this._parameters=[],this.isExportLoading=!1,this.selectedCatMatrixA=[],this._categoriesA=[],this.exportList=[],!1!==e.checkAccess("MATRIX")&&!1!==e.hasPermission("MATRIX","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadSampleCategory(),this.loadData(this.selectedCatMatrix),this.loadParameters(),this.socket.on("refreshPage",function(t){e.loadSampleCategory(),e.loadParameters(),e.loadData(e.selectedCatMatrix),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadSampleCategory",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categories=a})}},{key:"loadParameters",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallparametersnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.specification_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._parameters=a})}},{key:"loadData",value:function(e){var t=this;this._isLoading=!0;var n={};n.page=this.pageIndex,n.limit=this.pageSize,n.filter=this._keyword,n.domain=this.user.short_code,n.catid=null==e?null:e,this._dataService.post("/sample_matrix/getallsamples",n).subscribe(function(e){t._samplelist=e.data,t.totalRow=e.rowCount,t.totalPage=e.totalPages,t._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.category_id=e.category_id,n.parameter_id=e.parameter_id,this._dataService.post("/sample_matrix/detailSample",n).subscribe(function(e){t.entity=e.data,t.selectedCatMatrix=t.entity.category_id,t.selectedParameters=t.entity.parameter_id,t.loadData(t.selectedCatMatrix)})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._samplelist.forEach(function(e){return t.exportList.push(e.category_id+","+e.parameter_id)})):this.exportList=[],console.log(this.exportList)}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t}),console.log(this.exportList)}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.specification_name_e:e.specification_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.category_id=e.category_id,c.parameter_id=e.parameter_id,t._dataService.post("/sample_matrix/deleteSample",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.split(","),n._remove(o[0],o[1]),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e,t){var n=this,c={};c.category_id=e,c.parameter_id=t,this._dataService.post("/sample_matrix/deleteSample",c).subscribe(function(e){n.socket.emit("refresh",{})})}},{key:"saveChange",value:function(e,t){var n=this;this.isSave=!0,"ADD"==this._flagModal?(this.entity.category_id=e,this.entity.parameter_id=t,this.entity.short_code=this.user.short_code,this._dataService.post("/sample_matrix/addSample",this.entity).subscribe(function(e){n.socket.emit("refresh",{}),n._notifyService.showSuccess("en"==n.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),n.entity={},n.isSave=!1,n.modalService.dismissAll()},function(){n.isSave=!1,n._notifyService.showError("en"==n.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==n.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entity.category_id=e,this.entity.parameter_id=t,this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updateSample",this.entity).subscribe(function(e){n.isSave=!1,n.socket.emit("refresh",{}),n._notifyService.showSuccess("en"==n.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),n.modalService.dismissAll()},function(){n.isSave=!1,n._notifyService.showError("en"==n.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==n.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){this.isSave=!1,null==t?(this.entity={},this._flagModal="ADD",this.selectedCatMatrix1=null,this.selectedParameters=null):(this.entity=t,this.selectedCatMatrix1=t.category_id,this.selectedParameters=t.parameter_id,this._flagModal="UPDATE"),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.format_incorrect_en:I.a.format_incorrect,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/sample_matrix_upload.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.catlist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addSampleList",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorParaAssignment-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?e.count+" "+I.a.MSG_UPDATE_RECORD_EN:e.count+" "+I.a.MSG_UPDATE_RECORD,"OK")),t._isLoadingImport=!1,t.socket.emit("refresh",{})},function(){return t._isLoadingImport=!1})}},{key:"_exportAll",value:function(e){this.isExportLoading=!1,this.loadSampleCategoryA(),this.modalService.open(e,{size:"md",centered:!0})}},{key:"_exportAll1",value:function(e){var t=this;this._dataService.post("/sample_matrix/exportSampleMatrixSelected",e).subscribe(function(e){e.data.length>0?(t._excelService.exportAsExcelFile(e.data,"SampleMatrix-"+T(new Date).format("YYYY-MM-DD")),t.isExportLoading=!1,t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_EXPORT_EN+" "+e.data.length+I.a.record_en:I.a.MSG_EXPORT+" "+e.data.length+I.a.record,"OK"),t.exportList=[]):(t.isExportLoading=!1,t._notifyService.showWarning("en"==t.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"OK"))})}},{key:"loadSampleCategoryA",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categoriesA=a})}},{key:"_processExport",value:function(){var e=this;this.isExportLoading=!0,this._dataService.post("/sample_matrix/exportSampleMatrix",this.selectedCatMatrixA).subscribe(function(t){t.data.length>0?(e._excelService.exportAsExcelFile(t.data,"SampleMatrix-"+T(new Date).format("YYYY-MM-DD")),e.isExportLoading=!1,e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_EXPORT_EN+" "+t.data.length+I.a.record_en:I.a.MSG_EXPORT+" "+t.data.length+I.a.record,"OK")):(e.isExportLoading=!1,e._notifyService.showWarning("en"==e.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)),e.selectedCatMatrixA=[],e.modalService.dismissAll()},function(){e.isExportLoading=!1,e.selectedCatMatrixA=[],e._notifyService.showError("en"==e.user.lang?I.a.MSG_EXPORTNO_EN:I.a.MSG_EXPORT_NO,"en"==e.user.lang?I.a.error_title_en:I.a.error_title),e.modalService.dismissAll()})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}()).\u0275fac=function(e){return new(e||dt)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},dt.\u0275cmp=g.Vb({type:dt,selectors:[["app-sample-matrix"]],decls:96,vars:90,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],["name","selectedCatMatrix","bindValue","code","bindLabel","name",2,"padding-top","5px","width","150px",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange","change"],["ng-option-tmp",""],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngIf"],["content",""],["contentImport",""],["contentExport",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["container","body",3,"ngbTooltip"],["colspan","9",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","specification_name_l"],["name","selectedCatMatrix1","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","Name1"],["name","selectedParameters","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","max"],["type","text","id","max","name","max","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","min"],["type","text","id","min","name","min","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","precision"],["type","text","id","precision","name","precision","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","lod"],["type","text","id","lod","name","lod","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form","theme-form"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["name","selectedCatMatrix","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-12",2,"text-align","center"],[1,"btn","btn-sm","btn-warning",3,"click"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData(t.selectedCatMatrix)})("keyup.enter",function(){return t.loadData(t.selectedCatMatrix)}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(91);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,$e,4,3,"button",9),g.ad(14,Je,4,3,"button",10),g.ad(15,He,4,3,"button",11),g.gc(),g.gc(),g.hc(16,"div",12),g.hc(17,"div",13),g.hc(18,"select",14),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(19,"option",15),g.cd(20,"#10"),g.gc(),g.hc(21,"option",16),g.cd(22,"#25"),g.gc(),g.hc(23,"option",17),g.cd(24,"#50"),g.gc(),g.hc(25,"option",18),g.cd(26,"#100"),g.gc(),g.gc(),g.hc(27,"ng-select",19),g.rc("ngModelChange",function(e){return t.selectedCatMatrix=e})("change",function(){return t.loadData(t.selectedCatMatrix)}),g.wc(28,"translate"),g.wc(29,"translate"),g.ad(30,Ze,3,6,"ng-template",20),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(31,"div",21),g.hc(32,"div",22),g.hc(33,"div",23),g.hc(34,"div",24),g.hc(35,"pagination",25),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(36,"div",26),g.hc(37,"a",27),g.cd(38),g.wc(39,"translate"),g.wc(40,"translate"),g.wc(41,"translate"),g.wc(42,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(43,"div",22),g.hc(44,"div",28),g.hc(45,"table",29),g.hc(46,"thead",30),g.hc(47,"tr"),g.hc(48,"th",31),g.cd(49,"#"),g.gc(),g.hc(50,"th",31),g.hc(51,"input",32),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(52,"th",31),g.cd(53),g.wc(54,"translate"),g.gc(),g.hc(55,"th",31),g.cd(56),g.wc(57,"translate"),g.gc(),g.hc(58,"th",31),g.cd(59),g.wc(60,"translate"),g.gc(),g.hc(61,"th",31),g.cd(62),g.wc(63,"translate"),g.gc(),g.hc(64,"th",31),g.cd(65),g.wc(66,"translate"),g.gc(),g.hc(67,"th",31),g.cd(68),g.wc(69,"translate"),g.gc(),g.hc(70,"th",31),g.cd(71),g.wc(72,"translate"),g.gc(),g.hc(73,"th",31),g.cd(74),g.wc(75,"translate"),g.gc(),g.gc(),g.gc(),g.hc(76,"tbody"),g.ad(77,We,6,3,"ng-container",33),g.ad(78,tt,2,1,"ng-container",33),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(79,"div",22),g.hc(80,"div",23),g.hc(81,"div",24),g.hc(82,"pagination",25),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(83,"div",26),g.hc(84,"a",27),g.cd(85),g.wc(86,"translate"),g.wc(87,"translate"),g.wc(88,"translate"),g.wc(89,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(90,at,63,60,"ng-template",null,34,g.bd),g.ad(92,rt,22,10,"ng-template",null,35,g.bd),g.ad(94,st,19,16,"ng-template",null,36,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,50,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,52,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("MATRIX","update")),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("MATRIX","report")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(9),g.Cc("items",t._categories)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",t.selectedCatMatrix)("placeholder",g.xc(28,54,"Please choose"))("notFoundText",g.xc(29,56,"Not found item")),g.Nb(8),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(39,58,"Total of records"),": ",t.totalRow," - ",g.xc(40,60,"Page")," ",t.pageIndex," ",g.xc(41,62,"of")," ",t.totalPage," ",g.xc(42,64,"page"),""),g.Nb(13),g.Cc("disabled",0==t._samplelist.length)("checked",t.exportList.length==t._samplelist.length),g.Nb(2),g.ed(" ",g.xc(54,66,"Matrix category")," "),g.Nb(3),g.ed(" ",g.xc(57,68,"Internal testing")," "),g.Nb(3),g.ed(" ",g.xc(60,70,"External testing")," "),g.Nb(3),g.ed(" ",g.xc(63,72,"Max (g)")," "),g.Nb(3),g.ed(" ",g.xc(66,74,"Min (g)")," "),g.Nb(3),g.ed(" ",g.xc(69,76,"LOQ")," "),g.Nb(3),g.ed(" ",g.xc(72,78,"LOD")," "),g.Nb(3),g.dd(g.xc(75,80,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._samplelist.length),g.Nb(1),g.Cc("ngIf",t._samplelist.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(86,82,"Total of records"),": ",t.totalRow," - ",g.xc(87,84,"Page")," ",t.pageIndex," ",g.xc(88,86,"of")," ",t.totalPage," ",g.xc(89,88,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,A.a,A.c,_.a,P.N,o.p,w.z,w.n,w.o,w.v],pipes:[L.c,o.x],styles:[""]}),dt);function gt(e,t){if(1&e){var n=g.ic();g.hc(0,"button",33),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",34),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function ut(e,t){if(1&e){var n=g.ic();g.hc(0,"button",35),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(83);return e._uploadPopup(t)}),g.cc(1,"i",36),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function ft(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",37),g.hc(3,"h3",38),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function pt(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",40),g.cd(2),g.gc(),g.hc(3,"th",40),g.hc(4,"input",41),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc(2).selectItem(e,c.id)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.hc(14,"button",42),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(81);return c._openModal(a,e)}),g.wc(15,"translate"),g.cc(16,"i",43),g.gc(),g.hc(17,"button",44),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(18,"translate"),g.cc(19,"i",34),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c.id)),g.Nb(2),g.ed(" ",c.csp_name_l," "),g.Nb(2),g.dd(c.csp_name_e),g.Nb(2),g.dd(c.note_l),g.Nb(2),g.ed(" ",c.note_e," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(15,11,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("TEST_CSP","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(18,13,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("TEST_CSP","delete"))}}function mt(e,t){if(1&e&&(g.fc(0),g.ad(1,pt,20,15,"tr",39),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._categories)}}function _t(e,t){1&e&&(g.fc(0),g.hc(1,"a",66),g.cc(2,"img",67),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function vt(e,t){if(1&e&&(g.hc(0,"button",68),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function bt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,46),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",50),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",51),g.hc(11,"div",52),g.hc(12,"div",53),g.hc(13,"div",54),g.hc(14,"label",55),g.cd(15),g.wc(16,"translate"),g.wc(17,"translate"),g.hc(18,"span",38),g.cd(19,"(*)"),g.gc(),g.gc(),g.hc(20,"input",56),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.csp_name_l=e}),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.hc(22,"div",53),g.hc(23,"div",54),g.hc(24,"label",57),g.cd(25),g.wc(26,"translate"),g.wc(27,"translate"),g.gc(),g.hc(28,"input",58),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.csp_name_e=e}),g.wc(29,"translate"),g.gc(),g.gc(),g.gc(),g.hc(30,"div",53),g.hc(31,"div",54),g.hc(32,"label",59),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.gc(),g.hc(36,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_l=e}),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.hc(38,"div",53),g.hc(39,"div",54),g.hc(40,"label",61),g.cd(41),g.wc(42,"translate"),g.wc(43,"translate"),g.gc(),g.hc(44,"input",62),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_e=e}),g.wc(45,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(46,"div",63),g.hc(47,"button",64),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(48),g.wc(49,"translate"),g.gc(),g.ad(50,_t,5,3,"ng-container",30),g.ad(51,vt,3,4,"button",65),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",null==c.entity.id?g.xc(5,20,"Add new"):g.xc(6,22,"Update")," "),g.Nb(11),g.fd("",g.xc(16,24,"Category name")," (",g.xc(17,26,"Vietnamese"),") "),g.Nb(5),g.Dc("placeholder",g.xc(21,28,"Category name")),g.Cc("ngModel",c.entity.csp_name_l),g.Nb(5),g.fd("",g.xc(26,30,"Category name")," (",g.xc(27,32,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(29,34,"Category name")),g.Cc("ngModel",c.entity.csp_name_e),g.Nb(5),g.fd("",g.xc(34,36,"Note")," (",g.xc(35,38,"Vietnamese"),") "),g.Nb(3),g.Dc("placeholder",g.xc(37,40,"Note")),g.Cc("ngModel",c.entity.note_l),g.Nb(5),g.fd("",g.xc(42,42,"Note")," (",g.xc(43,44,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(45,46,"Note")),g.Cc("ngModel",c.entity.note_e),g.Nb(4),g.ed(" ",g.xc(49,48,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function yt(e,t){1&e&&g.cc(0,"img",78)}function xt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",45,69),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",47),g.hc(3,"h4",48),g.cd(4),g.wc(5,"translate"),g.gc(),g.hc(6,"button",49),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(7,"span",50),g.cd(8,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(9,"div",51),g.hc(10,"div",52),g.hc(11,"div",70),g.hc(12,"div",71),g.hc(13,"input",72,73),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(15,"hr",74),g.hc(16,"button",75),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(17,yt,1,0,"img",76),g.cd(18),g.wc(19,"translate"),g.gc(),g.hc(20,"button",77),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(21),g.wc(22,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",g.xc(5,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(19,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(22,8,"Close")," ")}}var wt,St=((wt=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.exportList=[],!1!==e.checkAccess("TEST_CSP")&&!1!==e.hasPermission("TEST_CSP","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescsp",t).subscribe(function(t){e._categories=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailCatCSP",n).subscribe(function(e){t.entity=e.data})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.csp_name_e:e.csp_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/sample_matrix/deleteCatCSP",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n._remove(o),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/deleteCatCSP",n).subscribe(function(e){t.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0,null==this.entity.id?(this.entity.short_code=this.user.short_code,this._dataService.post("/sample_matrix/addCatCSP",this.entity).subscribe(function(t){e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),e.entity={},e.isSave=!1,e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updateCatCSP",this.entity).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){null==t?(this.entity={},this.entity.id=null):this.entity=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/test_family_csp_sample.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.catlist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addCatCSPList",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyCSP-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK")),t._isLoadingImport=!1,t.socket.emit("refresh",{}),t.modalService.dismissAll()},function(){return t._isLoadingImport=!1})}}]),t}()).\u0275fac=function(e){return new(e||wt)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},wt.\u0275cmp=g.Vb({type:wt,selectors:[["app-test-family-csp"]],decls:84,vars:81,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngIf"],["content",""],["contentImport",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["colspan","7",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","Name"],["type","text","id","Name","name","Name","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Name1"],["type","text","id","Name1","name","Name1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note"],["type","text","id","Note","name","Note","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note1"],["type","text","id","Note1","name","Note1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],["form1","ngForm"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(81);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,gt,4,3,"button",9),g.ad(14,ut,4,3,"button",10),g.gc(),g.gc(),g.hc(15,"div",11),g.hc(16,"div",12),g.hc(17,"select",13),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(18,"option",14),g.cd(19,"#10"),g.gc(),g.hc(20,"option",15),g.cd(21,"#25"),g.gc(),g.hc(22,"option",16),g.cd(23,"#50"),g.gc(),g.hc(24,"option",17),g.cd(25,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(26,"div",18),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"div",21),g.hc(30,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(31,"div",23),g.hc(32,"a",24),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.wc(36,"translate"),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(38,"div",19),g.hc(39,"div",25),g.hc(40,"table",26),g.hc(41,"thead",27),g.hc(42,"tr"),g.hc(43,"th",28),g.cd(44,"#"),g.gc(),g.hc(45,"th",28),g.hc(46,"input",29),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(47,"th",28),g.cd(48),g.wc(49,"translate"),g.wc(50,"translate"),g.gc(),g.hc(51,"th",28),g.cd(52),g.wc(53,"translate"),g.wc(54,"translate"),g.gc(),g.hc(55,"th",28),g.cd(56),g.wc(57,"translate"),g.wc(58,"translate"),g.gc(),g.hc(59,"th",28),g.cd(60),g.wc(61,"translate"),g.wc(62,"translate"),g.gc(),g.hc(63,"th",28),g.cd(64),g.wc(65,"translate"),g.gc(),g.gc(),g.gc(),g.hc(66,"tbody"),g.ad(67,ft,6,3,"ng-container",30),g.ad(68,mt,2,1,"ng-container",30),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(69,"div",19),g.hc(70,"div",20),g.hc(71,"div",21),g.hc(72,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(73,"div",23),g.hc(74,"a",24),g.cd(75),g.wc(76,"translate"),g.wc(77,"translate"),g.wc(78,"translate"),g.wc(79,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(80,bt,52,50,"ng-template",null,31,g.bd),g.ad(82,xt,23,10,"ng-template",null,32,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,43,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,45,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("TEST_CSP","update")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(34,47,"Total of records"),": ",t.totalRow," - ",g.xc(35,49,"Page")," ",t.pageIndex," ",g.xc(36,51,"of")," ",t.totalPage," ",g.xc(37,53,"page"),""),g.Nb(13),g.Cc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),g.Nb(2),g.fd(" ",g.xc(49,55,"Category")," (",g.xc(50,57,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(53,59,"Category")," (",g.xc(54,61,"English"),") "),g.Nb(4),g.fd(" ",g.xc(57,63,"Note")," (",g.xc(58,65,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(61,67,"Note")," (",g.xc(62,69,"English"),") "),g.Nb(4),g.dd(g.xc(65,71,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._categories.length),g.Nb(1),g.Cc("ngIf",t._categories.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(76,73,"Total of records"),": ",t.totalRow," - ",g.xc(77,75,"Page")," ",t.pageIndex," ",g.xc(78,77,"of")," ",t.totalPage," ",g.xc(79,79,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v],pipes:[L.c],styles:[""]}),wt);function Ct(e,t){if(1&e){var n=g.ic();g.hc(0,"button",33),g.rc("click",function(){g.Tc(n);var e=g.vc();return e._deleteItemAll(e.exportList)}),g.cc(1,"i",34),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Delete all")," "))}function Mt(e,t){if(1&e){var n=g.ic();g.hc(0,"button",35),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(82);return e._uploadPopup(t)}),g.cc(1,"i",36),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function Nt(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",37),g.cd(2),g.gc(),g.hc(3,"th",37),g.hc(4,"input",38),g.rc("change",function(e){g.Tc(n);var c=t.$implicit;return g.vc().selectItem(e,c.id)}),g.gc(),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.hc(14,"button",39),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(),a=g.Qc(80);return c._openModal(a,e)}),g.wc(15,"translate"),g.cc(16,"i",40),g.gc(),g.hc(17,"button",41),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc().deleteItem(e)}),g.wc(18,"translate"),g.cc(19,"i",34),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc();g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.Ec("name","ckU",a+1,""),g.Cc("checked",i.exportList.includes(c.id)),g.Nb(2),g.ed(" ",c.pl_name_l," "),g.Nb(2),g.dd(c.pl_name_e),g.Nb(2),g.dd(c.note_l),g.Nb(2),g.ed(" ",c.note_e," "),g.Nb(2),g.Dc("ngbTooltip",g.xc(15,11,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("TEST_PL","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(18,13,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("TEST_PL","delete"))}}function Et(e,t){1&e&&(g.fc(0),g.hc(1,"a",65),g.cc(2,"img",66),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function kt(e,t){if(1&e&&(g.hc(0,"button",67),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function Tt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",42,43),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",44),g.hc(3,"h4",45),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",46),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",47),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",48),g.hc(11,"div",49),g.hc(12,"div",50),g.hc(13,"div",51),g.hc(14,"label",52),g.cd(15),g.wc(16,"translate"),g.wc(17,"translate"),g.hc(18,"span",53),g.cd(19,"(*)"),g.gc(),g.gc(),g.hc(20,"input",54),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.pl_name_l=e}),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.hc(22,"div",50),g.hc(23,"div",51),g.hc(24,"label",55),g.cd(25),g.wc(26,"translate"),g.wc(27,"translate"),g.gc(),g.hc(28,"input",56),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.pl_name_e=e}),g.wc(29,"translate"),g.gc(),g.gc(),g.gc(),g.hc(30,"div",50),g.hc(31,"div",51),g.hc(32,"label",57),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.gc(),g.hc(36,"input",58),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_l=e}),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.hc(38,"div",50),g.hc(39,"div",51),g.hc(40,"label",59),g.cd(41),g.wc(42,"translate"),g.wc(43,"translate"),g.gc(),g.hc(44,"input",60),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.note_e=e}),g.wc(45,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(46,"div",61),g.hc(47,"button",62),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(48),g.wc(49,"translate"),g.gc(),g.ad(50,Et,5,3,"ng-container",63),g.ad(51,kt,3,4,"button",64),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",null==c.entity.id?g.xc(5,20,"Add new"):g.xc(6,22,"Update")," "),g.Nb(11),g.fd("",g.xc(16,24,"Category name")," (",g.xc(17,26,"Vietnamese"),") "),g.Nb(5),g.Dc("placeholder",g.xc(21,28,"Category name")),g.Cc("ngModel",c.entity.pl_name_l),g.Nb(5),g.fd("",g.xc(26,30,"Category name")," (",g.xc(27,32,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(29,34,"Category name")),g.Cc("ngModel",c.entity.pl_name_e),g.Nb(5),g.fd("",g.xc(34,36,"Note")," (",g.xc(35,38,"Vietnamese"),") "),g.Nb(3),g.Dc("placeholder",g.xc(37,40,"Note")),g.Cc("ngModel",c.entity.note_l),g.Nb(5),g.fd("",g.xc(42,42,"Note")," (",g.xc(43,44,"English"),")"),g.Nb(3),g.Dc("placeholder",g.xc(45,46,"Note")),g.Cc("ngModel",c.entity.note_e),g.Nb(4),g.ed(" ",g.xc(49,48,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function It(e,t){1&e&&g.cc(0,"img",76)}function Pt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",42,43),g.rc("ngSubmit",function(){return g.Tc(n),g.vc().saveChange()}),g.hc(2,"div",44),g.hc(3,"h4",45),g.cd(4),g.wc(5,"translate"),g.gc(),g.hc(6,"button",46),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(7,"span",47),g.cd(8,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(9,"div",48),g.hc(10,"div",49),g.hc(11,"div",68),g.hc(12,"div",69),g.hc(13,"input",70,71),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(15,"hr",72),g.hc(16,"button",73),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(17,It,1,0,"img",74),g.cd(18),g.wc(19,"translate"),g.gc(),g.hc(20,"button",75),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(21),g.wc(22,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ",g.xc(5,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(19,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(22,8,"Close")," ")}}var Rt,At=((Rt=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._categories=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this.exportList=[],!1!==e.checkAccess("TEST_PL")&&!1!==e.hasPermission("TEST_PL","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.socket.on("refreshPage",function(t){e.loadData(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriespl",t).subscribe(function(t){e._categories=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailCatPL",n).subscribe(function(e){t.entity=e.data})}},{key:"selectAll",value:function(e){var t=this;e.target.checked?(this.exportList=[],this._categories.forEach(function(e){return t.exportList.push(e.id)})):this.exportList=[]}},{key:"selectItem",value:function(e,t){e.target.checked?(this.exportList.push(t),this.exportList.sort()):this.exportList=this.exportList.filter(function(e){return e!=t})}},{key:"deleteItem",value:function(e){var t=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.pl_name_e:e.pl_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id,t._dataService.post("/sample_matrix/deleteCatPL",c).subscribe(function(e){t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"_deleteItemAll",value:function(t){var n=this;k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?I.a.all_en:I.a.all,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(c){if(c.value){var a,i=0,r=e(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;n._remove(o),i+=1}}catch(l){r.e(l)}finally{r.f()}n._notifyService.showSuccess("en"==n.user.lang?i+" "+I.a.record_en+" "+I.a.MSG_DELETE_EN:i+" "+I.a.record+" "+I.a.MSG_DELETE,"OK"),n.exportList=[]}})}},{key:"_remove",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/deleteCatPL",n).subscribe(function(e){t.socket.emit("refresh",{})})}},{key:"saveChange",value:function(){var e=this;this.isSave=!0,null==this.entity.id?(this.entity.short_code=this.user.short_code,this._dataService.post("/sample_matrix/addCatPL",this.entity).subscribe(function(t){e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),e.entity={},e.isSave=!1,e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)})):(this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code,this._dataService.post("/sample_matrix/updateCatPL",this.entity).subscribe(function(t){e.isSave=!1,e.socket.emit("refresh",{}),e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),e.modalService.dismissAll()},function(){e.isSave=!1,e._notifyService.showError("en"==e.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)}))}},{key:"_openModal",value:function(e,t){null==t?(this.entity={},this.entity.id=null):this.entity=t,this.modalService.open(e,{size:"md",centered:!0})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/test_family_pl_sample.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.catlist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addCatPLList",n).subscribe(function(e){console.log(e),"ok"==e.result&&(e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorTestFamilyPL-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK")),t._isLoadingImport=!1,t.socket.emit("refresh",{}),t.modalService.dismissAll()},function(){return t._isLoadingImport=!1})}}]),t}()).\u0275fac=function(e){return new(e||Rt)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},Rt.\u0275cmp=g.Vb({type:Rt,selectors:[["app-test-family-pl"]],decls:83,vars:80,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-danger mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],["type","checkbox","name","checkAll",1,"form-control",2,"width","20px",3,"disabled","checked","change"],[4,"ngFor","ngForOf"],["content",""],["contentImport",""],[1,"btn","btn-sm","btn-danger","mr-sm-1",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],["scope","row"],["type","checkbox",1,"form-control",2,"width","20px",3,"name","checked","change"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-6"],[1,"form-group"],["for","Name"],[1,"text-danger"],["type","text","id","Name","name","Name","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Name1"],["type","text","id","Name1","name","Name1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note"],["type","text","id","Note","name","Note","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","Note1"],["type","text","id","Note1","name","Note1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],[4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(80);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,Ct,4,3,"button",9),g.ad(14,Mt,4,3,"button",10),g.gc(),g.gc(),g.hc(15,"div",11),g.hc(16,"div",12),g.hc(17,"select",13),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(18,"option",14),g.cd(19,"#10"),g.gc(),g.hc(20,"option",15),g.cd(21,"#25"),g.gc(),g.hc(22,"option",16),g.cd(23,"#50"),g.gc(),g.hc(24,"option",17),g.cd(25,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(26,"div",18),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"div",21),g.hc(30,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(31,"div",23),g.hc(32,"a",24),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.wc(36,"translate"),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(38,"div",19),g.hc(39,"div",25),g.hc(40,"table",26),g.hc(41,"thead",27),g.hc(42,"tr"),g.hc(43,"th",28),g.cd(44,"#"),g.gc(),g.hc(45,"th",28),g.hc(46,"input",29),g.rc("change",function(e){return t.selectAll(e)}),g.gc(),g.gc(),g.hc(47,"th",28),g.cd(48),g.wc(49,"translate"),g.wc(50,"translate"),g.gc(),g.hc(51,"th",28),g.cd(52),g.wc(53,"translate"),g.wc(54,"translate"),g.gc(),g.hc(55,"th",28),g.cd(56),g.wc(57,"translate"),g.wc(58,"translate"),g.gc(),g.hc(59,"th",28),g.cd(60),g.wc(61,"translate"),g.wc(62,"translate"),g.gc(),g.hc(63,"th",28),g.cd(64),g.wc(65,"translate"),g.gc(),g.gc(),g.gc(),g.hc(66,"tbody"),g.ad(67,Nt,20,15,"tr",30),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(68,"div",19),g.hc(69,"div",20),g.hc(70,"div",21),g.hc(71,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(72,"div",23),g.hc(73,"a",24),g.cd(74),g.wc(75,"translate"),g.wc(76,"translate"),g.wc(77,"translate"),g.wc(78,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(79,Tt,52,50,"ng-template",null,31,g.bd),g.ad(81,Pt,23,10,"ng-template",null,32,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,42,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,44,"Add new")," "),g.Nb(2),g.Cc("ngIf",t.exportList.length>0),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("TEST_PL","update")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(34,46,"Total of records"),": ",t.totalRow," - ",g.xc(35,48,"Page")," ",t.pageIndex," ",g.xc(36,50,"of")," ",t.totalPage," ",g.xc(37,52,"page"),""),g.Nb(13),g.Cc("disabled",0==t._categories.length)("checked",t.exportList.length==t._categories.length),g.Nb(2),g.fd(" ",g.xc(49,54,"Category")," (",g.xc(50,56,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(53,58,"Category")," (",g.xc(54,60,"English"),") "),g.Nb(4),g.fd(" ",g.xc(57,62,"Note")," (",g.xc(58,64,"Vietnamese"),") "),g.Nb(4),g.fd(" ",g.xc(61,66,"Note")," (",g.xc(62,68,"English"),") "),g.Nb(4),g.dd(g.xc(65,70,"Actions")),g.Nb(3),g.Cc("ngForOf",t._categories),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(75,72,"Total of records"),": ",t.totalRow," - ",g.xc(76,74,"Page")," ",t.pageIndex," ",g.xc(77,76,"of")," ",t.totalPage," ",g.xc(78,78,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v],pipes:[L.c],styles:[""]}),Rt),Lt=i("tmjD");function Dt(e,t){if(1&e){var n=g.ic();g.hc(0,"button",33),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(98);return e._uploadPopup(t)}),g.cc(1,"i",34),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Import")," "))}function Bt(e,t){if(1&e){var n=g.ic();g.hc(0,"button",35),g.rc("click",function(){g.Tc(n);var e=g.vc(),t=g.Qc(100);return e._exportAll(t)}),g.cc(1,"i",36),g.cd(2),g.wc(3,"translate"),g.gc()}2&e&&(g.Nb(2),g.ed(" ",g.xc(3,1,"Export")," "))}function Ot(e,t){1&e&&(g.fc(0),g.hc(1,"tr"),g.hc(2,"td",37),g.hc(3,"h3",38),g.cd(4),g.wc(5,"translate"),g.gc(),g.gc(),g.gc(),g.ec()),2&e&&(g.Nb(4),g.ed(" ",g.xc(5,1,"No records now!!!")," "))}function Ut(e,t){1&e&&g.cc(0,"i",48)}function Ft(e,t){1&e&&g.cc(0,"i",49)}function Gt(e,t){1&e&&g.cc(0,"i",48)}function zt(e,t){1&e&&g.cc(0,"i",49)}function Kt(e,t){if(1&e){var n=g.ic();g.hc(0,"tr"),g.hc(1,"th",40),g.cd(2),g.gc(),g.hc(3,"td"),g.cd(4),g.gc(),g.hc(5,"td"),g.cd(6),g.gc(),g.hc(7,"td"),g.cd(8),g.gc(),g.hc(9,"td"),g.cd(10),g.gc(),g.hc(11,"td"),g.cd(12),g.gc(),g.hc(13,"td"),g.cd(14),g.gc(),g.hc(15,"td"),g.cd(16),g.gc(),g.hc(17,"td"),g.cd(18),g.gc(),g.hc(19,"td"),g.ad(20,Ut,1,0,"i",41),g.ad(21,Ft,1,0,"i",42),g.gc(),g.hc(22,"td"),g.cd(23),g.gc(),g.hc(24,"td",43),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).updateStatus(e)}),g.ad(25,Gt,1,0,"i",41),g.ad(26,zt,1,0,"i",42),g.gc(),g.hc(27,"td"),g.hc(28,"button",44),g.rc("click",function(){g.Tc(n);var e=t.$implicit,c=g.vc(2),a=g.Qc(96);return c._openModal(a,e)}),g.wc(29,"translate"),g.cc(30,"i",45),g.gc(),g.hc(31,"button",46),g.rc("click",function(){g.Tc(n);var e=t.$implicit;return g.vc(2).deleteItem(e)}),g.wc(32,"translate"),g.cc(33,"i",47),g.gc(),g.gc(),g.gc()}if(2&e){var c=t.$implicit,a=t.index,i=g.vc(2);g.Nb(2),g.ed(" ",a+1+i.pageSize*(i.pageIndex-1)," "),g.Nb(2),g.ed(" ",c.code," "),g.Nb(2),g.dd(c.code_father),g.Nb(2),g.dd(c.specification_name_l),g.Nb(2),g.ed(" ",c.csp_name_l," "),g.Nb(2),g.ed(" ",c.pl_name_l," "),g.Nb(2),g.ed(" ",c.unit," "),g.Nb(2),g.ed(" ",c.method," "),g.Nb(2),g.ed(" ",c.tat," "),g.Nb(2),g.Cc("ngIf",c.reform),g.Nb(1),g.Cc("ngIf",!c.reform),g.Nb(2),g.ed(" ",c.note_l," "),g.Nb(2),g.Cc("ngIf",c.is_active),g.Nb(1),g.Cc("ngIf",!c.is_active),g.Nb(2),g.Dc("ngbTooltip",g.xc(29,18,"Edit")),g.Cc("disabled",!i._authenService.hasPermission("TEST_DECLARE","update")),g.Nb(3),g.Dc("ngbTooltip",g.xc(32,20,"Delete")),g.Cc("disabled",!i._authenService.hasPermission("TEST_DECLARE","delete"))}}function Qt(e,t){if(1&e&&(g.fc(0),g.ad(1,Kt,34,22,"tr",39),g.ec()),2&e){var n=g.vc();g.Nb(1),g.Cc("ngForOf",n._testinglists)}}function Yt(e,t){1&e&&(g.fc(0),g.hc(1,"a",104),g.cc(2,"img",105),g.cd(3),g.wc(4,"translate"),g.gc(),g.ec()),2&e&&(g.Nb(3),g.ed(" ",g.xc(4,1,"Processing")," "))}function Vt(e,t){if(1&e&&(g.hc(0,"button",106),g.cd(1),g.wc(2,"translate"),g.gc()),2&e){g.vc();var n=g.Qc(1);g.Cc("disabled",!n.valid),g.Nb(1),g.ed(" ",g.xc(2,2,"Save & close")," ")}}function qt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",50,51),g.rc("ngSubmit",function(){g.Tc(n);var e=g.vc();return e.saveChange(e.selectedCatCSP0,e.selectedCatPL0,e.selectedCatTestFather0,e.selectedDept0)}),g.hc(2,"div",52),g.hc(3,"h4",53),g.cd(4),g.wc(5,"translate"),g.wc(6,"translate"),g.gc(),g.hc(7,"button",54),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(8,"span",55),g.cd(9,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(10,"div",56),g.hc(11,"div",57),g.hc(12,"div",58),g.hc(13,"div",59),g.hc(14,"label",60),g.cd(15),g.wc(16,"translate"),g.hc(17,"span",38),g.cd(18,"(*)"),g.gc(),g.gc(),g.hc(19,"input",61),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.code=e}),g.wc(20,"translate"),g.gc(),g.gc(),g.gc(),g.hc(21,"div",58),g.hc(22,"div",59),g.hc(23,"label",62),g.cd(24),g.wc(25,"translate"),g.gc(),g.hc(26,"ng-select",63),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatTestFather0=e}),g.wc(27,"translate"),g.wc(28,"translate"),g.gc(),g.gc(),g.gc(),g.hc(29,"div",64),g.hc(30,"div",59),g.hc(31,"label",65),g.cd(32),g.wc(33,"translate"),g.gc(),g.hc(34,"input",66),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.price=e}),g.wc(35,"translate"),g.gc(),g.gc(),g.gc(),g.hc(36,"div",64),g.hc(37,"div",59),g.hc(38,"label",67),g.cd(39),g.wc(40,"translate"),g.wc(41,"translate"),g.hc(42,"span",38),g.cd(43,"(*)"),g.gc(),g.gc(),g.hc(44,"input",68),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_name_l=e}),g.wc(45,"translate"),g.gc(),g.gc(),g.gc(),g.hc(46,"div",64),g.hc(47,"div",59),g.hc(48,"label",69),g.cd(49),g.wc(50,"translate"),g.wc(51,"translate"),g.gc(),g.hc(52,"input",70),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_name_e=e}),g.wc(53,"translate"),g.gc(),g.gc(),g.gc(),g.hc(54,"div",64),g.hc(55,"div",59),g.hc(56,"label",71),g.cd(57),g.wc(58,"translate"),g.wc(59,"translate"),g.hc(60,"span",38),g.cd(61,"(*)"),g.gc(),g.gc(),g.hc(62,"input",72),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_ex_name_l=e}),g.wc(63,"translate"),g.gc(),g.gc(),g.gc(),g.hc(64,"div",64),g.hc(65,"div",59),g.hc(66,"label",73),g.cd(67),g.wc(68,"translate"),g.wc(69,"translate"),g.gc(),g.hc(70,"input",74),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.specification_ex_name_e=e}),g.wc(71,"translate"),g.gc(),g.gc(),g.gc(),g.hc(72,"div",64),g.hc(73,"div",59),g.hc(74,"label",75),g.cd(75),g.wc(76,"translate"),g.wc(77,"translate"),g.hc(78,"span",38),g.cd(79,"(*)"),g.gc(),g.gc(),g.hc(80,"input",76),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.para_name_l=e}),g.wc(81,"translate"),g.gc(),g.gc(),g.gc(),g.hc(82,"div",64),g.hc(83,"div",59),g.hc(84,"label",77),g.cd(85),g.wc(86,"translate"),g.wc(87,"translate"),g.gc(),g.hc(88,"input",78),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.para_name_e=e}),g.wc(89,"translate"),g.gc(),g.gc(),g.gc(),g.hc(90,"div",64),g.hc(91,"div",59),g.hc(92,"label",79),g.cd(93),g.wc(94,"translate"),g.hc(95,"span",38),g.cd(96,"(*)"),g.gc(),g.gc(),g.hc(97,"ng-select",80),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatCSP0=e}),g.wc(98,"translate"),g.wc(99,"translate"),g.gc(),g.gc(),g.gc(),g.hc(100,"div",64),g.hc(101,"div",59),g.hc(102,"label",81),g.cd(103),g.wc(104,"translate"),g.hc(105,"span",38),g.cd(106,"(*)"),g.gc(),g.gc(),g.hc(107,"ng-select",82),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatPL0=e}),g.wc(108,"translate"),g.wc(109,"translate"),g.gc(),g.gc(),g.gc(),g.hc(110,"div",64),g.hc(111,"div",59),g.hc(112,"label",83),g.cd(113),g.wc(114,"translate"),g.wc(115,"translate"),g.gc(),g.hc(116,"input",84),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.method=e}),g.wc(117,"translate"),g.gc(),g.gc(),g.gc(),g.hc(118,"div",64),g.hc(119,"div",59),g.hc(120,"label",85),g.cd(121),g.wc(122,"translate"),g.wc(123,"translate"),g.gc(),g.hc(124,"input",86),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.method_en=e}),g.wc(125,"translate"),g.gc(),g.gc(),g.gc(),g.hc(126,"div",64),g.hc(127,"div",59),g.hc(128,"label",87),g.cd(129),g.wc(130,"translate"),g.wc(131,"translate"),g.gc(),g.hc(132,"input",88),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.unit=e}),g.wc(133,"translate"),g.gc(),g.gc(),g.gc(),g.hc(134,"div",64),g.hc(135,"div",59),g.hc(136,"label",89),g.cd(137),g.wc(138,"translate"),g.wc(139,"translate"),g.gc(),g.hc(140,"input",90),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.unit_en=e}),g.wc(141,"translate"),g.gc(),g.gc(),g.gc(),g.hc(142,"div",64),g.hc(143,"div",59),g.hc(144,"label",91),g.cd(145),g.wc(146,"translate"),g.gc(),g.hc(147,"input",92),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().entity.tat=e}),g.wc(148,"translate"),g.gc(),g.gc(),g.gc(),g.hc(149,"div",64),g.hc(150,"div",59),g.hc(151,"label",93),g.cd(152),g.wc(153,"translate"),g.gc(),g.hc(154,"div",94),g.hc(155,"input",95),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc()._status=e}),g.gc(),g.cc(156,"label",96),g.gc(),g.gc(),g.gc(),g.hc(157,"div",64),g.hc(158,"div",59),g.hc(159,"label",97),g.cd(160),g.wc(161,"translate"),g.gc(),g.hc(162,"ng-select",98),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedDept0=e}),g.wc(163,"translate"),g.wc(164,"translate"),g.gc(),g.gc(),g.gc(),g.hc(165,"div",64),g.hc(166,"div",59),g.hc(167,"label",99),g.cd(168),g.wc(169,"translate"),g.gc(),g.hc(170,"ng-select",100),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedItems=e}),g.wc(171,"translate"),g.wc(172,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(173,"div",101),g.hc(174,"button",102),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(175),g.wc(176,"translate"),g.gc(),g.ad(177,Yt,5,3,"ng-container",29),g.ad(178,Vt,3,4,"button",103),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(4),g.ed(" ","ADD"==c._flagModal?g.xc(5,96,"Add new"):g.xc(6,98,"Update")," "),g.Nb(11),g.ed("",g.xc(16,100,"Test code")," "),g.Nb(4),g.Cc("placeholder",g.xc(20,102,"Test code"))("ngModel",c.entity.code),g.Nb(5),g.ed("",g.xc(25,104,"Test father code")," "),g.Nb(2),g.Cc("items",c._cattestfather)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatTestFather0)("placeholder",g.xc(27,106,"Please choose"))("notFoundText",g.xc(28,108,"Not found item")),g.Nb(6),g.dd(g.xc(33,110,"Price")),g.Nb(2),g.Cc("placeholder",g.xc(35,112,"Price"))("ngModel",c.entity.price),g.Nb(5),g.fd("",g.xc(40,114,"Internal testing")," (",g.xc(41,116,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(45,118,"Internal testing"))("ngModel",c.entity.specification_name_l),g.Nb(5),g.fd("",g.xc(50,120,"Internal testing")," (",g.xc(51,122,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(53,124,"Internal testing"))("ngModel",c.entity.specification_name_e),g.Nb(5),g.fd("",g.xc(58,126,"External testing")," (",g.xc(59,128,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(63,130,"External testing"))("ngModel",c.entity.specification_ex_name_l),g.Nb(5),g.fd("",g.xc(68,132,"External testing")," (",g.xc(69,134,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(71,136,"External testing"))("ngModel",c.entity.specification_ex_name_e),g.Nb(5),g.fd("",g.xc(76,138,"Parameter name")," (",g.xc(77,140,"Vietnamese"),") "),g.Nb(5),g.Cc("placeholder",g.xc(81,142,"Parameter name"))("ngModel",c.entity.para_name_l),g.Nb(5),g.fd("",g.xc(86,144,"Parameter name")," (",g.xc(87,146,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(89,148,"Parameter name"))("ngModel",c.entity.para_name_e),g.Nb(5),g.ed("",g.xc(94,150,"Category")," (CSP) "),g.Nb(4),g.Cc("items",c._catcsp)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatCSP0)("placeholder",g.xc(98,152,"Please choose"))("notFoundText",g.xc(99,154,"Not found item")),g.Nb(6),g.ed("",g.xc(104,156,"Category")," (PL) "),g.Nb(4),g.Cc("items",c._catpl)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatPL0)("placeholder",g.xc(108,158,"Please choose"))("notFoundText",g.xc(109,160,"Not found item")),g.Nb(6),g.fd("",g.xc(114,162,"Method")," (",g.xc(115,164,"Vietnamese"),")"),g.Nb(3),g.Cc("placeholder",g.xc(117,166,"Method"))("ngModel",c.entity.method),g.Nb(5),g.fd("",g.xc(122,168,"Method")," (",g.xc(123,170,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(125,172,"Method"))("ngModel",c.entity.method_en),g.Nb(5),g.fd("",g.xc(130,174,"Unit")," (",g.xc(131,176,"Vietnamese"),")"),g.Nb(3),g.Cc("placeholder",g.xc(133,178,"Unit"))("ngModel",c.entity.unit),g.Nb(5),g.fd("",g.xc(138,180,"Unit")," (",g.xc(139,182,"English"),")"),g.Nb(3),g.Cc("placeholder",g.xc(141,184,"Unit"))("ngModel",c.entity.unit_en),g.Nb(5),g.dd(g.xc(146,186,"TAT")),g.Nb(2),g.Cc("placeholder",g.xc(148,188,"TAT"))("ngModel",c.entity.tat),g.Nb(5),g.dd(g.xc(153,190,"Reform")),g.Nb(3),g.Cc("ngModel",c._status),g.Nb(5),g.dd(g.xc(161,192,"Department")),g.Nb(2),g.Cc("items",c._departments)("multiple",!1)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedDept0)("placeholder",g.xc(163,194,"Please choose"))("notFoundText",g.xc(164,196,"Not found item")),g.Nb(6),g.dd(g.xc(169,198,"Standard")),g.Nb(2),g.Cc("items",c.dropdownList)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("bindLabel","en"==c.user.lang?"description_e":"description_l")("ngModel",c.selectedItems)("placeholder",g.xc(171,200,"Please choose"))("notFoundText",g.xc(172,202,"Not found item")),g.Nb(5),g.ed(" ",g.xc(176,204,"Close")," "),g.Nb(2),g.Cc("ngIf",c.isSave),g.Nb(1),g.Cc("ngIf",!c.isSave)}}function jt(e,t){1&e&&g.cc(0,"img",116)}function Xt(e,t){if(1&e){var n=g.ic();g.hc(0,"form",107),g.hc(1,"div",52),g.hc(2,"h4",53),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",54),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",55),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",56),g.hc(9,"div",57),g.hc(10,"div",108),g.hc(11,"div",109),g.hc(12,"input",110,111),g.rc("change",function(e){return g.Tc(n),g.vc().onFileChange(e)}),g.gc(),g.cc(14,"hr",112),g.hc(15,"button",113),g.rc("click",function(){return g.Tc(n),g.vc()._downloadFileSample()}),g.ad(16,jt,1,0,"img",114),g.cd(17),g.wc(18,"translate"),g.gc(),g.hc(19,"button",115),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.cd(20),g.wc(21,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,4,"Import")," "),g.Nb(13),g.Cc("ngIf",c._isLoadingImport),g.Nb(1),g.ed(" ",g.xc(18,6,"Sample file")," "),g.Nb(3),g.ed(" ",g.xc(21,8,"Close")," ")}}function $t(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Processing")))}function Jt(e,t){1&e&&(g.fc(0),g.cd(1),g.wc(2,"translate"),g.ec()),2&e&&(g.Nb(1),g.dd(g.xc(2,1,"Export")))}function Ht(e,t){if(1&e){var n=g.ic();g.hc(0,"form",107),g.hc(1,"div",52),g.hc(2,"h4",53),g.cd(3),g.wc(4,"translate"),g.gc(),g.hc(5,"button",54),g.rc("click",function(){return g.Tc(n),g.vc().closeModal()}),g.hc(6,"span",55),g.cd(7,"\xd7"),g.gc(),g.gc(),g.gc(),g.hc(8,"div",56),g.hc(9,"div",57),g.hc(10,"div",108),g.hc(11,"ng-select",117),g.rc("ngModelChange",function(e){return g.Tc(n),g.vc().selectedCatMatrix=e}),g.wc(12,"translate"),g.wc(13,"translate"),g.gc(),g.gc(),g.hc(14,"div",118),g.cc(15,"br"),g.hc(16,"button",119),g.rc("click",function(){return g.Tc(n),g.vc()._processExport()}),g.ad(17,$t,3,3,"ng-container",29),g.ad(18,Jt,3,3,"ng-container",29),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&e){var c=g.vc();g.Nb(3),g.ed(" ",g.xc(4,10,"Export")," "),g.Nb(8),g.Cc("items",c._categories)("multiple",!0)("closeOnSelect",!1)("searchable",!0)("ngModel",c.selectedCatMatrix)("placeholder",g.xc(12,12,"Please choose"))("notFoundText",g.xc(13,14,"Not found item")),g.Nb(6),g.Cc("ngIf",c.isExportLoading),g.Nb(1),g.Cc("ngIf",!c.isExportLoading)}}var Zt,Wt,en,tn=[{path:"",children:[{path:"sample-matrix",component:ht,data:{title:"Sample Matrix - Test",breadcrumb:"Sample Matrix - Test"}},{path:"category-matrix",component:Re,data:{title:"Matrix Category",breadcrumb:"Matrix Category"}},{path:"para-assignment",component:Xe,data:{title:"Parameter Assignment",breadcrumb:"Parameter Assignment"}},{path:"testing-declaration",component:(Zt=function(){function t(e,n,c,i,r,o,l){a(this,t),this._authenService=e,this.modalService=n,this._dataService=c,this._route=i,this._notifyService=r,this._uploadService=o,this._excelService=l,this.isSave=!1,this._flagModal="",this._isEdit=!1,this.pageIndex=1,this.pageSize=25,this.pageDisplay=10,this.totalRow=0,this._isLoading=!1,this._keyword="",this._testinglists=[],this.entity={},this.baseFolder=C.a.BASE_API+"/",this.entityUpload={},this.formData=new FormData,this._isLoadingImport=!1,this._samplelist=[],this._status=!1,this._standards=[],this.selectedCatTestFather0=null,this.selectedCatCSP0=null,this.selectedCatPL0=null,this.selectedDept0=null,this._catcsp=[],this._catpl=[],this._cattestfather=[],this._departments=[],this.selectedItems=[],this.dropdownList=[],this._categories=[],this.selectedCatMatrix=null,this.isExportLoading=!1,!1!==e.checkAccess("TEST_DECLARE")&&!1!==e.hasPermission("TEST_DECLARE","read")||this._route.navigate(["/error/404"]),this.socket=N()(C.a.BASE_API)}return c(t,[{key:"ngOnInit",value:function(){var e=this;this.user=this._authenService.getLoggedInUser(),this.loadData(),this.loadStandardList(null),this.loadCatCSP(),this.loadCatPL(),this.loadCatTestFather(),this.loadDept(),this.socket.on("refreshPage",function(t){e.loadData(),e.loadCatCSP(),e.loadCatPL(),e.loadCatTestFather(),e.loadDept(),""!=e.entity.id&&null!=e.entity.id&&null!=e.entity.id&&e.loadDetail(e.entity.id)})}},{key:"loadSampleCategory",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.category_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._categories=a})}},{key:"loadData",value:function(){var e=this;this._isLoading=!0;var t={};t.page=this.pageIndex,t.limit=this.pageSize,t.filter=this._keyword,t.domain=this.user.short_code,this._dataService.post("/sample_matrix/getalltestingdecl",t).subscribe(function(t){console.log(t),e._testinglists=t.data,e.totalRow=t.rowCount,e.totalPage=t.totalPages,e._isLoading=!1})}},{key:"_pageSizeChange",value:function(e){this.pageSize=e.target.value,this.socket.emit("refresh",{})}},{key:"pageChanged",value:function(e){this.pageIndex=e.page,this.socket.emit("refresh",{})}},{key:"loadDetail",value:function(e){var t=this,n={};n.id=e,this._dataService.post("/sample_matrix/detailTestingDecl",n).subscribe(function(e){console.log("Detail",e.data),t.entity=e.data,t.selectedCatCSP0=e.data.csp_id,t.selectedCatPL0=e.data.pl_id,t.selectedCatTestFather0=e.data.code_father,t.selectedDept0=e.data.department_id,null==e.data.reform&&(t._status=!1),t._standards=null==e.data.standards||""==e.data.standards?[]:JSON.parse(e.data.standards),t.loadStandardList(t._standards)})}},{key:"onlySelectFather",value:function(e){}},{key:"updateStatus",value:function(e){var t=this;e.is_active=!e.is_active,this._dataService.post("/sample_matrix/updatePara",e).subscribe(function(e){t.socket.emit("refresh",{}),t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK")})}},{key:"loadCatCSP",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriescspnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.csp_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._catcsp=a})}},{key:"loadCatPL",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcategoriesplnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.pl_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._catpl=a})}},{key:"loadCatTestFather",value:function(){var t=this,n={};n.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallcatbytestfather",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({code:r.code})}}catch(o){i.e(o)}finally{i.f()}t._cattestfather=a})}},{key:"loadDept",value:function(){var t=this,n={};n.short_code=this.user.short_code,this._dataService.post("/dept/getallnopaging",n).subscribe(function(n){var c,a=[],i=e(n.data);try{for(i.s();!(c=i.n()).done;){var r=c.value;a.push({name:r.dept_name_l,code:r.id})}}catch(o){i.e(o)}finally{i.f()}t._departments=a})}},{key:"deleteItem",value:function(e){var t=this;this.entity={},k.a.fire({title:"en"==this.user.lang?I.a.are_you_sure_en:I.a.are_you_sure,text:"en"==this.user.lang?e.specification_name_e:e.specification_name_l,icon:"warning",showCancelButton:!0,cancelButtonText:"en"==this.user.lang?I.a.cancel_en:I.a.cancel,confirmButtonText:"en"==this.user.lang?I.a.confirmtext_en:I.a.confirmtext}).then(function(n){if(n.value){var c={};c.id=e.id;var a={};a.parameter_id=e.id,t._dataService.post("/sample_matrix/deletePara",c).subscribe(function(e){t.deleteTesting(a),t._notifyService.showSuccess("en"==t.user.lang?I.a.MSG_DELETE_EN:I.a.MSG_DELETE,"OK"),t.socket.emit("refresh",{})},function(){t._notifyService.showError("en"==t.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==t.user.lang?I.a.error_title_en:I.a.error_title)})}})}},{key:"deleteTesting",value:function(e){this._dataService.post("/sample_matrix/deleteTestingDecl",e).subscribe(function(e){})}},{key:"_updatePara",value:function(e){e.short_code=null==e.short_code||""==e.short_code?this.user.short_code:e.short_code,this._dataService.post("/sample_matrix/updatePara",e).subscribe(function(e){})}},{key:"_updateTesting",value:function(e){this._dataService.post("/sample_matrix/updateTestingDecl",e).subscribe(function(e){})}},{key:"saveChange",value:function(t,n,c,a){var i=this;if(this.isSave=!0,this.entity.reform=this._status,this.entity.csp_id=t,this.entity.pl_id=n,this.entity.code_father=c,this.entity.department_id=a,"ADD"==this._flagModal){this.entity.short_code=this.user.short_code;var r={};r.unit=this.entity.unit,r.unit_en=this.entity.unit_en,r.tat=this.entity.tat,r.reform=this.entity.reform,r.note_e=this.entity.note_e,r.note_l=this.entity.note_l,r.price=this.entity.price;var o,l=[],s=e(this.selectedItems);try{for(s.s();!(o=s.n()).done;){var d=o.value;l.push({id:d})}}catch(v){s.e(v)}finally{s.f()}r.standards=JSON.stringify(l),r.department_id=this.entity.department_id;var h={};h.code=this.entity.code,h.code_father=this.entity.code_father,h.specification_name_e=this.entity.specification_name_e,h.specification_name_l=this.entity.specification_name_l,h.specification_ex_name_e=this.entity.specification_ex_name_e,h.specification_ex_name_l=this.entity.specification_ex_name_l,h.method=this.entity.method,h.method_en=this.entity.method_en,h.para_name_e=this.entity.para_name_e,h.para_name_l=this.entity.para_name_l,h.short_code=this.user.short_code,h.csp_id=this.entity.csp_id,h.pl_id=this.entity.pl_id,h.is_active=!0,this._dataService.post("/sample_matrix/addPara",h).subscribe(function(e){"ok"==e.result?(r.parameter_id=e.data.id,i._updateTesting(r),i.socket.emit("refresh",{}),i._notifyService.showSuccess("en"==i.user.lang?I.a.MSG_ADD_EN:I.a.MSG_ADD,"OK"),i.entity={},i.isSave=!1,i.modalService.dismissAll()):(i.isSave=!1,i._notifyService.showWarning("en"==i.user.lang?I.a.MSG_ADDNO_EN:I.a.MSG_ADDNO,"en"==i.user.lang?I.a.error_title_en:I.a.error_title))},function(){i.isSave=!1,i._notifyService.showError("en"==i.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==i.user.lang?I.a.error_title_en:I.a.error_title)})}else{this.entity.short_code=null==this.entity.short_code||""==this.entity.short_code?this.user.short_code:this.entity.short_code;var g={};g.parameter_id=this.entity.id,g.unit=this.entity.unit,g.unit_en=this.entity.unit_en,g.tat=this.entity.tat,g.reform=this.entity.reform,g.note_e=this.entity.note_e,g.note_l=this.entity.note_l,g.price=this.entity.price;var u,f=[],p=e(this.selectedItems);try{for(p.s();!(u=p.n()).done;){var m=u.value;f.push({id:m})}}catch(v){p.e(v)}finally{p.f()}g.standards=JSON.stringify(f),g.department_id=this.entity.department_id;var _={};_.id=this.entity.id,_.code=this.entity.code,_.code_father=this.entity.code_father,_.specification_name_e=this.entity.specification_name_e,_.specification_name_l=this.entity.specification_name_l,_.specification_ex_name_e=this.entity.specification_ex_name_e,_.specification_ex_name_l=this.entity.specification_ex_name_l,_.method=this.entity.method,_.method_en=this.entity.method_en,_.para_name_e=this.entity.para_name_e,_.para_name_l=this.entity.para_name_l,_.short_code=this.entity.short_code,_.csp_id=this.entity.csp_id,_.pl_id=this.entity.pl_id,this._dataService.post("/sample_matrix/updateTestingDecl",g).subscribe(function(e){i.isSave=!1,i.socket.emit("refresh",{}),i._notifyService.showSuccess("en"==i.user.lang?I.a.MSG_UPDATE_EN:I.a.MSG_UPDATE,"OK"),i._updatePara(_),i.modalService.dismissAll()},function(){i.isSave=!1,i._notifyService.showError("en"==i.user.lang?I.a.MSG_ERROR_EN:I.a.MSG_ERROR,"en"==i.user.lang?I.a.error_title_en:I.a.error_title)})}}},{key:"_openModal",value:function(e,t){null==t?(this._flagModal="ADD",this.entity={},this.selectedCatCSP0=null,this.selectedCatPL0=null,this.selectedCatTestFather0=null,this.selectedDept0=null,this.selectedItems=[]):(this.loadDetail(t.id),this._flagModal="UPDATE"),this.modalService.open(e,{size:"lg",centered:!0})}},{key:"loadStandardList",value:function(t){var n=this,c={};c.domain=this.user.short_code,this._dataService.post("/sample_matrix/getallstandardsnopaging",c).subscribe(function(c){console.log(t);var a=[];if(null!=t){var i,r=e(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;a.push(null==o.id?o:o.id)}}catch(l){r.e(l)}finally{r.f()}}n.selectedItems=a,n.dropdownList=c.data.filter(function(e){return e.is_active})})}},{key:"_uploadPopup",value:function(e){this.modalService.open(e,{size:"md",centered:!0})}},{key:"onFileChange",value:function(e){var t=this,n=null,c=null,a=new FileReader,i=e.target.files[0];if(void 0===i||void 0===i.name)e.target.value=null,this._notifyService.showError("en"==this.user.lang?I.a.recheck_file_en:I.a.recheck_file,"en"==this.user.lang?I.a.error_title_en:I.a.error_title);else{var r=i.name.split(".").pop();"xls"===r||"xlsx"===r?(a.onload=function(i){n=ye.read(a.result,{type:"binary"}),c=n.SheetNames.reduce(function(e,t){return e[t]=ye.utils.sheet_to_json(n.Sheets[t]),e},{}),e.target.value=null,t.setUpload(c.Sheet1)},a.readAsBinaryString(i)):(this._notifyService.showError("en"==this.user.lang?I.a.format_incorrect_en:I.a.format_incorrect,"en"==this.user.lang?I.a.error_title_en:I.a.error_title),e.target.value=null)}}},{key:"_downloadFileSample",value:function(){window.location.href=C.a.BASE_URL+"/assets/uploads/sample_declare_parameter.xlsx"}},{key:"setUpload",value:function(e){var t=this,n={};n.paralist=e,n.domain=this.user.short_code,n.ipaddress=this.user.ipaddress,n.userid=this.user.id,this._isLoadingImport=!0,this._dataService.post("/sample_matrix/addTestDeclareList",n).subscribe(function(e){e.data_error.length>0&&t._excelService.exportAsExcelFile(e.data_error,"ErrorParaAssignment-"+T(new Date).format("YYYY-MM-DD")),e.count>0&&t._notifyService.showSuccess("en"==t.user.lang?e.count+" "+I.a.MSG_UPDATE_RECORD_EN:e.count+" "+I.a.MSG_UPDATE_RECORD,"OK"),t._isLoadingImport=!1,t.socket.emit("refresh",{})},function(e){t._isLoadingImport=!1,console.log(e)})}},{key:"_exportAll",value:function(e){this.loadSampleCategory(),this.isExportLoading=!1,this.modalService.open(e,{size:"md",centered:!0})}},{key:"_processExport",value:function(){var e=this;this.isExportLoading=!0,this._dataService.post("/sample_matrix/exportTest",this.selectedCatMatrix).subscribe(function(t){t.data.length>0?(e._excelService.exportAsExcelFile(t.data,"TestDeclaration-"+T(new Date).format("YYYY-MM-DD")),e.isExportLoading=!1,e._notifyService.showSuccess("en"==e.user.lang?I.a.MSG_EXPORT_EN+" "+t.data.length+I.a.record_en:I.a.MSG_EXPORT+" "+t.data.length+I.a.record,"OK")):(e.isExportLoading=!1,e._notifyService.showWarning("en"==e.user.lang?I.a.MSG_EXPORT_EN+" 0"+I.a.record_en:I.a.MSG_EXPORT+" 0"+I.a.record,"en"==e.user.lang?I.a.error_title_en:I.a.error_title)),e.selectedCatMatrix=null,e.modalService.dismissAll()},function(){e.isExportLoading=!1,e.selectedCatMatrix=null,e._notifyService.showError("en"==e.user.lang?I.a.MSG_EXPORTNO_EN:I.a.MSG_EXPORT_NO,"en"==e.user.lang?I.a.error_title_en:I.a.error_title),e.modalService.dismissAll()})}},{key:"closeModal",value:function(){this.modalService.dismissAll(),this.socket.emit("refresh",{})}}]),t}(),Zt.\u0275fac=function(e){return new(e||Zt)(g.bc(h.a),g.bc(P.s),g.bc(d.a),g.bc(S.d),g.bc(R.a),g.bc(s.a),g.bc(l.a))},Zt.\u0275cmp=g.Vb({type:Zt,selectors:[["app-testing-declaration"]],decls:101,vars:88,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"col-sm-12","col-lg-12","col-xl-8"],[1,"col-md-12","form-inline"],["type","search","name","keyword","autocomplete","off",1,"form-control","form-control-sm","mr-sm-2",3,"placeholder","ngModel","ngModelChange","change","keyup.enter"],[1,"btn","btn-sm","btn-info","mr-sm-2",3,"click"],["class","btn btn-sm btn-warning mr-sm-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-success mr-sm-1",3,"click",4,"ngIf"],[1,"col-sm-12","col-lg-12","col-xl-4"],[1,"form-inline",2,"float","right"],["id","select3","name","select3",1,"custom-select","form-control-sm","mr-sm-2",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"card-block","row"],[1,"col-sm-12","col-lg-12","col-xl-12"],[1,"form-inline"],[1,"col-sm-12","col-lg-12","col-xl-6"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb","name","paginationss1",1,"pagination-sm",3,"boundaryLinks","totalItems","ngModel","maxSize","itemsPerPage","ngModelChange","pageChanged"],[1,"col-sm-12","col-lg-12","col-xl-6",2,"text-align","right"],[1,"btn","btn-sm"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-primary"],["scope","col"],[4,"ngIf"],["content",""],["contentImport",""],["contentExport",""],[1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],[1,"fa","fa-cloud-upload"],[1,"btn","btn-sm","btn-success","mr-sm-1",3,"click"],[1,"fa","fa-cloud-download"],["colspan","13",2,"text-align","center"],[1,"text-danger"],[4,"ngFor","ngForOf"],["scope","row"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-times-circle text-danger",4,"ngIf"],[2,"text-align","center","cursor","pointer",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","mr-sm-1",3,"ngbTooltip","disabled","click"],[1,"fa","fa-pencil"],["type","button",1,"btn","btn-sm","btn-danger",3,"ngbTooltip","disabled","click"],[1,"fa","fa-trash"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-times-circle","text-danger"],[1,"form","theme-form",3,"ngSubmit"],["form","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],[1,"col-md-3"],[1,"form-group"],["for","code"],["type","text","id","code","name","code","autocomplete","off","required","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","code_father"],["name","selectedCatTestFather0","bindValue","code","bindLabel","code",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-6"],["for","price"],["type","text","id","price","name","price","autocomplete","off","min","0","mask","separator.2","thousandSeparator",",",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_name_l"],["type","text","id","specification_name_l","name","specification_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_name_e"],["type","text","id","specification_name_e","name","specification_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_ex_name_l"],["type","text","id","specification_ex_name_l","name","specification_ex_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","specification_ex_name_e"],["type","text","id","specification_ex_name_e","name","specification_ex_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","para_name_l"],["type","text","id","para_name_l","name","para_name_l","required","","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","para_name_e"],["type","text","id","para_name_e","name","para_name_e","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","selectedCatCSP0"],["name","selectedCatCSP0","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","selectedCatPL0"],["name","selectedCatPL0","bindValue","code","bindLabel","name","required","",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","method"],["type","text","id","method","name","method","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","method_en"],["type","text","id","method_en","name","method_en","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","unit1"],["type","text","id","unit1","name","unit1","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","unit2"],["type","text","id","unit2","name","unit2","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","tat"],["type","text","id","tat","name","tat","autocomplete","off",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["for","reform"],[1,"checkbox","checkbox-primary"],["id","Status","type","checkbox","name","Status",3,"ngModel","ngModelChange"],["for","Status"],["for","selectedDept0"],["name","selectedDept0","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],["for","selectedItems"],["name","selectedItems","bindValue","id",3,"items","multiple","closeOnSelect","searchable","bindLabel","ngModel","placeholder","notFoundText","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["href","javascript:;",1,"btn","btn-primary","mr-sm-1"],["src","../../../../assets/img/loading.gif","width","15px"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form","theme-form"],[1,"col-md-12"],[2,"text-align","center"],["name","fileUpload","type","file","id","upload",1,"form-control",3,"change"],["fileUpload",""],[1,"mt-2"],["type","button",1,"btn","btn-sm","btn-warning","mr-sm-1",3,"click"],["src","../../../../assets/img/circles.svg","width","17px","class","mr-sm-1",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["src","../../../../assets/img/circles.svg","width","17px",1,"mr-sm-1"],["name","selectedCatMatrix","bindValue","code","bindLabel","name",3,"items","multiple","closeOnSelect","searchable","ngModel","placeholder","notFoundText","ngModelChange"],[1,"col-md-12",2,"text-align","center"],[1,"btn","btn-sm","btn-warning",3,"click"]],template:function(e,t){if(1&e){var n=g.ic();g.hc(0,"div",0),g.hc(1,"div",1),g.hc(2,"div",2),g.hc(3,"div",3),g.hc(4,"div",4),g.hc(5,"div",1),g.hc(6,"div",5),g.hc(7,"div",6),g.hc(8,"input",7),g.rc("ngModelChange",function(e){return t._keyword=e})("change",function(){return t.loadData()})("keyup.enter",function(){return t.loadData()}),g.wc(9,"translate"),g.gc(),g.hc(10,"button",8),g.rc("click",function(){g.Tc(n);var e=g.Qc(96);return t._openModal(e,null)}),g.cd(11),g.wc(12,"translate"),g.gc(),g.ad(13,Dt,4,3,"button",9),g.ad(14,Bt,4,3,"button",10),g.gc(),g.gc(),g.hc(15,"div",11),g.hc(16,"div",12),g.hc(17,"select",13),g.rc("ngModelChange",function(e){return t.pageSize=e})("change",function(e){return t._pageSizeChange(e)}),g.hc(18,"option",14),g.cd(19,"#10"),g.gc(),g.hc(20,"option",15),g.cd(21,"#25"),g.gc(),g.hc(22,"option",16),g.cd(23,"#50"),g.gc(),g.hc(24,"option",17),g.cd(25,"#100"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(26,"div",18),g.hc(27,"div",19),g.hc(28,"div",20),g.hc(29,"div",21),g.hc(30,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(31,"div",23),g.hc(32,"a",24),g.cd(33),g.wc(34,"translate"),g.wc(35,"translate"),g.wc(36,"translate"),g.wc(37,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(38,"div",19),g.hc(39,"div",25),g.hc(40,"table",26),g.hc(41,"thead",27),g.hc(42,"tr"),g.hc(43,"th",28),g.cd(44,"#"),g.gc(),g.hc(45,"th",28),g.cd(46),g.wc(47,"translate"),g.gc(),g.hc(48,"th",28),g.cd(49),g.wc(50,"translate"),g.gc(),g.hc(51,"th",28),g.cd(52),g.wc(53,"translate"),g.gc(),g.hc(54,"th",28),g.cd(55),g.wc(56,"translate"),g.gc(),g.hc(57,"th",28),g.cd(58),g.wc(59,"translate"),g.gc(),g.hc(60,"th",28),g.cd(61),g.wc(62,"translate"),g.gc(),g.hc(63,"th",28),g.cd(64),g.wc(65,"translate"),g.gc(),g.hc(66,"th",28),g.cd(67),g.wc(68,"translate"),g.gc(),g.hc(69,"th",28),g.cd(70),g.wc(71,"translate"),g.gc(),g.hc(72,"th",28),g.cd(73),g.wc(74,"translate"),g.gc(),g.hc(75,"th",28),g.cd(76),g.wc(77,"translate"),g.gc(),g.hc(78,"th",28),g.cd(79),g.wc(80,"translate"),g.gc(),g.gc(),g.gc(),g.hc(81,"tbody"),g.ad(82,Ot,6,3,"ng-container",29),g.ad(83,Qt,2,1,"ng-container",29),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(84,"div",19),g.hc(85,"div",20),g.hc(86,"div",21),g.hc(87,"pagination",22),g.rc("ngModelChange",function(e){return t.pageIndex=e})("pageChanged",function(e){return t.pageChanged(e)}),g.gc(),g.gc(),g.hc(88,"div",23),g.hc(89,"a",24),g.cd(90),g.wc(91,"translate"),g.wc(92,"translate"),g.wc(93,"translate"),g.wc(94,"translate"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.ad(95,qt,179,206,"ng-template",null,30,g.bd),g.ad(97,Xt,22,10,"ng-template",null,31,g.bd),g.ad(99,Ht,19,16,"ng-template",null,32,g.bd)}2&e&&(g.Nb(8),g.Cc("placeholder",g.xc(9,44,"Search"))("ngModel",t._keyword),g.Nb(3),g.ed(" ",g.xc(12,46,"Add new")," "),g.Nb(2),g.Cc("ngIf",t._authenService.hasPermission("TEST_DECLARE","update")),g.Nb(1),g.Cc("ngIf",t._authenService.hasPermission("TEST_DECLARE","report")),g.Nb(3),g.Cc("ngModel",t.pageSize),g.Nb(13),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(34,48,"Total of records"),": ",t.totalRow," - ",g.xc(35,50,"Page")," ",t.pageIndex," ",g.xc(36,52,"of")," ",t.totalPage," ",g.xc(37,54,"page"),""),g.Nb(13),g.ed(" ",g.xc(47,56,"Test code")," "),g.Nb(3),g.ed(" ",g.xc(50,58,"Test father code")," "),g.Nb(3),g.ed(" ",g.xc(53,60,"Internal testing")," "),g.Nb(3),g.ed("",g.xc(56,62,"Category")," CSP"),g.Nb(3),g.ed("",g.xc(59,64,"Category")," PL"),g.Nb(3),g.dd(g.xc(62,66,"Unit")),g.Nb(3),g.dd(g.xc(65,68,"Method")),g.Nb(3),g.dd(g.xc(68,70,"TAT")),g.Nb(3),g.dd(g.xc(71,72,"Reform")),g.Nb(3),g.dd(g.xc(74,74,"Note")),g.Nb(3),g.dd(g.xc(77,76,"Status")),g.Nb(3),g.dd(g.xc(80,78,"Actions")),g.Nb(3),g.Cc("ngIf",0==t._testinglists.length),g.Nb(1),g.Cc("ngIf",t._testinglists.length>0),g.Nb(4),g.Cc("boundaryLinks",!0)("totalItems",t.totalRow)("ngModel",t.pageIndex)("maxSize",t.pageDisplay)("itemsPerPage",t.pageSize),g.Nb(3),g.gd("",g.xc(91,80,"Total of records"),": ",t.totalRow," - ",g.xc(92,82,"Page")," ",t.pageIndex," ",g.xc(93,84,"of")," ",t.totalPage," ",g.xc(94,86,"page"),""))},directives:[w.b,w.m,w.p,o.q,w.w,w.q,w.y,_.a,o.p,P.N,w.z,w.n,w.o,w.v,A.a,Lt.a,w.a],pipes:[L.c],styles:[""]}),Zt),data:{title:"Testing Declaration",breadcrumb:"Testing Declaration"}},{path:"customers",component:le,data:{title:"Customers",breadcrumb:"Customers"}},{path:"standards",component:be,data:{title:"Standards",breadcrumb:"Standards"}},{path:"test-family-csp",component:St,data:{title:"Test Family CSP",breadcrumb:"Test Family CSP"}},{path:"test-family-pl",component:At,data:{title:"Test Family PL",breadcrumb:"Test Family PL"}}]}],nn=((Wt=function e(){a(this,e)}).\u0275mod=g.Zb({type:Wt}),Wt.\u0275inj=g.Yb({factory:function(e){return new(e||Wt)},imports:[[S.h.forChild(tn)],S.h]}),Wt),cn=i("arFO"),an=null,rn=((en=function e(){a(this,e)}).\u0275mod=g.Zb({type:en}),en.\u0275inj=g.Yb({factory:function(e){return new(e||en)},providers:[h.a,d.a,s.a,l.a,L.d],imports:[[o.c,w.j,nn,x.a,y.b,L.b,b.a,v.c.forRoot(),_.b.forRoot(),m.a.forRoot(),p.a.forRoot(),f.a,u,cn.a,P.u,A.b,Lt.b.forRoot()]]}),en)},"7uVY":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},AZa5:function(e,t,n){var c=n("Wogr"),a=n("u/Db");function i(e){this.mode=a.BYTE,this.data=c.from(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=i},BCVQ:function(e,t){var n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",c="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(c,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var a=new RegExp("^"+n+"$"),i=new RegExp("^[0-9]+$"),r=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return r.test(e)}},ELBg:function(e,t,n){"use strict";var c={single_source_shortest_paths:function(e,t,n){var a={},i={};i[t]=0;var r,o,l,s,d,h,g=c.PriorityQueue.make();for(g.push(t,0);!g.empty();)for(l in s=(r=g.pop()).cost,d=e[o=r.value]||{})d.hasOwnProperty(l)&&(h=s+d[l],(void 0===i[l]||i[l]>h)&&(i[l]=h,g.push(l,h),a[l]=o));if(void 0!==n&&void 0===i[n]){var u=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(u)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],c=t;c;)n.push(c),c=e[c];return n.reverse(),n},find_path:function(e,t,n){var a=c.single_source_shortest_paths(e,t,n);return c.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var t,n=c.PriorityQueue,a={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=c},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=s(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,c=s(e),r=c[0],o=c[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),d=0,h=o>0?r-4:r;for(n=0;n<h;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[d++]=255&t),1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],r=0,o=n-a;r<o;r+=16383)i.push(d(e,r,r+16383>o?o:r+16383));return 1===a?i.push(c[(t=e[n-1])>>2]+c[t<<4&63]+"=="):2===a&&i.push(c[(t=(e[n-2]<<8)+e[n-1])>>10]+c[t>>4&63]+c[t<<2&63]+"="),i.join("")};for(var c=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=r.length;o<l;++o)c[o]=r[o],a[r.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var a,i=[],r=t;r<n;r+=3)i.push(c[(a=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]))>>18&63]+c[a>>12&63]+c[a>>6&63]+c[63&a]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},J6Nv:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},JzKC:function(e,t,n){var c=n("Wogr"),a=n("aZ40");t.mul=function(e,t){for(var n=c.alloc(e.length+t.length-1),i=0;i<e.length;i++)for(var r=0;r<t.length;r++)n[i+r]^=a.mul(e[i],t[r]);return n},t.mod=function(e,t){for(var n=c.from(e);n.length-t.length>=0;){for(var i=n[0],r=0;r<t.length;r++)n[r]^=a.mul(t[r],i);for(var o=0;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(e){for(var n=c.from([1]),i=0;i<e;i++)n=t.mul(n,[1,a.exp(i)]);return n}},Lzq4:function(e,t,n){var c=n("u/Db"),a=n("e/Dd");function i(e){this.mode=c.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=a.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}e.put(n=192*(n>>>8&255)+(255&n),13)}},e.exports=i},NPxG:function(e,t,n){var c=n("ekOh"),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case c.L:return a[4*(e-1)+0];case c.M:return a[4*(e-1)+1];case c.Q:return a[4*(e-1)+2];case c.H:return a[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case c.L:return i[4*(e-1)+0];case c.M:return i[4*(e-1)+1];case c.Q:return i[4*(e-1)+2];case c.H:return i[4*(e-1)+3];default:return}}},QAZZ:function(e,t,n){var c=n("Rb7d");function a(e,t){var n=e.a/255,c=t+'="'+e.hex+'"';return n<1?c+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':c}function i(e,t,n){var c=e+t;return void 0!==n&&(c+=" "+n),c}t.render=function(e,t,n){var r=c.getOptions(t),o=e.modules.size,l=e.modules.data,s=o+2*r.margin,d=r.color.light.a?"<path "+a(r.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",h="<path "+a(r.color.dark,"stroke")+' d="'+function(e,t,n){for(var c="",a=0,r=!1,o=0,l=0;l<e.length;l++){var s=Math.floor(l%t),d=Math.floor(l/t);s||r||(r=!0),e[l]?(o++,l>0&&s>0&&e[l-1]||(c+=r?i("M",s+n,.5+d+n):i("m",a,0),a=0,r=!1),s+1<t&&e[l+1]||(c+=i("h",o),o=0)):a++}return c}(l,o,r.margin)+'"/>',g='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+'viewBox="0 0 '+s+" "+s+'" shape-rendering="crispEdges">'+d+h+"</svg>\n";return"function"==typeof n&&n(null,g),g}},QUaw:function(e,t,n){var c=n("Rb7d");t.render=function(e,t,n){var a=n,i=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=c.getOptions(a);var r=c.getImageWidth(e.modules.size,a),o=i.getContext("2d"),l=o.createImageData(r,r);return c.qrToImageData(l.data,e,a),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(o,i,r),o.putImageData(l,0,0),i},t.renderToDataURL=function(e,n,c){var a=c;return void 0!==a||n&&n.getContext||(a=n,n=void 0),a||(a={}),t.render(e,n,a).toDataURL(a.type||"image/png",(a.rendererOpts||{}).quality)}},Rb7d:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=e.width&&e.width>=21?e.width:void 0;return{width:t,scale:t?4:e.scale||4,margin:null==e.margin||e.margin<0?4:e.margin,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var c=t.getScale(e,n);return Math.floor((e+2*n.margin)*c)},t.qrToImageData=function(e,n,c){for(var a=n.modules.size,i=n.modules.data,r=t.getScale(a,c),o=Math.floor((a+2*c.margin)*r),l=c.margin*r,s=[c.color.light,c.color.dark],d=0;d<o;d++)for(var h=0;h<o;h++){var g=4*(d*o+h),u=c.color.light;d>=l&&h>=l&&d<o-l&&h<o-l&&(u=s[i[Math.floor((d-l)/r)*a+Math.floor((h-l)/r)]?1:0]),e[g++]=u.r,e[g++]=u.g,e[g++]=u.b,e[g]=u.a}}},V35J:function(e,t,n){var c=n("Wogr");function a(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=c.alloc(e*e),this.reservedBit=c.alloc(e*e)}a.prototype.set=function(e,t,n,c){var a=e*this.size+t;this.data[a]=n,c&&(this.reservedBit[a]=!0)},a.prototype.get=function(e,t){return this.data[e*this.size+t]},a.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},a.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=a},Wogr:function(e,t,n){"use strict";var c=n("7uVY"),a=(i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())?2147483647:1073741823;function i(e,t,n){return i.TYPED_ARRAY_SUPPORT||this instanceof i?"number"==typeof e?l(this,e):function(e,t,n,c){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,c){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(c||0))throw new RangeError("'length' is out of bounds");var a;return a=void 0===n&&void 0===c?new Uint8Array(t):void 0===c?new Uint8Array(t,n):new Uint8Array(t,n,c),i.TYPED_ARRAY_SUPPORT?a.__proto__=i.prototype:a=s(e,a),a}(e,t,n,c):"string"==typeof t?function(e,t){var n=0|h(t),c=o(e,n),a=c.write(t);return a!==n&&(c=c.slice(0,a)),c}(e,t):function(e,t){if(i.isBuffer(t)){var n=0|r(t.length),c=o(e,n);return 0===c.length||t.copy(c,0,0,n),c}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(a=t.length)!=a?o(e,0):s(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return s(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,n):new i(e,t,n)}function r(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function o(e,t){var n;return i.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=i.prototype:(null===(n=e)&&(n=new i(t)),n.length=t),n}function l(e,t){var n=o(e,t<0?0:0|r(t));if(!i.TYPED_ARRAY_SUPPORT)for(var c=0;c<t;++c)n[c]=0;return n}function s(e,t){for(var n=t.length<0?0:0|r(t.length),c=o(e,n),a=0;a<n;a+=1)c[a]=255&t[a];return c}function d(e,t){var n;t=t||1/0;for(var c=e.length,a=null,i=[],r=0;r<c;++r){if((n=e.charCodeAt(r))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(r+1===c){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function h(e){return i.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:d(e).length)}i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),i.prototype.write=function(e,t,n){void 0===t||void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var c=this.length-t;if((void 0===n||n>c)&&(n=c),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,n,c){return function(e,t,n,c){for(var a=0;a<c&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}(d(t,e.length-n),e,n,c)}(this,e,t,n)},i.prototype.slice=function(e,t){var n,c=this.length;if((e=~~e)<0?(e+=c)<0&&(e=0):e>c&&(e=c),(t=void 0===t?c:~~t)<0?(t+=c)<0&&(t=0):t>c&&(t=c),t<e&&(t=e),i.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=i.prototype;else{var a=t-e;n=new i(a,void 0);for(var r=0;r<a;++r)n[r]=this[r+e]}return n},i.prototype.copy=function(e,t,n,c){if(n||(n=0),c||0===c||(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<n&&(c=n),c===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-n&&(c=e.length-t+n);var a,r=c-n;if(this===e&&n<t&&t<c)for(a=r-1;a>=0;--a)e[a+t]=this[a+n];else if(r<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},i.prototype.fill=function(e,t,n){if("string"==typeof e){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===e.length){var c=e.charCodeAt(0);c<256&&(e=c)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var r=i.isBuffer(e)?e:new i(e),o=r.length;for(a=0;a<n-t;++a)this[a+t]=r[a%o]}return this},i.concat=function(e,t){if(!c(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=l(null,t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(a,r),r+=s.length}return a},i.byteLength=h,i.prototype._isBuffer=!0,i.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports.alloc=function(e){var t=new i(e);return t.fill(0),t},e.exports.from=function(e){return new i(e)}},Z92M:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},aZ40:function(e,t,n){var c=n("Wogr"),a=c.alloc(512),i=c.alloc(256);!function(){for(var e=1,t=0;t<255;t++)a[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)a[t]=a[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return a[e]},t.mul=function(e,t){return 0===e||0===t?0:a[i[e]+i[t]]}},"e/Dd":function(e,t){var n,c=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return c[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},e6BP:function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},eQOe:function(e,t){function n(e,n,c){switch(e){case t.Patterns.PATTERN000:return(n+c)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return c%3==0;case t.Patterns.PATTERN011:return(n+c)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(c/3))%2==0;case t.Patterns.PATTERN101:return n*c%2+n*c%3==0;case t.Patterns.PATTERN110:return(n*c%2+n*c%3)%2==0;case t.Patterns.PATTERN111:return(n*c%3+(n+c)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,n=0,c=0,a=0,i=null,r=null,o=0;o<t;o++){c=a=0,i=r=null;for(var l=0;l<t;l++){var s=e.get(o,l);s===i?c++:(c>=5&&(n+=c-5+3),i=s,c=1),(s=e.get(l,o))===r?a++:(a>=5&&(n+=a-5+3),r=s,a=1)}c>=5&&(n+=c-5+3),a>=5&&(n+=a-5+3)}return n},t.getPenaltyN2=function(e){for(var t=e.size,n=0,c=0;c<t-1;c++)for(var a=0;a<t-1;a++){var i=e.get(c,a)+e.get(c,a+1)+e.get(c+1,a)+e.get(c+1,a+1);4!==i&&0!==i||n++}return 3*n},t.getPenaltyN3=function(e){for(var t=e.size,n=0,c=0,a=0,i=0;i<t;i++){c=a=0;for(var r=0;r<t;r++)c=c<<1&2047|e.get(i,r),r>=10&&(1488===c||93===c)&&n++,a=a<<1&2047|e.get(r,i),r>=10&&(1488===a||93===a)&&n++}return 40*n},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,c=0;c<n;c++)t+=e.data[c];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(e,t){for(var c=t.size,a=0;a<c;a++)for(var i=0;i<c;i++)t.isReserved(i,a)||t.xor(i,a,n(e,i,a))},t.getBestMask=function(e,n){for(var c=Object.keys(t.Patterns).length,a=0,i=1/0,r=0;r<c;r++){n(r),t.applyMask(r,e);var o=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(r,e),o<i&&(i=o,a=r)}return a}},ekOh:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(c){return n}}},jSPq:function(e,t,n){var c=n("Wogr"),a=n("JzKC"),i=n("tjlA").Buffer;function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=a.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=c.alloc(this.degree),n=i.concat([e,t],e.length+this.degree),r=a.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){var l=c.alloc(this.degree);return r.copy(l,o),l}return r},e.exports=r},"kVK+":function(e,t){t.read=function(e,t,n,c,a){var i,r,o=8*a-c-1,l=(1<<o)-1,s=l>>1,d=-7,h=n?a-1:0,g=n?-1:1,u=e[t+h];for(h+=g,i=u&(1<<-d)-1,u>>=-d,d+=o;d>0;i=256*i+e[t+h],h+=g,d-=8);for(r=i&(1<<-d)-1,i>>=-d,d+=c;d>0;r=256*r+e[t+h],h+=g,d-=8);if(0===i)i=1-s;else{if(i===l)return r?NaN:1/0*(u?-1:1);r+=Math.pow(2,c),i-=s}return(u?-1:1)*r*Math.pow(2,i-c)},t.write=function(e,t,n,c,a,i){var r,o,l,s=8*i-a-1,d=(1<<s)-1,h=d>>1,g=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,u=c?0:i-1,f=c?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,r=d):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+h>=1?g/l:g*Math.pow(2,1-h))*l>=2&&(r++,l/=2),r+h>=d?(o=0,r=d):r+h>=1?(o=(t*l-1)*Math.pow(2,a),r+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),r=0));a>=8;e[n+u]=255&o,u+=f,o/=256,a-=8);for(r=r<<a|o,s+=a;s>0;e[n+u]=255&r,u+=f,r/=256,s-=8);e[n+u-f]|=128*p}},"kk9/":function(e,t,n){var c=n("e/Dd").getSymbolSize;t.getPositions=function(e){var t=c(e);return[[0,0],[t-7,0],[0,t-7]]}},lYJp:function(e,t,n){var c=n("e/Dd"),a=c.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,i=n<<10;c.getBCHDigit(i)-a>=0;)i^=1335<<c.getBCHDigit(i)-a;return 21522^(n<<10|i)}},nZSm:function(e,t,n){var c=n("u/Db"),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=c.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*a.indexOf(this.data[t]);n+=a.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=i},qmMu:function(e,t,n){var c=n("Wogr"),a=n("e/Dd"),i=n("ekOh"),r=n("e6BP"),o=n("V35J"),l=n("1sBl"),s=n("kk9/"),d=n("eQOe"),h=n("NPxG"),g=n("jSPq"),u=n("yKow"),f=n("lYJp"),p=n("u/Db"),m=n("vvrf"),_=n("7uVY");function v(e,t,n){var c,a,i=e.size,r=f.getEncodedBits(t,n);for(c=0;c<15;c++)e.set(c<6?c:c<8?c+1:i-15+c,8,a=1==(r>>c&1),!0),e.set(8,c<8?i-c-1:c<9?15-c-1+1:15-c-1,a,!0);e.set(i-8,8,1,!0)}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,f,b=i.M;return void 0!==t&&(b=i.from(t.errorCorrectionLevel,i.M),n=u.from(t.version),f=d.from(t.maskPattern),t.toSJISFunc&&a.setToSJISFunction(t.toSJISFunc)),function(e,t,n,i){var f;if(_(e))f=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var b=t;if(!b){var y=m.rawSplit(e);b=u.getBestVersionForData(y,n)}f=m.fromString(e,b||40)}var x=u.getBestVersionForData(f,n);if(!x)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<x)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+x+".\n")}else t=x;var w=function(e,t,n){var i=new r;n.forEach(function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)});var o=8*(a.getSymbolTotalCodewords(e)-h.getTotalCodewordsCount(e,t));for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);for(var l=(o-i.getLengthInBits())/8,s=0;s<l;s++)i.put(s%2?17:236,8);return function(e,t,n){for(var i=a.getSymbolTotalCodewords(t),r=i-h.getTotalCodewordsCount(t,n),o=h.getBlocksCount(t,n),l=o-i%o,s=Math.floor(i/o),d=Math.floor(r/o),u=d+1,f=s-d,p=new g(f),m=0,_=new Array(o),v=new Array(o),b=0,y=c.from(e.buffer),x=0;x<o;x++){var w=x<l?d:u;_[x]=y.slice(m,m+w),v[x]=p.encode(_[x]),m+=w,b=Math.max(b,w)}var S,C,M=c.alloc(i),N=0;for(S=0;S<b;S++)for(C=0;C<o;C++)S<_[C].length&&(M[N++]=_[C][S]);for(S=0;S<f;S++)for(C=0;C<o;C++)M[N++]=v[C][S];return M}(i,e,t)}(t,n,f),S=a.getSymbolSize(t),C=new o(S);return function(e,t){for(var n=e.size,c=s.getPositions(t),a=0;a<c.length;a++)for(var i=c[a][0],r=c[a][1],o=-1;o<=7;o++)if(!(i+o<=-1||n<=i+o))for(var l=-1;l<=7;l++)r+l<=-1||n<=r+l||e.set(i+o,r+l,o>=0&&o<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===o||6===o)||o>=2&&o<=4&&l>=2&&l<=4,!0)}(C,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var c=n%2==0;e.set(n,6,c,!0),e.set(6,n,c,!0)}}(C),function(e,t){for(var n=l.getPositions(t),c=0;c<n.length;c++)for(var a=n[c][0],i=n[c][1],r=-2;r<=2;r++)for(var o=-2;o<=2;o++)e.set(a+r,i+o,-2===r||2===r||-2===o||2===o||0===r&&0===o,!0)}(C,t),v(C,n,0),t>=7&&function(e,t){for(var n,c,a,i=e.size,r=u.getEncodedBits(t),o=0;o<18;o++)n=Math.floor(o/3),e.set(n,c=o%3+i-8-3,a=1==(r>>o&1),!0),e.set(c,n,a,!0)}(C,t),function(e,t){for(var n=e.size,c=-1,a=n-1,i=7,r=0,o=n-1;o>0;o-=2)for(6===o&&o--;;){for(var l=0;l<2;l++)if(!e.isReserved(a,o-l)){var s=!1;r<t.length&&(s=1==(t[r]>>>i&1)),e.set(a,o-l,s),-1==--i&&(r++,i=7)}if((a+=c)<0||n<=a){a-=c,c=-c;break}}}(C,w),isNaN(i)&&(i=d.getBestMask(C,v.bind(null,C,n))),d.applyMask(i,C),v(C,n,i),{modules:C,version:t,errorCorrectionLevel:n,maskPattern:i,segments:f}}(e,n,b,f)}},tjlA:function(e,t,n){"use strict";var c=n("H7XF"),a=n("kVK+"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function r(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),c=r(n),a=c.write(e,t);return a!==n&&(c=c.slice(0,a)),c}(e,t);if(ArrayBuffer.isView(e))return function(e){if(F(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return g(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(F(e,SharedArrayBuffer)||e&&F(e.buffer,SharedArrayBuffer)))return g(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return o.from(c,t,n);var a=function(e){if(o.isBuffer(e)){var t=0|u(e.length),n=r(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||G(e.length)?r(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return s(e),r(e<0?0:0|u(e))}function h(e){for(var t=e.length<0?0:0|u(e.length),n=r(t),c=0;c<t;c+=1)n[c]=255&e[c];return n}function g(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var c;return c=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(c,o.prototype),c}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,c=arguments.length>2&&!0===arguments[2];if(!c&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(a)return c?-1:B(e).length;t=(""+t).toLowerCase(),a=!0}}function p(e,t,n){var c=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(c)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),c=!0}}function m(e,t,n){var c=e[t];e[t]=e[n],e[n]=c}function _(e,t,n,c,a){if(0===e.length)return-1;if("string"==typeof n?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=o.from(t,c)),o.isBuffer(t))return 0===t.length?-1:v(e,t,n,c,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,c,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,c,a){var i,r=1,o=e.length,l=t.length;if(void 0!==c&&("ucs2"===(c=String(c).toLowerCase())||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(e.length<2||t.length<2)return-1;r=2,o/=2,l/=2,n/=2}function s(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(a){var d=-1;for(i=n;i<o;i++)if(s(e,i)===s(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===l)return d*r}else-1!==d&&(i-=i-d),d=-1}else for(n+l>o&&(n=o-l),i=n;i>=0;i--){for(var h=!0,g=0;g<l;g++)if(s(e,i+g)!==s(t,g)){h=!1;break}if(h)return i}return-1}function b(e,t,n,c){n=Number(n)||0;var a=e.length-n;c?(c=Number(c))>a&&(c=a):c=a;var i=t.length;c>i/2&&(c=i/2);for(var r=0;r<c;++r){var o=parseInt(t.substr(2*r,2),16);if(G(o))return r;e[n+r]=o}return r}function y(e,t,n,c){return U(B(t,e.length-n),e,n,c)}function x(e,t,n,c){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,c)}function w(e,t,n,c){return U(O(t),e,n,c)}function S(e,t,n,c){return U(function(e,t){for(var n,c,a=[],i=0;i<e.length&&!((t-=2)<0);++i)c=(n=e.charCodeAt(i))>>8,a.push(n%256),a.push(c);return a}(t,e.length-n),e,n,c)}function C(e,t,n){return c.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var c=[],a=t;a<n;){var i,r,o,l,s=e[a],d=null,h=s>239?4:s>223?3:s>191?2:1;if(a+h<=n)switch(h){case 1:s<128&&(d=s);break;case 2:128==(192&(i=e[a+1]))&&(l=(31&s)<<6|63&i)>127&&(d=l);break;case 3:r=e[a+2],128==(192&(i=e[a+1]))&&128==(192&r)&&(l=(15&s)<<12|(63&i)<<6|63&r)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:r=e[a+2],o=e[a+3],128==(192&(i=e[a+1]))&&128==(192&r)&&128==(192&o)&&(l=(15&s)<<18|(63&i)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(d=l)}null===d?(d=65533,h=1):d>65535&&(c.push((d-=65536)>>>10&1023|55296),d=56320|1023&d),c.push(d),a+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",c=0;c<t;)n+=String.fromCharCode.apply(String,e.slice(c,c+=4096));return n}(c)}function N(e,t,n){var c="";n=Math.min(e.length,n);for(var a=t;a<n;++a)c+=String.fromCharCode(127&e[a]);return c}function E(e,t,n){var c="";n=Math.min(e.length,n);for(var a=t;a<n;++a)c+=String.fromCharCode(e[a]);return c}function k(e,t,n){var c=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>c)&&(n=c);for(var a="",i=t;i<n;++i)a+=z[e[i]];return a}function T(e,t,n){for(var c=e.slice(t,n),a="",i=0;i<c.length-1;i+=2)a+=String.fromCharCode(c[i]+256*c[i+1]);return a}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,c,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+c>e.length)throw new RangeError("Index out of range")}function R(e,t,n,c,a,i){if(n+c>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,c,i){return t=+t,n>>>=0,i||R(e,0,n,4),a.write(e,t,n,c,23,4),n+4}function L(e,t,n,c,i){return t=+t,n>>>=0,i||R(e,0,n,8),a.write(e,t,n,c,52,8),n+8}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,(o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}(e,t,n)},o.allocUnsafe=function(e){return d(e)},o.allocUnsafeSlow=function(e){return d(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(F(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,c=t.length,a=0,i=Math.min(n,c);a<i;++a)if(e[a]!==t[a]){n=e[a],c=t[a];break}return n<c?-1:c<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var c=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(F(i,Uint8Array))a+i.length>c.length?o.from(i).copy(c,a):Uint8Array.prototype.set.call(c,i,a);else{if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(c,a)}a+=i.length}return c},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toLocaleString=o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):p.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(e,t,n,c,a){if(F(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===c&&(c=0),void 0===a&&(a=this.length),t<0||n>e.length||c<0||a>this.length)throw new RangeError("out of range index");if(c>=a&&t>=n)return 0;if(c>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(c>>>=0),r=(n>>>=0)-(t>>>=0),l=Math.min(i,r),s=this.slice(c,a),d=e.slice(t,n),h=0;h<l;++h)if(s[h]!==d[h]){i=s[h],r=d[h];break}return i<r?-1:r<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},o.prototype.write=function(e,t,n,c){if(void 0===t)c="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)c=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===c&&(c="utf8")):(c=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");for(var i=!1;;)switch(c){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var c=this.subarray(e,t);return Object.setPrototypeOf(c,o.prototype),c},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var c=this[e],a=1,i=0;++i<t&&(a*=256);)c+=this[e+i]*a;return c},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var c=this[e+--t],a=1;t>0&&(a*=256);)c+=this[e+--t]*a;return c},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var c=this[e],a=1,i=0;++i<t&&(a*=256);)c+=this[e+i]*a;return c>=(a*=128)&&(c-=Math.pow(2,8*t)),c},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);for(var c=t,a=1,i=this[e+--c];c>0&&(a*=256);)i+=this[e+--c]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),a.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),a.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),a.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),a.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,c){e=+e,t>>>=0,n>>>=0,c||P(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,c){e=+e,t>>>=0,n>>>=0,c||P(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,c){if(e=+e,t>>>=0,!c){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var i=0,r=1,o=0;for(this[t]=255&e;++i<n&&(r*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/r>>0)-o&255;return t+n},o.prototype.writeIntBE=function(e,t,n,c){if(e=+e,t>>>=0,!c){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var i=n-1,r=1,o=0;for(this[t+i]=255&e;--i>=0&&(r*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/r>>0)-o&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,c){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),c||0===c||(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<n&&(c=n),c===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-n&&(c=e.length-t+n);var a=c-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,c):Uint8Array.prototype.set.call(e,this.subarray(n,c),t),a},o.prototype.fill=function(e,t,n,c){if("string"==typeof e){if("string"==typeof t?(c=t,t=0,n=this.length):"string"==typeof n&&(c=n,n=this.length),void 0!==c&&"string"!=typeof c)throw new TypeError("encoding must be a string");if("string"==typeof c&&!o.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(1===e.length){var a=e.charCodeAt(0);("utf8"===c&&a<128||"latin1"===c)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var r=o.isBuffer(e)?e:o.from(e,c),l=r.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=r[i%l]}return this};var D=/[^+/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var c=e.length,a=null,i=[],r=0;r<c;++r){if((n=e.charCodeAt(r))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(r+1===c){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function O(e){return c.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,c){for(var a=0;a<c&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}var z=function(){for(var e=new Array(256),t=0;t<16;++t)for(var n=16*t,c=0;c<16;++c)e[n+c]="0123456789abcdef"[t]+"0123456789abcdef"[c];return e}()},"u/Db":function(e,t,n){var c=n("J6Nv"),a=n("BCVQ");t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!c.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(c){return n}}},vvrf:function(e,t,n){var c=n("u/Db"),a=n("3X7Y"),i=n("nZSm"),r=n("AZa5"),o=n("Lzq4"),l=n("BCVQ"),s=n("e/Dd"),d=n("ELBg");function h(e){return unescape(encodeURIComponent(e)).length}function g(e,t,n){for(var c,a=[];null!==(c=e.exec(n));)a.push({data:c[0],index:c.index,mode:t,length:c[0].length});return a}function u(e){var t,n,a=g(l.NUMERIC,c.NUMERIC,e),i=g(l.ALPHANUMERIC,c.ALPHANUMERIC,e);return s.isKanjiModeEnabled()?(t=g(l.BYTE,c.BYTE,e),n=g(l.KANJI,c.KANJI,e)):(t=g(l.BYTE_KANJI,c.BYTE,e),n=[]),a.concat(i,t,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case c.NUMERIC:return a.getBitsLength(e);case c.ALPHANUMERIC:return i.getBitsLength(e);case c.KANJI:return o.getBitsLength(e);case c.BYTE:return r.getBitsLength(e)}}function p(e,t){var n,l=c.getBestModeForData(e);if((n=c.from(t,l))!==c.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+c.toString(n)+".\n Suggested mode is: "+c.toString(l));switch(n!==c.KANJI||s.isKanjiModeEnabled()||(n=c.BYTE),n){case c.NUMERIC:return new a(e);case c.ALPHANUMERIC:return new i(e);case c.KANJI:return new o(e);case c.BYTE:return new r(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(p(t,null)):t.data&&e.push(p(t.data,t.mode)),e},[])},t.fromString=function(e,n){for(var a=function(e,t){for(var n={},a={start:{}},i=["start"],r=0;r<e.length;r++){for(var o=e[r],l=[],s=0;s<o.length;s++){var d=o[s],h=""+r+s;l.push(h),n[h]={node:d,lastCount:0},a[h]={};for(var g=0;g<i.length;g++){var u=i[g];n[u]&&n[u].node.mode===d.mode?(a[u][h]=f(n[u].lastCount+d.length,d.mode)-f(n[u].lastCount,d.mode),n[u].lastCount+=d.length):(n[u]&&(n[u].lastCount=d.length),a[u][h]=f(d.length,d.mode)+4+c.getCharCountIndicator(d.mode,t))}}i=l}for(g=0;g<i.length;g++)a[i[g]].end=0;return{map:a,table:n}}(function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];switch(a.mode){case c.NUMERIC:t.push([a,{data:a.data,mode:c.ALPHANUMERIC,length:a.length},{data:a.data,mode:c.BYTE,length:a.length}]);break;case c.ALPHANUMERIC:t.push([a,{data:a.data,mode:c.BYTE,length:a.length}]);break;case c.KANJI:t.push([a,{data:a.data,mode:c.BYTE,length:h(a.data)}]);break;case c.BYTE:t.push([{data:a.data,mode:c.BYTE,length:h(a.data)}])}}return t}(u(e,s.isKanjiModeEnabled())),n),i=d.find_path(a.map,"start","end"),r=[],o=1;o<i.length-1;o++)r.push(a.table[i[o]].node);return t.fromArray(r.reduce(function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[]))},t.rawSplit=function(e){return t.fromArray(u(e,s.isKanjiModeEnabled()))}},yKow:function(e,t,n){var c=n("e/Dd"),a=n("NPxG"),i=n("ekOh"),r=n("u/Db"),o=n("J6Nv"),l=n("7uVY"),s=c.getBCHDigit(7973);function d(e,t){return r.getCharCountIndicator(e,t)+4}function h(e,t){var n=0;return e.forEach(function(e){var c=d(e.mode,t);n+=c+e.getBitsLength()}),n}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=r.BYTE);var i=8*(c.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t));if(n===r.MIXED)return i;var l=i-d(n,e);switch(n){case r.NUMERIC:return Math.floor(l/10*3);case r.ALPHANUMERIC:return Math.floor(l/11*2);case r.KANJI:return Math.floor(l/13);case r.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){var c,a=i.from(n,i.M);if(l(e)){if(e.length>1)return function(e,n){for(var c=1;c<=40;c++)if(h(e,c)<=t.getCapacity(c,n,r.MIXED))return c}(e,a);if(0===e.length)return 1;c=e[0]}else c=e;return function(e,n,c){for(var a=1;a<=40;a++)if(n<=t.getCapacity(a,c,e))return a}(c.mode,c.getLength(),a)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;c.getBCHDigit(t)-s>=0;)t^=7973<<c.getBCHDigit(t)-s;return e<<12|t}}}])}();